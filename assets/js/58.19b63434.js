(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{656:function(a,s,v){"use strict";v.r(s);var n=v(0),r=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"_12-åƒåœ¾å›æ”¶-ä¸‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-åƒåœ¾å›æ”¶-ä¸‹"}},[a._v("#")]),a._v(" 12 | åƒåœ¾å›æ”¶ï¼ˆä¸‹ï¼‰")]),a._v(" "),s("p",[a._v("åœ¨è¯»åšå£«çš„æ—¶å€™ï¼Œæˆ‘æ›¾ç»å†™è¿‡ä¸€ä¸ªç»Ÿè®¡ Java å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„åŠ¨æ€åˆ†æï¼Œå¹¶ä¸”ç”¨å®ƒæ¥è·‘äº†ä¸€äº›åŸºå‡†æµ‹è¯•ã€‚")]),a._v(" "),s("p",[a._v("å…¶ä¸­ä¸€äº›ç¨‹åºçš„ç»“æœï¼Œæ°å¥½éªŒè¯äº†è®¸å¤šç ”ç©¶äººå‘˜çš„å‡è®¾ï¼Œå³å¤§éƒ¨åˆ†çš„ Java å¯¹è±¡åªå­˜æ´»ä¸€å°æ®µæ—¶é—´ï¼Œè€Œå­˜æ´»ä¸‹æ¥çš„å°éƒ¨åˆ† Java å¯¹è±¡åˆ™ä¼šå­˜æ´»å¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531143600055-f436ef.png",alt:"image-20220531143600055"}})]),a._v(" "),s("p",[a._v("ï¼ˆpmd ä¸­ Java å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ç›´æ–¹å›¾ï¼Œçº¢è‰²çš„è¡¨ç¤ºè¢«é€ƒé€¸åˆ†æä¼˜åŒ–æ‰çš„å¯¹è±¡ï¼‰")]),a._v(" "),s("p",[a._v("ä¹‹æ‰€ä»¥è¦æåˆ°è¿™ä¸ªå‡è®¾ï¼Œæ˜¯å› ä¸ºå®ƒé€ å°±äº† Java è™šæ‹Ÿæœºçš„åˆ†ä»£å›æ”¶æ€æƒ³ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†å †ç©ºé—´åˆ’åˆ†ä¸ºä¸¤ä»£ï¼Œåˆ†åˆ«å«åšæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚æ–°ç”Ÿä»£ç”¨æ¥å­˜å‚¨æ–°å»ºçš„å¯¹è±¡ã€‚å½“å¯¹è±¡å­˜æ´»æ—¶é—´å¤Ÿé•¿æ—¶ï¼Œåˆ™å°†å…¶ç§»åŠ¨åˆ°è€å¹´ä»£ã€‚")]),a._v(" "),s("p",[a._v("Java è™šæ‹Ÿæœºå¯ä»¥ç»™ä¸åŒä»£ä½¿ç”¨ä¸åŒçš„å›æ”¶ç®—æ³•ã€‚å¯¹äºæ–°ç”Ÿä»£ï¼Œæˆ‘ä»¬çŒœæµ‹å¤§éƒ¨åˆ†çš„ Java å¯¹è±¡åªå­˜æ´»ä¸€å°æ®µæ—¶é—´ï¼Œé‚£ä¹ˆä¾¿å¯ä»¥é¢‘ç¹åœ°é‡‡ç”¨è€—æ—¶è¾ƒçŸ­çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œè®©å¤§éƒ¨åˆ†çš„åƒåœ¾éƒ½èƒ½å¤Ÿåœ¨æ–°ç”Ÿä»£è¢«å›æ”¶æ‰ã€‚")]),a._v(" "),s("p",[a._v("å¯¹äºè€å¹´ä»£ï¼Œæˆ‘ä»¬çŒœæµ‹å¤§éƒ¨åˆ†çš„åƒåœ¾å·²ç»åœ¨æ–°ç”Ÿä»£ä¸­è¢«å›æ”¶äº†ï¼Œè€Œåœ¨è€å¹´ä»£ä¸­çš„å¯¹è±¡æœ‰å¤§æ¦‚ç‡ä¼šç»§ç»­å­˜æ´»ã€‚å½“çœŸæ­£è§¦å‘é’ˆå¯¹è€å¹´ä»£çš„å›æ”¶æ—¶ï¼Œåˆ™ä»£è¡¨è¿™ä¸ªå‡è®¾å‡ºé”™äº†ï¼Œæˆ–è€…å †çš„ç©ºé—´å·²ç»è€—å°½äº†ã€‚")]),a._v(" "),s("p",[a._v("è¿™æ—¶å€™ï¼ŒJava è™šæ‹Ÿæœºå¾€å¾€éœ€è¦åšä¸€æ¬¡å…¨å †æ‰«æï¼Œè€—æ—¶ä¹Ÿå°†ä¸è®¡æˆæœ¬ã€‚ï¼ˆå½“ç„¶ï¼Œç°ä»£çš„åƒåœ¾å›æ”¶å™¨éƒ½åœ¨å¹¶å‘æ”¶é›†çš„é“è·¯ä¸Šå‘å±•ï¼Œæ¥é¿å…è¿™ç§å…¨å †æ‰«æçš„æƒ…å†µã€‚ï¼‰")]),a._v(" "),s("p",[a._v("ä»Šå¤©è¿™ä¸€ç¯‡æˆ‘ä»¬æ¥å…³æ³¨ä¸€ä¸‹é’ˆå¯¹æ–°ç”Ÿä»£çš„ Minor GCã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Java è™šæ‹Ÿæœºä¸­çš„å †å…·ä½“æ˜¯æ€ä¹ˆåˆ’åˆ†çš„ã€‚")]),a._v(" "),s("h2",{attrs:{id:"java-è™šæ‹Ÿæœºçš„å †åˆ’åˆ†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-è™šæ‹Ÿæœºçš„å †åˆ’åˆ†"}},[a._v("#")]),a._v(" Java è™šæ‹Ÿæœºçš„å †åˆ’åˆ†")]),a._v(" "),s("p",[a._v("å‰é¢æåˆ°ï¼ŒJava è™šæ‹Ÿæœºå°†å †åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚å…¶ä¸­ï¼Œæ–°ç”Ÿä»£åˆè¢«åˆ’åˆ†ä¸º Eden åŒºï¼Œä»¥åŠä¸¤ä¸ªå¤§å°ç›¸åŒçš„ Survivor åŒºã€‚")]),a._v(" "),s("p",[a._v("é»˜è®¤æƒ…å†µä¸‹ï¼ŒJava è™šæ‹Ÿæœºé‡‡å–çš„æ˜¯ä¸€ç§åŠ¨æ€åˆ†é…çš„ç­–ç•¥ï¼ˆå¯¹åº” Java è™šæ‹Ÿæœºå‚æ•°  -XX:+UsePSAdaptiveSurvivorSizePolicyï¼‰ï¼Œæ ¹æ®ç”Ÿæˆå¯¹è±¡çš„é€Ÿç‡ï¼Œä»¥åŠ Survivor åŒºçš„ä½¿ç”¨æƒ…å†µåŠ¨æ€è°ƒæ•´  Eden åŒºå’Œ Survivor åŒºçš„æ¯”ä¾‹ã€‚")]),a._v(" "),s("p",[a._v("å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å‚æ•° -XX:SurvivorRatio æ¥å›ºå®šè¿™ä¸ªæ¯”ä¾‹ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä¸­ä¸€ä¸ª Survivor åŒºä¼šä¸€ç›´ä¸ºç©ºï¼Œå› æ­¤æ¯”ä¾‹è¶Šä½æµªè´¹çš„å †ç©ºé—´å°†è¶Šé«˜ã€‚")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531143607413-8998d6.png",alt:"image-20220531143607413"}})]),a._v(" "),s("p",[a._v("é€šå¸¸æ¥è¯´ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ new æŒ‡ä»¤æ—¶ï¼Œå®ƒä¼šåœ¨ Eden åŒºä¸­åˆ’å‡ºä¸€å—ä½œä¸ºå­˜å‚¨å¯¹è±¡çš„å†…å­˜ã€‚ç”±äºå †ç©ºé—´æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œå› æ­¤ç›´æ¥åœ¨è¿™é‡Œè¾¹åˆ’ç©ºé—´æ˜¯éœ€è¦è¿›è¡ŒåŒæ­¥çš„ã€‚")]),a._v(" "),s("p",[a._v("å¦åˆ™ï¼Œå°†æœ‰å¯èƒ½å‡ºç°ä¸¤ä¸ªå¯¹è±¡å…±ç”¨ä¸€æ®µå†…å­˜çš„äº‹æ•…ã€‚å¦‚æœä½ è¿˜è®°å¾—å‰ä¸¤ç¯‡æˆ‘ç”¨â€œåœè½¦ä½â€æ‰“çš„æ¯”æ–¹çš„è¯ï¼Œè¿™é‡Œå°±ç›¸å½“äºä¸¤ä¸ªå¸æœºï¼ˆçº¿ç¨‹ï¼‰åŒæ—¶å°†è½¦åœå…¥åŒä¸€ä¸ªåœè½¦ä½ï¼Œå› è€Œå‘ç”Ÿå‰è¹­äº‹æ•…ã€‚")]),a._v(" "),s("p",[a._v("Java è™šæ‹Ÿæœºçš„è§£å†³æ–¹æ³•æ˜¯ä¸ºæ¯ä¸ªå¸æœºé¢„å…ˆç”³è¯·å¤šä¸ªåœè½¦ä½ï¼Œå¹¶ä¸”åªå…è®¸è¯¥å¸æœºåœåœ¨è‡ªå·±çš„åœè½¦ä½ä¸Šã€‚é‚£ä¹ˆå½“å¸æœºçš„åœè½¦ä½ç”¨å®Œäº†è¯¥æ€ä¹ˆåŠå‘¢ï¼ˆå‡è®¾è¿™ä¸ªå¸æœºä»£å®¢æ³Šè½¦ï¼‰ï¼Ÿ")]),a._v(" "),s("p",[a._v("ç­”æ¡ˆæ˜¯ï¼šå†ç”³è¯·å¤šä¸ªåœè½¦ä½ä¾¿å¯ä»¥äº†ã€‚è¿™é¡¹æŠ€æœ¯è¢«ç§°ä¹‹ä¸º TLABï¼ˆThread Local Allocation Bufferï¼Œå¯¹åº”è™šæ‹Ÿæœºå‚æ•° -XX:+UseTLABï¼Œé»˜è®¤å¼€å¯ï¼‰ã€‚")]),a._v(" "),s("p",[a._v("å…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥å‘ Java è™šæ‹Ÿæœºç”³è¯·ä¸€æ®µè¿ç»­çš„å†…å­˜ï¼Œæ¯”å¦‚ 2048 å­—èŠ‚ï¼Œä½œä¸ºçº¿ç¨‹ç§æœ‰çš„ TLABã€‚")]),a._v(" "),s("p",[a._v("è¿™ä¸ªæ“ä½œéœ€è¦åŠ é”ï¼Œçº¿ç¨‹éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼ˆå®é™…ä¸Šå¯èƒ½æ›´å¤šï¼Œä½†é‡è¦ä¹Ÿå°±ä¸¤ä¸ªï¼‰ï¼Œä¸€ä¸ªæŒ‡å‘ TLAB ä¸­ç©ºä½™å†…å­˜çš„èµ·å§‹ä½ç½®ï¼Œä¸€ä¸ªåˆ™æŒ‡å‘ TLAB æœ«å°¾ã€‚")]),a._v(" "),s("p",[a._v("æ¥ä¸‹æ¥çš„ new æŒ‡ä»¤ï¼Œä¾¿å¯ä»¥ç›´æ¥é€šè¿‡æŒ‡é’ˆåŠ æ³•ï¼ˆbump the pointerï¼‰æ¥å®ç°ï¼Œå³æŠŠæŒ‡å‘ç©ºä½™å†…å­˜ä½ç½®çš„æŒ‡é’ˆåŠ ä¸Šæ‰€è¯·æ±‚çš„å­—èŠ‚æ•°ã€‚")]),a._v(" "),s("blockquote",[s("p",[a._v("æˆ‘çŒœæµ‹ä¼šæœ‰ç•™è¨€é—®ä¸ºä»€ä¹ˆä¸æŠŠ bump the pointer  ç¿»è¯‘æˆæŒ‡é’ˆç¢°æ’ã€‚è¿™é‡Œå…ˆè§£é‡Šä¸€ä¸‹ï¼Œåœ¨è‹±è¯­ä¸­æˆ‘ä»¬é€šå¸¸çœç•¥äº† bump up the pointer ä¸­çš„ upã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ bump  çš„å«ä¹‰åº”ä¸ºâ€œæé«˜â€ã€‚å¦å¤–ä¸€ä¸ªä¾‹å­æ˜¯å½“æˆ‘ä»¬å‘å¸ƒè½¯ä»¶çš„æ–°ç‰ˆæœ¬æ—¶ï¼Œä¹Ÿä¼šè¯´ bump the version numberã€‚")])]),a._v(" "),s("p",[a._v("å¦‚æœåŠ æ³•åç©ºä½™å†…å­˜æŒ‡é’ˆçš„å€¼ä»å°äºæˆ–ç­‰äºæŒ‡å‘æœ«å°¾çš„æŒ‡é’ˆï¼Œåˆ™ä»£è¡¨åˆ†é…æˆåŠŸã€‚å¦åˆ™ï¼ŒTLAB å·²ç»æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥æ»¡è¶³æœ¬æ¬¡æ–°å»ºæ“ä½œã€‚è¿™ä¸ªæ—¶å€™ï¼Œä¾¿éœ€è¦å½“å‰çº¿ç¨‹é‡æ–°ç”³è¯·æ–°çš„ TLABã€‚")]),a._v(" "),s("p",[a._v("å½“ Eden åŒºçš„ç©ºé—´è€—å°½äº†æ€ä¹ˆåŠï¼Ÿè¿™ä¸ªæ—¶å€™ Java è™šæ‹Ÿæœºä¾¿ä¼šè§¦å‘ä¸€æ¬¡ Minor GCï¼Œæ¥æ”¶é›†æ–°ç”Ÿä»£çš„åƒåœ¾ã€‚å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ï¼Œåˆ™ä¼šè¢«é€åˆ° Survivor åŒºã€‚")]),a._v(" "),s("p",[a._v("å‰é¢æåˆ°ï¼Œæ–°ç”Ÿä»£å…±æœ‰ä¸¤ä¸ª Survivor åŒºï¼Œæˆ‘ä»¬åˆ†åˆ«ç”¨ from å’Œ to æ¥æŒ‡ä»£ã€‚å…¶ä¸­ to æŒ‡å‘çš„ Survivior åŒºæ˜¯ç©ºçš„ã€‚")]),a._v(" "),s("p",[a._v("å½“å‘ç”Ÿ Minor GC æ—¶ï¼ŒEden åŒºå’Œ from æŒ‡å‘çš„ Survivor åŒºä¸­çš„å­˜æ´»å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ° to æŒ‡å‘çš„ Survivor åŒºä¸­ï¼Œç„¶åäº¤æ¢ from å’Œ to æŒ‡é’ˆï¼Œä»¥ä¿è¯ä¸‹ä¸€æ¬¡ Minor GC æ—¶ï¼Œto æŒ‡å‘çš„ Survivor åŒºè¿˜æ˜¯ç©ºçš„ã€‚")]),a._v(" "),s("p",[a._v("Java è™šæ‹Ÿæœºä¼šè®°å½• Survivor åŒºä¸­çš„å¯¹è±¡ä¸€å…±è¢«æ¥å›å¤åˆ¶äº†å‡ æ¬¡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡è¢«å¤åˆ¶çš„æ¬¡æ•°ä¸º 15ï¼ˆå¯¹åº”è™šæ‹Ÿæœºå‚æ•°  -XX:+MaxTenuringThresholdï¼‰ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°†è¢«æ™‹å‡ï¼ˆpromoteï¼‰è‡³è€å¹´ä»£ã€‚å¦å¤–ï¼Œå¦‚æœå•ä¸ª Survivor  åŒºå·²ç»è¢«å ç”¨äº† 50%ï¼ˆå¯¹åº”è™šæ‹Ÿæœºå‚æ•° -XX:TargetSurvivorRatioï¼‰ï¼Œé‚£ä¹ˆè¾ƒé«˜å¤åˆ¶æ¬¡æ•°çš„å¯¹è±¡ä¹Ÿä¼šè¢«æ™‹å‡è‡³è€å¹´ä»£ã€‚")]),a._v(" "),s("p",[a._v("æ€»è€Œè¨€ä¹‹ï¼Œå½“å‘ç”Ÿ Minor GC æ—¶ï¼Œæˆ‘ä»¬åº”ç”¨äº†æ ‡è®° - å¤åˆ¶ç®—æ³•ï¼Œå°† Survivor  åŒºä¸­çš„è€å­˜æ´»å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£ï¼Œç„¶åå°†å‰©ä¸‹çš„å­˜æ´»å¯¹è±¡å’Œ Eden åŒºçš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ª Survivor åŒºä¸­ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒEden  åŒºä¸­çš„å¯¹è±¡åŸºæœ¬éƒ½æ­»äº¡äº†ï¼Œé‚£ä¹ˆéœ€è¦å¤åˆ¶çš„æ•°æ®å°†éå¸¸å°‘ï¼Œå› æ­¤é‡‡ç”¨è¿™ç§æ ‡è®° - å¤åˆ¶ç®—æ³•çš„æ•ˆæœæå¥½ã€‚")]),a._v(" "),s("p",[a._v("Minor GC  çš„å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ä¸ç”¨å¯¹æ•´ä¸ªå †è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ä½†æ˜¯ï¼Œå®ƒå´æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è€å¹´ä»£çš„å¯¹è±¡å¯èƒ½å¼•ç”¨æ–°ç”Ÿä»£çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ ‡è®°å­˜æ´»å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰«æè€å¹´ä»£ä¸­çš„å¯¹è±¡ã€‚å¦‚æœè¯¥å¯¹è±¡æ‹¥æœ‰å¯¹æ–°ç”Ÿä»£å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼•ç”¨ä¹Ÿä¼šè¢«ä½œä¸º GC Rootsã€‚")]),a._v(" "),s("p",[a._v("è¿™æ ·ä¸€æ¥ï¼Œå²‚ä¸æ˜¯åˆåšäº†ä¸€æ¬¡å…¨å †æ‰«æå‘¢ï¼Ÿ")]),a._v(" "),s("h2",{attrs:{id:"å¡è¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¡è¡¨"}},[a._v("#")]),a._v(" å¡è¡¨")]),a._v(" "),s("p",[a._v("HotSpot ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€é¡¹å«åšå¡è¡¨ï¼ˆCard Tableï¼‰çš„æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯å°†æ•´ä¸ªå †åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªå¤§å°ä¸º 512  å­—èŠ‚çš„å¡ï¼Œå¹¶ä¸”ç»´æŠ¤ä¸€ä¸ªå¡è¡¨ï¼Œç”¨æ¥å­˜å‚¨æ¯å¼ å¡çš„ä¸€ä¸ªæ ‡è¯†ä½ã€‚è¿™ä¸ªæ ‡è¯†ä½ä»£è¡¨å¯¹åº”çš„å¡æ˜¯å¦å¯èƒ½å­˜æœ‰æŒ‡å‘æ–°ç”Ÿä»£å¯¹è±¡çš„å¼•ç”¨ã€‚å¦‚æœå¯èƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¿™å¼ å¡æ˜¯è„çš„ã€‚")]),a._v(" "),s("p",[a._v("åœ¨è¿›è¡Œ Minor GC çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä¸ç”¨æ‰«ææ•´ä¸ªè€å¹´ä»£ï¼Œè€Œæ˜¯åœ¨å¡è¡¨ä¸­å¯»æ‰¾è„å¡ï¼Œå¹¶å°†è„å¡ä¸­çš„å¯¹è±¡åŠ å…¥åˆ° Minor GC çš„ GC Roots é‡Œã€‚å½“å®Œæˆæ‰€æœ‰è„å¡çš„æ‰«æä¹‹åï¼ŒJava è™šæ‹Ÿæœºä¾¿ä¼šå°†æ‰€æœ‰è„å¡çš„æ ‡è¯†ä½æ¸…é›¶ã€‚")]),a._v(" "),s("p",[a._v("ç”±äº Minor GC ä¼´éšç€å­˜æ´»å¯¹è±¡çš„å¤åˆ¶ï¼Œè€Œå¤åˆ¶éœ€è¦æ›´æ–°æŒ‡å‘è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚å› æ­¤ï¼Œåœ¨æ›´æ–°å¼•ç”¨çš„åŒæ—¶ï¼Œæˆ‘ä»¬åˆä¼šè®¾ç½®å¼•ç”¨æ‰€åœ¨çš„å¡çš„æ ‡è¯†ä½ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿è„å¡ä¸­å¿…å®šåŒ…å«æŒ‡å‘æ–°ç”Ÿä»£å¯¹è±¡çš„å¼•ç”¨ã€‚")]),a._v(" "),s("p",[a._v("åœ¨ Minor GC ä¹‹å‰ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç¡®ä¿è„å¡ä¸­åŒ…å«æŒ‡å‘æ–°ç”Ÿä»£å¯¹è±¡çš„å¼•ç”¨ã€‚å…¶åŸå› å’Œå¦‚ä½•è®¾ç½®å¡çš„æ ‡è¯†ä½æœ‰å…³ã€‚")]),a._v(" "),s("p",[a._v("é¦–å…ˆï¼Œå¦‚æœæƒ³è¦ä¿è¯æ¯ä¸ªå¯èƒ½æœ‰æŒ‡å‘æ–°ç”Ÿä»£å¯¹è±¡å¼•ç”¨çš„å¡éƒ½è¢«æ ‡è®°ä¸ºè„å¡ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºéœ€è¦æˆªè·æ¯ä¸ªå¼•ç”¨å‹å®ä¾‹å˜é‡çš„å†™æ“ä½œï¼Œå¹¶ä½œå‡ºå¯¹åº”çš„å†™æ ‡è¯†ä½æ“ä½œã€‚")]),a._v(" "),s("p",[a._v("è¿™ä¸ªæ“ä½œåœ¨è§£é‡Šæ‰§è¡Œå™¨ä¸­æ¯”è¾ƒå®¹æ˜“å®ç°ã€‚ä½†æ˜¯åœ¨å³æ—¶ç¼–è¯‘å™¨ç”Ÿæˆçš„æœºå™¨ç ä¸­ï¼Œåˆ™éœ€è¦æ’å…¥é¢å¤–çš„é€»è¾‘ã€‚è¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„å†™å±éšœï¼ˆwrite barrierï¼Œæ³¨æ„ä¸è¦å’Œ volatile å­—æ®µçš„å†™å±éšœæ··æ·†ï¼‰ã€‚")]),a._v(" "),s("p",[a._v("å†™å±éšœéœ€è¦å°½å¯èƒ½åœ°ä¿æŒç®€æ´ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨æ¯æ¡å¼•ç”¨å‹å®ä¾‹å˜é‡çš„å†™æŒ‡ä»¤åè·Ÿç€ä¸€å¤§ä¸²æ³¨å…¥çš„æŒ‡ä»¤ã€‚")]),a._v(" "),s("p",[a._v("å› æ­¤ï¼Œå†™å±éšœå¹¶ä¸ä¼šåˆ¤æ–­æ›´æ–°åçš„å¼•ç”¨æ˜¯å¦æŒ‡å‘æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ï¼Œè€Œæ˜¯å®å¯é”™æ€ï¼Œä¸å¯æ”¾è¿‡ï¼Œä¸€å¾‹å½“æˆå¯èƒ½æŒ‡å‘æ–°ç”Ÿä»£å¯¹è±¡çš„å¼•ç”¨ã€‚")]),a._v(" "),s("p",[a._v("è¿™ä¹ˆä¸€æ¥ï¼Œå†™å±éšœä¾¿å¯ç²¾ç®€ä¸ºä¸‹é¢çš„ä¼ªä»£ç  [1]ã€‚è¿™é‡Œå³ç§» 9 ä½ç›¸å½“äºé™¤ä»¥ 512ï¼ŒJava è™šæ‹Ÿæœºä¾¿æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥ä»åœ°å€æ˜ å°„åˆ°å¡è¡¨ä¸­çš„ç´¢å¼•çš„ã€‚æœ€ç»ˆï¼Œè¿™æ®µä»£ç ä¼šè¢«ç¼–è¯‘æˆä¸€æ¡ç§»ä½æŒ‡ä»¤å’Œä¸€æ¡å­˜å‚¨æŒ‡ä»¤ã€‚")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\nCARD_TABLE [this address >> 9] = DIRTY;\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("è™½ç„¶å†™å±éšœä¸å¯é¿å…åœ°å¸¦æ¥ä¸€äº›å¼€é”€ï¼Œä½†æ˜¯å®ƒèƒ½å¤ŸåŠ å¤§ Minor GC çš„ååç‡ï¼ˆ åº”ç”¨è¿è¡Œæ—¶é—´ /(åº”ç”¨è¿è¡Œæ—¶é—´ + åƒåœ¾å›æ”¶æ—¶é—´) ï¼‰ã€‚æ€»çš„æ¥è¯´è¿˜æ˜¯å€¼å¾—çš„ã€‚ä¸è¿‡ï¼Œåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå†™å±éšœåˆå¸¦æ¥äº†è™šå…±äº«ï¼ˆfalse sharingï¼‰é—®é¢˜ [2]ã€‚")]),a._v(" "),s("p",[a._v("åœ¨ä»‹ç»å¯¹è±¡å†…å­˜å¸ƒå±€ä¸­æˆ‘æ›¾æåˆ°è™šå…±äº«é—®é¢˜ï¼Œè®²çš„æ˜¯å‡ ä¸ª volatile å­—æ®µå‡ºç°åœ¨åŒä¸€ç¼“å­˜è¡Œé‡Œé€ æˆçš„è™šå…±äº«ã€‚è¿™é‡Œçš„è™šå…±äº«åˆ™æ˜¯å¡è¡¨ä¸­ä¸åŒå¡çš„æ ‡è¯†ä½ä¹‹é—´çš„è™šå…±äº«é—®é¢˜ã€‚")]),a._v(" "),s("p",[a._v("åœ¨ HotSpot ä¸­ï¼Œå¡è¡¨æ˜¯é€šè¿‡ byte æ•°ç»„æ¥å®ç°çš„ã€‚å¯¹äºä¸€ä¸ª 64 å­—èŠ‚çš„ç¼“å­˜è¡Œæ¥è¯´ï¼Œå¦‚æœç”¨å®ƒæ¥åŠ è½½éƒ¨åˆ†å¡è¡¨ï¼Œé‚£ä¹ˆå®ƒå°†å¯¹åº” 64 å¼ å¡ï¼Œä¹Ÿå°±æ˜¯ 32KB çš„å†…å­˜ã€‚")]),a._v(" "),s("p",[a._v("å¦‚æœåŒæ—¶æœ‰ä¸¤ä¸ª Java çº¿ç¨‹ï¼Œåœ¨è¿™ 32KB å†…å­˜ä¸­è¿›è¡Œå¼•ç”¨æ›´æ–°æ“ä½œï¼Œé‚£ä¹ˆä¹Ÿå°†é€ æˆå­˜å‚¨å¡è¡¨çš„åŒä¸€éƒ¨åˆ†çš„ç¼“å­˜è¡Œçš„å†™å›ã€æ— æ•ˆåŒ–æˆ–è€…åŒæ­¥æ“ä½œï¼Œå› è€Œé—´æ¥å½±å“ç¨‹åºæ€§èƒ½ã€‚")]),a._v(" "),s("p",[a._v("ä¸ºæ­¤ï¼ŒHotSpot å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å‚æ•° -XX:+UseCondCardMarkï¼Œæ¥å°½é‡å‡å°‘å†™å¡è¡¨çš„æ“ä½œã€‚å…¶ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\nif (CARD_TABLE [this address >> 9] != DIRTY) \n\n  CARD_TABLE [this address >> 9] = DIRTY;\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"æ€»ç»“ä¸å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“ä¸å®è·µ"}},[a._v("#")]),a._v(" æ€»ç»“ä¸å®è·µ")]),a._v(" "),s("p",[a._v("ä»Šå¤©æˆ‘ä»‹ç»äº† Java è™šæ‹Ÿæœºä¸­åƒåœ¾å›æ”¶å…·ä½“å®ç°çš„ä¸€äº›é€šç”¨çŸ¥è¯†ã€‚")]),a._v(" "),s("p",[a._v("Java è™šæ‹Ÿæœºå°†å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œå¹¶ä¸”å¯¹ä¸åŒä»£é‡‡ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚å…¶ä¸­ï¼Œæ–°ç”Ÿä»£åˆ†ä¸º Eden åŒºå’Œä¸¤ä¸ªå¤§å°ä¸€è‡´çš„ Survivor åŒºï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ª Survivor åŒºæ˜¯ç©ºçš„ã€‚")]),a._v(" "),s("p",[a._v("åœ¨åªé’ˆå¯¹æ–°ç”Ÿä»£çš„ Minor GC ä¸­ï¼ŒEden åŒºå’Œéç©º Survivor åŒºçš„å­˜æ´»å¯¹è±¡ä¼šè¢«å¤åˆ¶åˆ°ç©ºçš„ Survivor åŒºä¸­ï¼Œå½“ Survivor åŒºä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶æ¬¡æ•°è¶…è¿‡ä¸€å®šæ•°å€¼æ—¶ï¼Œå®ƒå°†è¢«æ™‹å‡è‡³è€å¹´ä»£ã€‚")]),a._v(" "),s("p",[a._v("å› ä¸º Minor GC åªé’ˆå¯¹æ–°ç”Ÿä»£è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ‰€ä»¥åœ¨æšä¸¾ GC Roots çš„æ—¶å€™ï¼Œå®ƒéœ€è¦è€ƒè™‘ä»è€å¹´ä»£åˆ°æ–°ç”Ÿä»£çš„å¼•ç”¨ã€‚ä¸ºäº†é¿å…æ‰«ææ•´ä¸ªè€å¹´ä»£ï¼ŒJava è™šæ‹Ÿæœºå¼•å…¥äº†åä¸ºå¡è¡¨çš„æŠ€æœ¯ï¼Œå¤§è‡´åœ°æ ‡å‡ºå¯èƒ½å­˜åœ¨è€å¹´ä»£åˆ°æ–°ç”Ÿä»£å¼•ç”¨çš„å†…å­˜åŒºåŸŸã€‚")]),a._v(" "),s("p",[a._v("ç”±äºç¯‡å¹…çš„åŸå› ï¼Œæˆ‘æ²¡æœ‰è®²è§£ Java è™šæ‹Ÿæœºä¸­å…·ä½“çš„åƒåœ¾å›æ”¶å™¨ã€‚æˆ‘åœ¨æ–‡ç« çš„æœ«å°¾é™„äº†ä¸€æ®µç®€å•çš„ä»‹ç»ï¼Œå¦‚æœä½ æœ‰å…´è¶£çš„è¯å¯ä»¥å‚é˜…ä¸€ä¸‹ã€‚")]),a._v(" "),s("p",[a._v("ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Java å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¯¹åƒåœ¾å›æ”¶çš„å½±å“ã€‚")]),a._v(" "),s("p",[a._v("å‰é¢æåˆ°ï¼ŒJava è™šæ‹Ÿæœºçš„åˆ†ä»£åƒåœ¾å›æ”¶æ˜¯åŸºäºå¤§éƒ¨åˆ†å¯¹è±¡åªå­˜æ´»ä¸€å°æ®µæ—¶é—´ï¼Œå°éƒ¨åˆ†å¯¹è±¡å´å­˜æ´»ä¸€å¤§æ®µæ—¶é—´çš„å‡è®¾çš„ã€‚")]),a._v(" "),s("p",[a._v("ç„¶è€Œï¼Œç°å®æƒ…å†µä¸­å¹¶éæ¯ä¸ªç¨‹åºéƒ½ç¬¦åˆå‰é¢æåˆ°çš„å‡è®¾ã€‚å¦‚æœä¸€ä¸ªç¨‹åºæ‹¥æœ‰ä¸­ç­‰ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼Œå¹¶ä¸”åˆšç§»åŠ¨åˆ°è€å¹´ä»£ä¾¿ä¸å†ä½¿ç”¨ï¼Œé‚£ä¹ˆå°†ç»™é»˜è®¤çš„åƒåœ¾å›æ”¶ç­–ç•¥é€ æˆæå¤§çš„éº»çƒ¦ã€‚")]),a._v(" "),s("p",[a._v("ä¸‹é¢è¿™æ®µç¨‹åºå°†ç”Ÿæˆ 64G çš„ Java å¯¹è±¡ã€‚å¹¶ä¸”ï¼Œæˆ‘é€šè¿‡ ALIVE_OBJECT_SIZE è¿™ä¸€å˜é‡æ¥å®šä¹‰åŒæ—¶å­˜æ´»çš„ Java å¯¹è±¡çš„å¤§å°ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§å¯¹äºåƒåœ¾å›æ”¶å™¨æ¥è¯´æ¯”è¾ƒç›´è§‚çš„ç”Ÿå‘½å‘¨æœŸã€‚")]),a._v(" "),s("p",[a._v("å½“æˆ‘ä»¬ä½¿ç”¨ Java 8 çš„é»˜è®¤ GCï¼Œå¹¶ä¸”å°†æ–°ç”Ÿä»£çš„ç©ºé—´é™åˆ¶åœ¨ 100M æ—¶ï¼Œè¯•ç€ä¼°ç®—å½“ ALIVE_OBJECT_SIZE  ä¸ºå¤šå°‘æ—¶ï¼Œè¿™æ®µç¨‹åºä¸ä¼šè§¦å‘ Full GCï¼ˆæç¤ºä¸€ä¸‹ï¼Œå¦‚æœ Survivor åŒºæ²¡æ³•å­˜å‚¨æ‰€æœ‰å­˜æ´»å¯¹è±¡ï¼Œå°†å‘ç”Ÿä»€ä¹ˆã€‚ï¼‰ã€‚å®é™…è¿è¡Œæƒ…å†µåˆæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\n// Run with java -XX:+PrintGC -Xmn100M -XX:PretenureSizeThreshold=10000 LifetimeTest\n\n// You may also try with -XX:+PrintHeapAtGCï¼Œ-XX:-UsePSAdaptiveSurvivorSizePolicy or -XX:SurvivorRatio=N\n\npublic class LifetimeTest {\n\n  private static final int K = 1024;\n\n  private static final int M = K * K;\n\n  private static final int G = K * M;\n\n \n\n  private static final int ALIVE_OBJECT_SIZE = 32 * M;\n\n \n\n  public static void main(String[] args) {\n\n    int length = ALIVE_OBJECT_SIZE / 64;\n\n    ObjectOf64Bytes[] array = new ObjectOf64Bytes[length];\n\n    for (long i = 0; i < G; i++) {\n\n      array[(int) (i % length)] = new ObjectOf64Bytes();\n\n    }\n\n  }\n\n}\n\n \n\nclass ObjectOf64Bytes {\n\n  long placeholder0;\n\n  long placeholder1;\n\n  long placeholder2;\n\n  long placeholder3;\n\n  long placeholder4;\n\n  long placeholder5;\n\n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br"),s("span",{staticClass:"line-number"},[a._v("48")]),s("br"),s("span",{staticClass:"line-number"},[a._v("49")]),s("br"),s("span",{staticClass:"line-number"},[a._v("50")]),s("br"),s("span",{staticClass:"line-number"},[a._v("51")]),s("br"),s("span",{staticClass:"line-number"},[a._v("52")]),s("br")]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br"),s("span",{staticClass:"line-number"},[a._v("48")]),s("br"),s("span",{staticClass:"line-number"},[a._v("49")]),s("br"),s("span",{staticClass:"line-number"},[a._v("50")]),s("br"),s("span",{staticClass:"line-number"},[a._v("51")]),s("br"),s("span",{staticClass:"line-number"},[a._v("52")]),s("br")])]),s("h2",{attrs:{id:"é™„å½•-java-è™šæ‹Ÿæœºä¸­çš„åƒåœ¾å›æ”¶å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é™„å½•-java-è™šæ‹Ÿæœºä¸­çš„åƒåœ¾å›æ”¶å™¨"}},[a._v("#")]),a._v(" é™„å½•ï¼šJava è™šæ‹Ÿæœºä¸­çš„åƒåœ¾å›æ”¶å™¨")]),a._v(" "),s("p",[a._v("é’ˆå¯¹æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶å™¨å…±æœ‰ä¸‰ä¸ªï¼šSerialï¼ŒParallel Scavenge å’Œ Parallel Newã€‚è¿™ä¸‰ä¸ªé‡‡ç”¨çš„éƒ½æ˜¯æ ‡è®° -  å¤åˆ¶ç®—æ³•ã€‚å…¶ä¸­ï¼ŒSerial æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„ï¼ŒParallel New å¯ä»¥çœ‹æˆ Serial çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚Parallel Scavenge å’Œ Parallel New ç±»ä¼¼ï¼Œä½†æ›´åŠ æ³¨é‡ååç‡ã€‚æ­¤å¤–ï¼ŒParallel Scavenge ä¸èƒ½ä¸ CMS ä¸€èµ·ä½¿ç”¨ã€‚")]),a._v(" "),s("p",[a._v("é’ˆå¯¹è€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨ä¹Ÿæœ‰ä¸‰ä¸ªï¼šåˆšåˆšæåˆ°çš„ Serial Old å’Œ Parallel Oldï¼Œä»¥åŠ CMSã€‚Serial Old å’Œ Parallel Old éƒ½æ˜¯æ ‡è®° - å‹ç¼©ç®—æ³•ã€‚åŒæ ·ï¼Œå‰è€…æ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œåè€…å¯ä»¥çœ‹æˆå‰è€…çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚")]),a._v(" "),s("p",[a._v("CMS é‡‡ç”¨çš„æ˜¯æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼Œå¹¶ä¸”æ˜¯å¹¶å‘çš„ã€‚é™¤äº†å°‘æ•°å‡ ä¸ªæ“ä½œéœ€è¦ Stop-the-world  ä¹‹å¤–ï¼Œå®ƒå¯ä»¥åœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åœ¨å¹¶å‘æ”¶é›†å¤±è´¥çš„æƒ…å†µä¸‹ï¼ŒJava è™šæ‹Ÿæœºä¼šä½¿ç”¨å…¶ä»–ä¸¤ä¸ªå‹ç¼©å‹åƒåœ¾å›æ”¶å™¨è¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ã€‚ç”±äº G1 çš„å‡ºç°ï¼ŒCMS åœ¨ Java 9 ä¸­å·²è¢«åºŸå¼ƒ [3]ã€‚")]),a._v(" "),s("p",[a._v("G1ï¼ˆGarbage  Firstï¼‰æ˜¯ä¸€ä¸ªæ¨ªè·¨æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨ã€‚å®é™…ä¸Šï¼Œå®ƒå·²ç»æ‰“ä¹±äº†å‰é¢æ‰€è¯´çš„å †ç»“æ„ï¼Œç›´æ¥å°†å †åˆ†æˆæå…¶å¤šä¸ªåŒºåŸŸã€‚æ¯ä¸ªåŒºåŸŸéƒ½å¯ä»¥å……å½“ Eden  åŒºã€Survivor åŒºæˆ–è€…è€å¹´ä»£ä¸­çš„ä¸€ä¸ªã€‚å®ƒé‡‡ç”¨çš„æ˜¯æ ‡è®° - å‹ç¼©ç®—æ³•ï¼Œè€Œä¸”å’Œ CMS ä¸€æ ·éƒ½èƒ½å¤Ÿåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¹¶å‘åœ°è¿›è¡Œåƒåœ¾å›æ”¶ã€‚")]),a._v(" "),s("p",[a._v("G1 èƒ½å¤Ÿé’ˆå¯¹æ¯ä¸ªç»†åˆ†çš„åŒºåŸŸæ¥è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åœ¨é€‰æ‹©è¿›è¡Œåƒåœ¾å›æ”¶çš„åŒºåŸŸæ—¶ï¼Œå®ƒä¼šä¼˜å…ˆå›æ”¶æ­»äº¡å¯¹è±¡è¾ƒå¤šçš„åŒºåŸŸã€‚è¿™ä¹Ÿæ˜¯ G1 åå­—çš„ç”±æ¥ã€‚")]),a._v(" "),s("p",[a._v("å³å°†åˆ°æ¥çš„ Java 11 å¼•å…¥äº† ZGCï¼Œå®£ç§°æš‚åœæ—¶é—´ä¸è¶…è¿‡ 10msã€‚å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯å‚è€ƒ R å¤§çš„è¿™ç¯‡æ–‡ç«  [4]ã€‚")]),a._v(" "),s("p",[a._v("[1]\nhttp://psy-lob-saw.blogspot.com/2014/10/the-jvm-write-barrier-card-marking.html\n[2]\nhttps://blogs.oracle.com/dave/false-sharing-induced-by-card-table-marking\n[3]\nhttp://openjdk.java.net/jeps/291\n[4]  https://www.zhihu.com/question/287945354/answer/458761494")]),a._v(" "),s("h2",{attrs:{id:"ç²¾é€‰ç•™è¨€-45"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç²¾é€‰ç•™è¨€-45"}},[a._v("#")]),a._v(" ç²¾é€‰ç•™è¨€(45)")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("godtrue ç½®é¡¶")]),a._v(" "),s("p",[a._v("2018-08-21")]),a._v(" "),s("p",[a._v("16")]),a._v(" "),s("p",[a._v("å†™çš„éå¸¸æ£’ï¼Œåˆå¸®æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªå°é»‘ç›’ä¸­çš„å¤©åœ°ã€‚\nå°ç»“ï¼š\n1:äºŒå…«æ³•åˆ™-é€‚ç”¨äºè®¸å¤šçš„é¢†åŸŸï¼Œå¯¹è±¡åœ¨JVMå¯¹å†…å­˜ç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸä¹ŸåŒæ ·ç¬¦åˆ")]),a._v(" "),s("p",[a._v("2:ä¸ºäº†æ›´å¥½çš„JVMæ€§èƒ½ä»¥åŠå……åˆ†åˆ©ç”¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„äºŒå…«æ³•åˆ™ï¼ŒJVMçš„ä½œè€…å°†JVMçš„å¯¹å†…å­˜ç©ºé—´è¿›è¡Œäº†åˆ†ä»£çš„å¤„ç†")]),a._v(" "),s("p",[a._v("3:å †å†…å­˜ç©ºé—´=å¹´è½»ä»£+è€å¹´ä»£")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("å¹´è½»ä»£=Eden+from+to\nå¹´è½»ä»£ç”¨äºåˆ†é…æ–°ç”Ÿçš„å¯¹è±¡\nEden-é€šå¸¸ç”¨äºå­˜å‚¨æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯¹å†…å­˜ç©ºé—´æ˜¯å…±äº«çš„ï¼Œæ‰€ä»¥ï¼Œç›´æ¥åœ¨è¿™é‡Œé¢åˆ’åˆ†ç©ºé—´éœ€è¦è¿›è¡ŒåŒæ­¥\n from-å½“EdenåŒºçš„ç©ºé—´è€—å°½æ—¶ï¼ŒJVMä¾¿ä¼šå‡ºå‘ä¸€æ¬¡Minor GC æ¥æ”¶é›†æ–°ç”Ÿä»£çš„åƒåœ¾ï¼Œä¼šæŠŠå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡æ”¾å…¥SurvivoråŒºï¼Œä¹Ÿå°±æ˜¯fromåŒº\n")])])]),s("p",[a._v("æ³¨æ„ï¼Œfromå’Œtoæ˜¯å˜åŠ¨çš„\nto-æŒ‡å‘çš„SurvivoråŒºæ˜¯ç©ºçš„ï¼Œç”¨äºå½“å‘ç”ŸMinor GC æ—¶ï¼Œå­˜å‚¨Edenå’ŒfromåŒºä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œç„¶åå†äº¤æ¢fromå’ŒtoæŒ‡é’ˆï¼Œä»¥ä¿è¯ä¸‹ä¸€æ¬¡Minor GC æ—¶toæŒ‡å‘çš„SurvivoråŒºè¿˜æ˜¯ç©ºçš„ã€‚")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" è€å¹´ä»£-ç”¨äºå­˜å‚¨å­˜æ´»æ—¶é—´æ›´ä¹…çš„å¯¹è±¡ï¼Œæ¯”å¦‚ï¼š15æ¬¡Minor GC è¿˜å­˜æ´»çš„å¯¹è±¡å°±æ”¾å…¥è€å¹´ä»£ä¸­\n")])])]),s("p",[a._v("4:å †å†…å­˜åˆ†ä»£åï¼Œä¼šæ ¹æ®ä»–ä»¬çš„ä¸åŒç‰¹ç‚¹æ¥åŒºåˆ«å¯¹å¾…ï¼Œè¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šä½¿ç”¨ä¸åŒçš„åƒåœ¾å›æ”¶æ–¹å¼ï¼Œé’ˆå¯¹æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶å™¨æœ‰å¦‚ä¸‹ä¸‰ä¸ªï¼šSerialã€Parallel Scavengeã€Parallel Newï¼Œä»–ä»¬é‡‡ç”¨çš„éƒ½æ˜¯æ ‡è®°-å¤åˆ¶çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚\né’ˆå¯¹è€å¹´ä»£çš„åƒåœ¾å›æ”¶å™¨æœ‰å¦‚ä¸‹ä¸‰ä¸ªï¼šSerial Old ã€Parallel Old ã€CMSï¼Œä»–ä»¬ä½¿ç”¨çš„éƒ½æ˜¯æ ‡è®°-å‹ç¼©çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚")]),a._v(" "),s("p",[a._v("5:TLABï¼ˆThread Local Allocation Bufferï¼‰-è¿™ä¸ªæŠ€æœ¯æ˜¯ç”¨äºè§£å†³å¤šçº¿ç¨‹ç«äº‰å †å†…å­˜åˆ†é…é—®é¢˜çš„ï¼Œæ ¸å¿ƒåŸç†æ˜¯å¯¹åˆ†é…ä¸€äº›è¿ç»­çš„å†…å­˜ç©ºé—´")]),a._v(" "),s("p",[a._v("6:å¡è¡¨-è¿™ä¸ªæŠ€æœ¯æ˜¯ç”¨äºè§£å†³å‡å°‘è€å¹´ä»£çš„å…¨å †ç©ºé—´æ‰«æ")]),a._v(" "),s("p",[a._v("ä½œè€…å›å¤: å¥½é•¿çš„æ€»ç»“ï¼Œèµä¸€ä¸ª")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("javaadu")]),a._v(" "),s("p",[a._v("2018-08-17")]),a._v(" "),s("p",[a._v("7")]),a._v(" "),s("p",[a._v("å†™å¾—çœŸå¥½ï¼Œææ¸…æ¥šäº†ä¹‹å‰æ²¡æŒæ¡é€å½»çš„æ¦‚å¿µï¼š\nï¼ˆ1ï¼‰TLABæ˜¯ä¸ºäº†é¿å…å¯¹è±¡åˆ†é…æ—¶å¯¹å†…å­˜çš„ç«äº‰\nï¼ˆ2ï¼‰å¡è¡¨æ˜¯ä¸ºäº†å¤„ç†minor gcæ—¶è€å¹´ä»£å¯¹æ–°ç”Ÿä»£çš„å¼•ç”¨ï¼Œä¸ºäº†é¿å…æ•´å †æ‰«æè€Œæå‡ºäº†å¡è¡¨çš„æ¦‚å¿µ")]),a._v(" "),s("p",[a._v("æä¸ªé—®é¢˜ï¼šJVMä¸­å †å†…å­˜æ ¹ç³»ç»Ÿçš„ç‰©ç†å†…å­˜æ˜¯å¦‚ä½•å¯¹åº”çš„ï¼Œè¿™ä¸ªå¯ä»¥ä»å“ªé‡Œçœ‹ï¼Ÿ")]),a._v(" "),s("p",[a._v("ä½œè€…å›å¤: æ ¹ç³»ç»ŸæŒ‡çš„æ˜¯ï¼Ÿ")]),a._v(" "),s("p",[a._v("GC rootsåˆ†å¸ƒåœ¨HotSpotä¸­çš„æ¯ä¸ªå­ç³»ç»Ÿé‡Œã€‚å¯ä»¥åœ¨æºç ä¸­æœoops_do")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("å…¬å­_å°ç™½")]),a._v(" "),s("p",[a._v("2018-08-23")]),a._v(" "),s("p",[a._v("4")]),a._v(" "),s("p",[a._v("è€å¸ˆæ‚¨å¥½\nè¯·é—®JVMåˆ†ä»£æ”¶é›†æ–°ç”Ÿä»£å¯¹è±¡è¿›å…¥è€å¹´ä»£ï¼Œå¹´é¾„ä¸ºä»€ä¹ˆæ˜¯15è€Œä¸æ˜¯å…¶ä»–çš„?\nè°¢è°¢")]),a._v(" "),s("p",[a._v("ä½œè€…å›å¤: HotSpotä¼šåœ¨å¯¹è±¡å¤´ä¸­çš„æ ‡è®°å­—æ®µé‡Œè®°å½•å¹´é¾„ï¼Œåˆ†é…åˆ°çš„ç©ºé—´åªæœ‰4ä½ï¼Œæœ€å¤šåªèƒ½è®°å½•åˆ°15")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("ç´ ä¸¶")]),a._v(" "),s("p",[a._v("2018-11-20")]),a._v(" "),s("p",[a._v("3")]),a._v(" "),s("p",[a._v("å¯ä»¥é…åˆRå¤§çš„æ–‡ç« \nhttp://rednaxelafx.iteye.com/blog/1042471\nhttp://rednaxelafx.iteye.com/blog/174865\nhttp://rednaxelafx.iteye.com/blog/1044951")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("herome")]),a._v(" "),s("p",[a._v("2018-08-19")]),a._v(" "),s("p",[a._v("3")]),a._v(" "),s("p",[a._v("è€å¸ˆ å»ºè®®æ˜¯èƒ½ç”»ç‚¹å›¾å— ğŸ˜‚  æ¯ä¸€ç¯‡éƒ½æ˜¯æ–‡å­—ã€‚ ç›¸ä¿¡ç”»äº†å›¾ ä¸ä»…èƒ½è®©æ–‡ç« é€šä¿—æ˜“æ‡‚ï¼Œä¹Ÿèƒ½è®©è€å¸ˆçš„æ–‡ç¬”æ›´å¥½ã€‚")]),a._v(" "),s("p",[a._v("ä½œè€…å›å¤: å¤šè°¢å»ºè®®ï¼")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("æ„¤æ€’çš„è™¾å¹²")]),a._v(" "),s("p",[a._v("2019-02-19")]),a._v(" "),s("p",[a._v("2")]),a._v(" "),s("p",[a._v("1ã€å½“é»˜è®¤å¼€å¯åŠ¨æ€åˆ†é…æ—¶ï¼Œè‹¥ALIVE_OBJECT_SIZEå°äº33Må‡ ä¹æ— FULL GCï¼Œå¤§äºåˆ™å‡ºç°FULL  GCã€‚åŠ¨æ€åˆ†é…æ—¶EdenåŒºå¤§å°ä¸èƒ½å°äºSurvivoråŒºï¼Œå³æœ€å°‘ä¸ºæ–°ç”Ÿä»£å†…å­˜çš„1/3ï¼Œå•ä¸ªSurvivoråŒºæœ€å¤§ä¸ºæ–°ç”Ÿä»£å†…å­˜çš„1/3ã€‚æ•…å½“ALIVE_OBJECT_SIZEå¤§äº33Mæ—¶ï¼ŒSurvivoråŒºå°äºALIVE_OBJECT_SIZEï¼Œå¯¼è‡´Minor GCæ—¶éœ€è¦å¤åˆ¶åˆ°toåŒºçš„æ•°æ®å¤§äºtoåŒºå®¹é‡ï¼Œä»è€Œä½¿å¾—ä¸€éƒ¨åˆ†æ•°æ®æå‰æ™‹å‡åˆ°è€å¹´åŒºï¼Œå¤šæ¬¡æå‰æ™‹å‡å¯¼è‡´è€å¹´åŒºæ— å¤šä½™ç©ºé—´ä»è€Œå¯¼è‡´Full  GCï¼›å½“ALIVE_OBJECT_SIZEå°äº33Mæ—¶ï¼ŒSurvivoråŒºå®¹é‡æ€»æ˜¯è¿‘ä¼¼çš„æ¥è¿‘ALIVE_OBJECT_SIZEå¤§å°ï¼Œä½¿å¾—æ¯æ¬¡Minor  GCæœ‰æ•ˆå¯¹è±¡éƒ½å¯ä»¥å¤åˆ¶åˆ°SurvivoråŒºï¼Œè€Œæ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¤§å¤šæ˜¯å¹´é¾„è¾¾åˆ°æ¬¡æ•°è¦æ±‚ï¼ŒçŸ­æœŸå†…ä¸ä¼šæŒ¤æ»¡è€å¹´ä»£ç©ºé—´ï¼Œåœ¨æœ‰é™æ—¶é—´å†…è¿è¡Œç»“æŸä¸ä¼šå¼•å‘Full GCã€‚\n2ã€å½“-XX:-UsePSAdaptiveSurvivorSizePolicy or  -XX:SurvivorRatio=Nå…³é—­åŠ¨æ€åˆ†é…æˆ–æŒ‡å®šEdenã€Survivoræ¯”ä¾‹æ—¶ï¼Œåªè¦ALIVE_OBJECT_SIZEå°äºSurvivorå®¹é‡ï¼Œæœ‰é™æ—¶é—´è¿è¡Œç»“æŸä¸ä¼šå¼•å‘Full GCã€‚åä¹‹ä¼šå¯¼è‡´Full GCã€‚\n@éƒ‘è€å¸ˆ æ˜¯å¦æ˜¯è¿™æ ·ï¼Ÿ")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("å…¬å­_å°ç™½")]),a._v(" "),s("p",[a._v("2018-08-24")]),a._v(" "),s("p",[a._v("2")]),a._v(" "),s("p",[a._v("å¤šè°¢è€å¸ˆçš„å›å¤")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("è¥¿å…¹å…¹")]),a._v(" "),s("p",[a._v("2019-01-19")]),a._v(" "),s("p",[a._v("1")]),a._v(" "),s("p",[a._v("è€å¸ˆå¥½ï¼Œè¯·é—®java8å¼€å§‹ä¹‹åçš„å…ƒæ•°æ®åŒºçš„å›æ”¶æ˜¯å¦‚ä½•å‘¢ï¼Ÿè¿™éƒ¨åˆ†å±äºå †å¤–å†…å­˜å—ï¼Ÿ")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("å¤šå·´èƒºè€é‚®...")]),a._v(" "),s("p",[a._v("2018-12-20")]),a._v(" "),s("p",[a._v("1")]),a._v(" "),s("p",[a._v("éƒ‘è€å¸ˆæ‚¨å¥½ ï¼ ä¸€ç›´æƒ³é—®é—®CMSæ”¶é›†å™¨ä¸­å¹¶å‘æ ‡è®°è¿™ä¸€ä¸ªæ­¥éª¤çš„ä½œç”¨æ˜¯ä»€ä¹ˆ ï¼Ÿ ä¸ºä»€ä¹ˆè¿˜è¦åœ¨åˆå§‹æ ‡è®°çš„åŸºç¡€ä¸Šå¤šè¿›è¡Œä¸€æ¬¡Roots Tracingå‘¢ï¼Ÿ å¸Œæœ›æ‚¨èƒ½æœ‰ç©ºèƒ½å¤Ÿå›å¤ä¸‹ thx")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("éª‘è½¦åƒç«é”…")]),a._v(" "),s("p",[a._v("2018-12-11")]),a._v(" "),s("p",[a._v("1")]),a._v(" "),s("p",[a._v("è¯·é—®è€å¸ˆï¼Œjavaç±»æ˜¯å¦‚ä½•è¢«å¸è½½çš„ï¼Ÿ")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("Leon Wong")]),a._v(" "),s("p",[a._v("2018-09-12")]),a._v(" "),s("p",[a._v("1")]),a._v(" "),s("p",[a._v("è€å¸ˆä½ å¥½ï¼Œå†™å±éšœä¸ä¼šåˆ¤æ–­å¼•ç”¨æ˜¯å¦æŒ‡å‘æ–°ç”Ÿä»£çš„å¯¹è±¡ï¼Œè¿™é‡Œä¼šä¸ä¼šæé«˜MinorGCçš„æˆæœ¬å‘¢ï¼Ÿ")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("code-arti...")]),a._v(" "),s("p",[a._v("2018-08-17")]),a._v(" "),s("p",[a._v("1")]),a._v(" "),s("p",[a._v("é€šè¿‡GC_rootsæ¢ç´¢å­˜æ´»å¯¹è±¡çš„æ—¶å€™ï¼Œæœ‰çš„å¯¹è±¡åœ¨æ–°ç”Ÿä»£ï¼Œæœ‰çš„å¯¹è±¡åœ¨è€å¹´ä»£ã€‚å¦‚æœå½“å‰å¯¹è±¡å¤„åœ¨è€å¹´ä»£è€Œä¸”åœ¨èµƒå¡ä¸­ï¼Œéœ€è¦ç»§ç»­æ·±åº¦éå†å¯¹è±¡ã€‚è‹¥ä¸åœ¨èµƒå¡ä¸­ï¼Œå°±æ²¡å¿…è¦è¿›ä¸€æ­¥æ·±åº¦éå†ä¸‹å»äº†ã€‚ä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸ï¼Ÿ")]),a._v(" "),s("p",[a._v("ä½œè€…å›å¤: å¯¹çš„ã€‚å¡è¡¨å°±æ˜¯ä¸ºäº†é¿å…æ¢ç´¢æ•´ä¸ªè€å¹´ä»£ï¼Œè€Œåªå°†è„è¡¨ä¸­çš„å¯¹è±¡ä½œä¸ºGC rootsã€‚")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("nero")]),a._v(" "),s("p",[a._v("2019-04-26")]),a._v(" "),s("p",[a._v("è¿™ä¹Ÿå¤ªç‹ äº†")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("Theodore")]),a._v(" "),s("p",[a._v("2019-04-04")]),a._v(" "),s("p",[a._v("è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æƒ³å’¨è¯¢ä¸€ä¸‹ï¼Œä½ æ˜¯å¦ç ”ç©¶è¿‡ç±»çš„GCã€‚\nåœ¨å¤§é‡åå°„ã€åŠ¨æ€ä»£ç†ï¼ŒCGLibç­‰Bytecodeæ¡†æ¶ã€åŠ¨æ€ç”Ÿæˆjsp ç­‰åŠ¨æ€ç±»å¯¹è±¡ï¼ˆéå®ä¾‹å¯¹è±¡ï¼‰åœ¨jdk1.8ä¸­æ˜¯å¦æ˜¯ä½¿ç”¨MethodHandleå®ç°çš„ï¼Ÿè¿™äº›åŠ¨æ€ç±»çš„GCç»†èŠ‚èƒ½ç»™æˆ‘æä¾›ç‚¹å­¦ä¹ èµ„æ–™å—ï¼Ÿ")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("Jadic")]),a._v(" "),s("p",[a._v("2019-03-22")]),a._v(" "),s("p",[a._v("hiï¼Œæƒ³äº†è§£ä¸‹ï¼Œå½“å‰çº¿ç¨‹åœ¨ç”³è¯·TLABçš„æ—¶å€™æ˜¯å¦‚ä½•å†³å®šæœ¬æ¬¡ç”³è¯·çš„ç©ºé—´å¤§å°çš„ï¼Œå¦‚ä½•å°½é‡ä¸æµªè´¹åˆå°‘ç”³è¯·æ¬¡æ•°ï¼Ÿè°¢è°¢ã€‚")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("XuYJ")]),a._v(" "),s("p",[a._v("2019-03-19")]),a._v(" "),s("p",[a._v("cmsä¸æ˜¯æ ‡è®°æ¸…é™¤å—")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("rakitten")]),a._v(" "),s("p",[a._v("2019-01-25")]),a._v(" "),s("p",[a._v("æœ‰ä¸¤ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸€ä¸‹éƒ‘è€å¸ˆï¼š\n1ã€ä»‹ç»GCçš„æ–‡æ¡£å¾ˆå¤šï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼šGCçš„ä»£ç å“ªé‡Œèƒ½çœ‹åˆ°ï¼Ÿ\n2ã€æˆ‘ä»¬çš„åå°æœåŠ¡ä¸€å¤©å†…å¶å°”å‡ºç°ä¸€æ¬¡YGCè€—æ—¶å¾ˆé•¿çš„æƒ…å†µï¼ˆè¶…è¿‡100msï¼Œæ­£å¸¸åªæœ‰20msï¼‰ï¼Œè€Œä¸”å¾ˆéš¾å¤ç°ã€‚æˆ‘åœ¨æƒ³ï¼Œèƒ½ä¸èƒ½åœ¨GCå‘ç”Ÿçš„æ—¶å€™ï¼Œè§¦å‘ä¸€ä¸ªLinuxè„šæœ¬ï¼Œè®°å½•ç°åœºçš„çº¿ç¨‹ä¿¡æ¯ä»¥åŠå †æ ˆä¿¡æ¯")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("å°æ³·å“¥")]),a._v(" "),s("p",[a._v("2018-12-23")]),a._v(" "),s("p",[a._v("å¯ä»¥è¿™ä¹ˆç†è§£å—ï¼š\n1ã€å¡è¡¨è®°å½•è€å¹´ä»£æ‰§è¡Œæ–°ç”Ÿä»£çš„å¼•ç”¨\n2ã€è€å¹´ä»£çš„å¼•ç”¨å˜æ›´éƒ½ä¼šè¢«å½“åšå †æ–°ç”Ÿä»£çš„å¼•ç”¨ï¼Œè®°å½•åœ¨å¡è¡¨ä¸­ã€‚\n3ã€åªéœ€è¦åœ¨è€å¹´ä»£GCçš„æ—¶å€™ï¼Œæ‰§è¡Œä¸€æ¬¡minor GCå°±è¡Œäº†ï¼Œæ¸…ç†card table(åŒ…æ‹¬CMSå’ŒG1)ã€‚")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("life is ...")]),a._v(" "),s("p",[a._v("2018-11-14")]),a._v(" "),s("p",[a._v("è®°è½½æ¥è‡ªä¸€ä¸ªåˆšåˆšè¿ˆè¿›ç¨‹åºä¸–ç•Œçš„coder")]),a._v(" "),s("p",[a._v("javaå¯¹è±¡çš„ç”Ÿå­˜å‘¨æœŸ")]),a._v(" "),s("p",[a._v("å¤§éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­ï¼Œå°éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿ã€‚")]),a._v(" "),s("p",[a._v("å› ä¸ºè¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥å¯¹jvmå†…å­˜åˆ†ä»£ï¼Œä¸åŒä»£é‡‡ç”¨ä¸åŒçš„å›æ”¶æ–¹å¼ã€‚")]),a._v(" "),s("p",[a._v("å¹´è½»ä»£è¦é‡‡ç”¨é¢‘ç¹çš„å›æ”¶æ–¹å¼ï¼Œå¿«é€Ÿå›æ”¶å¤§éƒ¨åˆ†åƒåœ¾ã€‚è€å¹´ä»£åˆ™é‡‡ç”¨ä¸é¢‘ç¹ä½†å½»åº•çš„å›æ”¶æ–¹å¼ã€‚")]),a._v(" "),s("p",[a._v("JVMå †çš„åˆ’åˆ†")]),a._v(" "),s("p",[a._v("å› ä¸ºå¯¹è±¡ä»¥ä¸Šçš„ç‰¹ç‚¹ï¼Œå°†å †åˆ†ä¸ºä¸¤ä¸ªä»£ï¼Œè€å¹´ä»£å’Œæ–°ç”Ÿä»£ã€‚æ–°ç”Ÿä»£åˆ†ä¸ºEdenå’Œä¸¤ä¸ªSurvivoråŒºã€‚å¯ä»¥ä½¿ç”¨å‚æ•°  â€œâ€ï¼Œä¼šåŠ¨æ€çš„æ ¹æ®å¯¹è±¡çš„ç”Ÿæˆé€Ÿç‡ä»¥åŠsurvivoråŒºçš„ä½¿ç”¨æƒ…å†µï¼Œè°ƒæ•´EdenåŒºå’ŒsurvivoråŒºçš„æ¯”ä¾‹ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•°â€œâ€ï¼Œæ¥å›ºå®šEdenå’Œsurvivorçš„æ¯”ä¾‹ã€‚")]),a._v(" "),s("p",[a._v("å¦‚ä½•ä¿è¯å†…å­˜åˆ†é…çš„çº¿ç¨‹å®‰å…¨")]),a._v(" "),s("p",[a._v("å †æ˜¯å…±äº«çš„ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šåœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œé‚£ä¹ˆjvmæ˜¯å¦‚ä½•ä¿è¯å†…å­˜åˆ†é…æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰TLAB(thread local allocation  buffer)ï¼Œè¿™ä¸ªæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚é¦–å…ˆä¼šåœ¨TLABä¸Šåˆ†é…ï¼Œå¦‚æœTLABä¸å¤Ÿç”¨ï¼Œå°±éœ€è¦é€šè¿‡åŠ é”çš„æ–¹å¼ï¼Œç”³è¯·TLABã€‚")]),a._v(" "),s("p",[a._v("EdenåŒºæ»¡äº†")]),a._v(" "),s("p",[a._v("è§¦å‘minor GCï¼Œedenå’Œfromä¾æ—§å­˜æ´»çš„å¯¹è±¡ä¼šæ”¾ç½®åˆ°toåŒºã€‚ç„¶åäº¤æ¢from  toæŒ‡é’ˆçš„æŒ‡å‘ã€‚å…¶ä¸­è¾¾åˆ°ç»å†è¿‡ä¸€å®šå›æ”¶æ¬¡æ•°çš„å¯¹è±¡å°†ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ï¼Œå¯¹åº”JVMå‚æ•°[]ã€‚åŒæ—¶å¦‚æœä¹Ÿé…ç½®äº†[]å‚æ•°ï¼Œå•ä¸ªsurvivoråŒºå ç”¨è¶…è¿‡50%ï¼Œç»å†æ¬¡æ•°è¾ƒé«˜çš„å¯¹è±¡ä¹Ÿä¼šæ™‹å‡åˆ°è€å¹´ä»£ã€‚")]),a._v(" "),s("p",[a._v("å…ˆæå‰è¯´ä¸€ä¸ªç»“è®ºï¼Œminor GCæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå‘ç”ŸGCæ—¶ä¸ä¼šéå†å †å†…å­˜ï¼Œåªä¼šéå†Eden+survivoråŒºï¼è®²é“ç†ï¼Œè€å¹´ä»£å¾ˆå¯èƒ½æ‹¥æœ‰Eden+survivoråŒºå¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£minor GCåªéå†å¹´è½»ä»£ï¼Œæ˜¯æ€ä¹ˆåšåˆ°GCçš„å‘¢ï¼Ÿ")]),a._v(" "),s("p",[a._v("å¡è¡¨")]),a._v(" "),s("p",[a._v("HotSpotä¼šå°†å †åˆ†å‰²æˆä¸€ä¸ªä¸ª512å­—èŠ‚å¤§å°çš„å¡ï¼Œç„¶åç»´æŠ¤ä¸€å¼ å¡è¡¨ï¼Œæ¯ä¸ªå¡åœ¨è¡¨ä¸­å æ®ä¸€ä¸ªå¡ä½ã€‚")]),a._v(" "),s("ul",[s("li")]),a._v(" "),s("p",[a._v("QlDoors")]),a._v(" "),s("p",[a._v("2018-11-12")]),a._v(" "),s("p",[a._v("< 1/2 Suvivors æ—¶ï¼Œä¸ä¼šå‘ç”ŸFull GC")])])}),[],!1,null,null,null);s.default=r.exports}}]);