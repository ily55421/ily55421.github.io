(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{686:function(e,a,s){"use strict";s.r(a);var t=s(0),n=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"_31-javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·-guiç¯‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_31-javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·-guiç¯‡"}},[e._v("#")]),e._v(" 31 | Javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·ï¼ˆGUIç¯‡ï¼‰")]),e._v(" "),a("p",[e._v("ä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­äº†è§£ Java è™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·ã€‚")]),e._v(" "),a("h2",{attrs:{id:"eclipse-mat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eclipse-mat"}},[e._v("#")]),e._v(" eclipse MAT")]),e._v(" "),a("p",[e._v("åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»‹ç»äº†"),a("code",[e._v("jmap")]),e._v("å·¥å…·ï¼Œå®ƒæ”¯æŒå¯¼å‡º Java è™šæ‹Ÿæœºå †çš„äºŒè¿›åˆ¶å¿«ç…§ã€‚eclipse çš„"),a("a",{attrs:{href:"https://www.eclipse.org/mat/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MAT å·¥å…·"),a("OutboundLink")],1),e._v("ä¾¿æ˜¯å…¶ä¸­ä¸€ä¸ªèƒ½å¤Ÿè§£æè¿™ç±»äºŒè¿›åˆ¶å¿«ç…§çš„å·¥å…·ã€‚")]),e._v(" "),a("p",[e._v("MAT æœ¬èº«ä¹Ÿèƒ½å¤Ÿè·å–å †çš„äºŒè¿›åˆ¶å¿«ç…§ã€‚è¯¥åŠŸèƒ½å°†å€ŸåŠ©"),a("code",[e._v("jps")]),e._v("åˆ—å‡ºå½“å‰æ­£åœ¨è¿è¡Œçš„ Java è¿›ç¨‹ï¼Œä»¥ä¾›é€‰æ‹©å¹¶è·å–å¿«ç…§ã€‚ç”±äº"),a("code",[e._v("jps")]),e._v("ä¼šå°†è‡ªå·±åˆ—å…¥å…¶ä¸­ï¼Œå› æ­¤ä½ ä¼šåœ¨åˆ—è¡¨ä¸­å‘ç°ä¸€ä¸ªå·²ç»ç»“æŸè¿è¡Œçš„"),a("code",[e._v("jps")]),e._v("è¿›ç¨‹ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145630552-a3d2fc.png",alt:"image-20220531145630552"}})]),e._v(" "),a("p",[e._v("MAT è·å–äºŒè¿›åˆ¶å¿«ç…§çš„æ–¹å¼æœ‰ä¸‰ç§ï¼Œä¸€æ˜¯ä½¿ç”¨ Attach APIï¼ŒäºŒæ˜¯æ–°å»ºä¸€ä¸ª Java è™šæ‹Ÿæœºæ¥è¿è¡Œ Attach APIï¼Œä¸‰æ˜¯ä½¿ç”¨"),a("code",[e._v("jmap")]),e._v("å·¥å…·ã€‚")]),e._v(" "),a("p",[e._v("è¿™ä¸‰ç§æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨ä½¿ç”¨ Attach APIã€‚ä¸è¿‡ï¼Œåœ¨ç›®æ ‡è¿›ç¨‹å¯ç”¨äº†"),a("code",[e._v("DisableAttachMechanism")]),e._v("å‚æ•°æ—¶ï¼Œå‰ä¸¤è€…å°†ä¸åœ¨é€‰å–åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼Œåè€…å°†åœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚")]),e._v(" "),a("p",[e._v("å½“åŠ è½½å®Œå †å¿«ç…§ä¹‹åï¼ŒMAT çš„ä¸»ç•Œé¢å°†å±•ç¤ºä¸€å¼ é¥¼çŠ¶å›¾ï¼Œå…¶ä¸­åˆ—ä¸¾å æ®çš„ Retained heap æœ€å¤šçš„å‡ ä¸ªå¯¹è±¡ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145638453-df2eed.png",alt:"image-20220531145638453"}})]),e._v(" "),a("p",[e._v("è¿™é‡Œè®²ä¸€ä¸‹ MAT è®¡ç®—å¯¹è±¡å æ®å†…å­˜çš„"),a("a",{attrs:{href:"https://help.eclipse.org/mars/topic/org.eclipse.mat.ui.help/concepts/shallowretainedheap.html?cp=46_2_1",target:"_blank",rel:"noopener noreferrer"}},[e._v("ä¸¤ç§æ–¹å¼"),a("OutboundLink")],1),e._v("ã€‚ç¬¬ä¸€ç§æ˜¯ Shallow heapï¼ŒæŒ‡çš„æ˜¯å¯¹è±¡è‡ªèº«æ‰€å æ®çš„å†…å­˜ã€‚ç¬¬äºŒç§æ˜¯ Retained  heapï¼ŒæŒ‡çš„æ˜¯å½“å¯¹è±¡ä¸å†è¢«å¼•ç”¨æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨æ‰€èƒ½å›æ”¶çš„æ€»å†…å­˜ï¼ŒåŒ…æ‹¬å¯¹è±¡è‡ªèº«æ‰€å æ®çš„å†…å­˜ï¼Œä»¥åŠä»…èƒ½å¤Ÿé€šè¿‡è¯¥å¯¹è±¡å¼•ç”¨åˆ°çš„å…¶ä»–å¯¹è±¡æ‰€å æ®çš„å†…å­˜ã€‚ä¸Šé¢çš„é¥¼çŠ¶å›¾ä¾¿æ˜¯åŸºäº Retained heap çš„ã€‚")]),e._v(" "),a("p",[e._v("MAT åŒ…æ‹¬äº†ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„è§†å›¾ï¼Œåˆ†åˆ«æ˜¯ç›´æ–¹å›¾ï¼ˆhistogramï¼‰å’Œæ”¯é…æ ‘ï¼ˆdominator treeï¼‰ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145649922-efceb2.png",alt:"image-20220531145649922"}})]),e._v(" "),a("p",[e._v("MAT çš„ç›´æ–¹å›¾å’Œ"),a("code",[e._v("jmap")]),e._v("çš„"),a("code",[e._v("-histo")]),e._v("å­å‘½ä»¤ä¸€æ ·ï¼Œéƒ½èƒ½å¤Ÿå±•ç¤ºå„ä¸ªç±»çš„å®ä¾‹æ•°ç›®ä»¥åŠè¿™äº›å®ä¾‹çš„ Shallow heap æ€»å’Œã€‚ä½†æ˜¯ï¼ŒMAT çš„ç›´æ–¹å›¾è¿˜èƒ½å¤Ÿè®¡ç®— Retained heapï¼Œå¹¶æ”¯æŒåŸºäºå®ä¾‹æ•°ç›®æˆ– Retained heap çš„æ’åºæ–¹å¼ï¼ˆé»˜è®¤ä¸º Shallow heapï¼‰ã€‚æ­¤å¤–ï¼ŒMAT è¿˜å¯ä»¥å°†ç›´æ–¹å›¾ä¸­çš„ç±»æŒ‰ç…§è¶…ç±»ã€ç±»åŠ è½½å™¨æˆ–è€…åŒ…ååˆ†ç»„ã€‚")]),e._v(" "),a("p",[e._v("å½“é€‰ä¸­æŸä¸ªç±»æ—¶ï¼ŒMAT ç•Œé¢å·¦ä¸Šè§’çš„ Inspector çª—å£å°†å±•ç¤ºè¯¥ç±»çš„ Class å®ä¾‹çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç±»åŠ è½½å™¨ç­‰ã€‚ï¼ˆä¸‹å›¾ä¸­çš„"),a("code",[e._v("ClassLoader @ 0x0")]),e._v("æŒ‡çš„ä¾¿æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ã€‚ï¼‰")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145656657-6bac6e.png",alt:"image-20220531145656657"}})]),e._v(" "),a("p",[e._v("æ”¯é…æ ‘çš„æ¦‚å¿µæºè‡ªå›¾è®ºã€‚åœ¨ä¸€åˆ™æµå›¾ï¼ˆflow diagramï¼‰ä¸­ï¼Œå¦‚æœä»å…¥å£èŠ‚ç‚¹åˆ° b èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„éƒ½è¦ç»è¿‡ a èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ a æ”¯é…ï¼ˆdominateï¼‰bã€‚")]),e._v(" "),a("p",[e._v("åœ¨ a æ”¯é… bï¼Œä¸” a ä¸åŒäº b çš„æƒ…å†µä¸‹ï¼ˆå³ a ä¸¥æ ¼æ”¯é… bï¼‰ï¼Œå¦‚æœä» a èŠ‚ç‚¹åˆ° b èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸­ä¸å­˜åœ¨æ”¯é… b  çš„å…¶ä»–èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ a ç›´æ¥æ”¯é…ï¼ˆimmediate dominateï¼‰bã€‚è¿™é‡Œçš„æ”¯é…æ ‘æŒ‡çš„ä¾¿æ˜¯ç”±èŠ‚ç‚¹çš„ç›´æ¥æ”¯é…èŠ‚ç‚¹æ‰€ç»„æˆçš„æ ‘çŠ¶ç»“æ„ã€‚")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬å¯ä»¥å°†å †ä¸­æ‰€æœ‰çš„å¯¹è±¡çœ‹æˆä¸€å¼ å¯¹è±¡å›¾ï¼Œæ¯ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªå›¾èŠ‚ç‚¹ï¼Œè€Œ GC Roots åˆ™æ˜¯å¯¹è±¡å›¾çš„å…¥å£ï¼Œå¯¹è±¡ä¹‹é—´çš„å¼•ç”¨å…³ç³»åˆ™æ„æˆäº†å¯¹è±¡å›¾ä¸­çš„æœ‰å‘è¾¹ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¾¿èƒ½å¤Ÿæ„é€ å‡ºè¯¥å¯¹è±¡å›¾æ‰€å¯¹åº”çš„æ”¯é…æ ‘ã€‚")]),e._v(" "),a("p",[e._v("MAT å°†æŒ‰ç…§æ¯ä¸ªå¯¹è±¡ Retained heap çš„å¤§å°æ’åˆ—è¯¥æ”¯é…æ ‘ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145703425-0e4549.png",alt:"image-20220531145703425"}})]),e._v(" "),a("p",[e._v("æ ¹æ® Retained heap çš„å®šä¹‰ï¼Œåªè¦èƒ½å¤Ÿå›æ”¶ä¸Šå›¾å³ä¾§çš„è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶å™¨ä¾¿èƒ½å¤Ÿé‡Šæ”¾å‡º 13.6MB å†…å­˜ã€‚")]),e._v(" "),a("p",[e._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡çš„å¼•ç”¨å‹å­—æ®µæœªå¿…å¯¹åº”æ”¯é…æ ‘ä¸­çš„çˆ¶å­èŠ‚ç‚¹å…³ç³»ã€‚å‡è®¾å¯¹è±¡ a æ‹¥æœ‰ä¸¤ä¸ªå¼•ç”¨å‹å­—æ®µï¼Œåˆ†åˆ«æŒ‡å‘ b å’Œ cã€‚è€Œ b å’Œ c  å„è‡ªæ‹¥æœ‰ä¸€ä¸ªå¼•ç”¨å‹å­—æ®µï¼Œä½†éƒ½æŒ‡å‘ dã€‚å¦‚æœæ²¡æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘ bã€c æˆ– dï¼Œé‚£ä¹ˆ a ç›´æ¥æ”¯é… bã€c å’Œ dï¼Œè€Œ bï¼ˆæˆ– cï¼‰å’Œ d  ä¹‹é—´ä¸å­˜åœ¨æ”¯é…å…³ç³»ã€‚")]),e._v(" "),a("p",[e._v("å½“åœ¨æ”¯é…æ ‘è§†å›¾ä¸­é€‰ä¸­æŸä¸€å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ Path To GC Roots åŠŸèƒ½ï¼Œåå‘åˆ—å‡ºè¯¥å¯¹è±¡åˆ° GC Roots çš„å¼•ç”¨è·¯å¾„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145710066-26c948.png",alt:"image-20220531145710066"}})]),e._v(" "),a("p",[e._v("MAT è¿˜å°†è‡ªåŠ¨åŒ¹é…å†…å­˜æ³„æ¼ä¸­çš„å¸¸è§æ¨¡å¼ï¼Œå¹¶æ±‡æŠ¥æ½œåœ¨çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚å…·ä½“å¯å‚è€ƒè¯¥"),a("a",{attrs:{href:"https://help.eclipse.org/mars/topic/org.eclipse.mat.ui.help/tasks/runningleaksuspectreport.html?cp=46_3_1",target:"_blank",rel:"noopener noreferrer"}},[e._v("å¸®åŠ©æ–‡æ¡£"),a("OutboundLink")],1),e._v("ä»¥åŠ"),a("a",{attrs:{href:"http://memoryanalyzer.blogspot.com/2008/05/automated-heap-dump-analysis-finding.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¿™ç¯‡åšå®¢"),a("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),a("h2",{attrs:{id:"java-mission-control"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-mission-control"}},[e._v("#")]),e._v(" Java Mission Control")]),e._v(" "),a("blockquote",[a("p",[e._v("æ³¨æ„ï¼šè‡ª Java 11 å¼€å§‹ï¼Œæœ¬èŠ‚ä»‹ç»çš„ JFR å·²ç»å¼€æºã€‚ä½†åœ¨ä¹‹å‰çš„ Java ç‰ˆæœ¬ï¼ŒJFR å±äº Commercial Featureï¼Œéœ€è¦é€šè¿‡ Java è™šæ‹Ÿæœºå‚æ•°"),a("code",[e._v("-XX:+UnlockCommercialFeatures")]),e._v("å¼€å¯ã€‚")]),e._v(" "),a("p",[e._v("æˆ‘ä¸ªäººä¸æ¸…æ¥šä¹Ÿä¸èƒ½å›ç­”å…³äº Java 11 ä¹‹å‰çš„ç‰ˆæœ¬æ˜¯å¦ä»éœ€è¦å•†åŠ¡è®¸å¯ï¼ˆCommercial Licenseï¼‰çš„é—®é¢˜ã€‚è¯·å¦è¡Œå’¨è¯¢åå†ä½¿ç”¨ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ Java 11ã€‚")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://jdk.java.net/jmc/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java Mission Control"),a("OutboundLink")],1),e._v("ï¼ˆJMCï¼‰æ˜¯ Java è™šæ‹Ÿæœºå¹³å°ä¸Šçš„æ€§èƒ½ç›‘æ§å·¥å…·ã€‚å®ƒåŒ…å«ä¸€ä¸ª GUI å®¢æˆ·ç«¯ï¼Œä»¥åŠä¼—å¤šç”¨æ¥æ”¶é›† Java è™šæ‹Ÿæœºæ€§èƒ½æ•°æ®çš„æ’ä»¶ï¼Œå¦‚ JMX Consoleï¼ˆèƒ½å¤Ÿè®¿é—®ç”¨æ¥å­˜æ”¾è™šæ‹Ÿæœºå„ä¸ªå­ç³»ç»Ÿè¿è¡Œæ•°æ®çš„"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Java_Management_Extensions#Managed_beans",target:"_blank",rel:"noopener noreferrer"}},[e._v("MXBeans"),a("OutboundLink")],1),e._v("ï¼‰ï¼Œä»¥åŠè™šæ‹Ÿæœºå†…ç½®çš„é«˜æ•ˆ profiling å·¥å…· Java Flight Recorderï¼ˆJFRï¼‰ã€‚")])]),e._v(" "),a("p",[e._v("JFR çš„æ€§èƒ½å¼€é”€å¾ˆå°ï¼Œåœ¨é»˜è®¤é…ç½®ä¸‹å¹³å‡ä½äº 1%ã€‚ä¸å…¶ä»–å·¥å…·ç›¸æ¯”ï¼ŒJFR èƒ½å¤Ÿç›´æ¥è®¿é—®è™šæ‹Ÿæœºå†…çš„æ•°æ®ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“è™šæ‹Ÿæœºçš„ä¼˜åŒ–ã€‚å› æ­¤ï¼Œå®ƒéå¸¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒä¸‹æ»¡è´Ÿè·è¿è¡Œçš„ Java ç¨‹åºã€‚")]),e._v(" "),a("p",[e._v("å½“å¯ç”¨æ—¶ï¼ŒJFR å°†è®°å½•è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ã€‚å…¶ä¸­åŒ…æ‹¬ Java å±‚é¢çš„äº‹ä»¶ï¼Œå¦‚çº¿ç¨‹äº‹ä»¶ã€é”äº‹ä»¶ï¼Œä»¥åŠ Java è™šæ‹Ÿæœºå†…éƒ¨çš„äº‹ä»¶ï¼Œå¦‚æ–°å»ºå¯¹è±¡ã€åƒåœ¾å›æ”¶å’Œå³æ—¶ç¼–è¯‘äº‹ä»¶ã€‚")]),e._v(" "),a("p",[e._v("æŒ‰ç…§å‘ç”Ÿæ—¶æœºä»¥åŠæŒç»­æ—¶é—´æ¥åˆ’åˆ†ï¼ŒJFR çš„äº‹ä»¶å…±æœ‰å››ç§ç±»å‹ï¼Œå®ƒä»¬åˆ†åˆ«ä¸ºä»¥ä¸‹å››ç§ã€‚")]),e._v(" "),a("ol",[a("li",[e._v("ç¬æ—¶äº‹ä»¶ï¼ˆInstant Eventï¼‰ï¼Œç”¨æˆ·å…³å¿ƒçš„æ˜¯å®ƒä»¬å‘ç”Ÿä¸å¦ï¼Œä¾‹å¦‚å¼‚å¸¸ã€çº¿ç¨‹å¯åŠ¨äº‹ä»¶ã€‚")]),e._v(" "),a("li",[e._v("æŒç»­äº‹ä»¶ï¼ˆDuration Eventï¼‰ï¼Œç”¨æˆ·å…³å¿ƒçš„æ˜¯å®ƒä»¬çš„æŒç»­æ—¶é—´ï¼Œä¾‹å¦‚åƒåœ¾å›æ”¶äº‹ä»¶ã€‚")]),e._v(" "),a("li",[e._v("è®¡æ—¶äº‹ä»¶ï¼ˆTimed Eventï¼‰ï¼Œæ˜¯æ—¶é•¿è¶…å‡ºæŒ‡å®šé˜ˆå€¼çš„æŒç»­äº‹ä»¶ã€‚")]),e._v(" "),a("li",[e._v("å–æ ·äº‹ä»¶ï¼ˆSample Eventï¼‰ï¼Œæ˜¯å‘¨æœŸæ€§å–æ ·çš„äº‹ä»¶ã€‚\nå–æ ·äº‹ä»¶çš„å…¶ä¸­ä¸€ä¸ªå¸¸è§ä¾‹å­ä¾¿æ˜¯æ–¹æ³•æŠ½æ ·ï¼ˆMethod Samplingï¼‰ï¼Œå³æ¯éš”ä¸€æ®µæ—¶é—´ç»Ÿè®¡å„ä¸ªçº¿ç¨‹çš„æ ˆè½¨è¿¹ã€‚å¦‚æœåœ¨è¿™äº›æŠ½æ ·å–å¾—çš„æ ˆè½¨è¿¹ä¸­å­˜åœ¨ä¸€ä¸ªåå¤å‡ºç°çš„æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ¨æµ‹è¯¥æ–¹æ³•æ˜¯çƒ­ç‚¹æ–¹æ³•ã€‚")])]),e._v(" "),a("p",[e._v("JFR çš„å–æ ·äº‹ä»¶è¦æ¯”å…¶ä»–å·¥å…·æ›´åŠ ç²¾ç¡®ã€‚ä»¥æ–¹æ³•æŠ½æ ·ä¸ºä¾‹ï¼Œå…¶ä»–å·¥å…·é€šå¸¸åŸºäº JVMTIï¼ˆ"),a("a",{attrs:{href:"https://docs.oracle.com/en/java/javase/11/docs/specs/jvmti.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java Virtual Machine Tool Interface"),a("OutboundLink")],1),e._v("ï¼‰çš„"),a("code",[e._v("GetAllStackTraces")]),e._v(" APIã€‚è¯¥ API ä¾èµ–äºå®‰å…¨ç‚¹æœºåˆ¶ï¼Œå…¶è·å¾—çš„æ ˆè½¨è¿¹æ€»æ˜¯åœ¨å®‰å…¨ç‚¹ä¸Šï¼Œç”±æ­¤å¾—å‡ºçš„ç»“è®ºæœªå¿…ç²¾ç¡®ã€‚JFR åˆ™ä¸ç„¶ï¼Œå®ƒä¸ä¾èµ–äºå®‰å…¨ç‚¹æœºåˆ¶ï¼Œå› æ­¤å…¶ç»“æœç›¸å¯¹æ¥è¯´æ›´åŠ ç²¾ç¡®ã€‚")]),e._v(" "),a("p",[e._v("JFR çš„å¯ç”¨æ–¹å¼ä¸»è¦æœ‰ä¸‰ç§ã€‚")]),e._v(" "),a("p",[e._v("ç¬¬ä¸€ç§æ˜¯åœ¨è¿è¡Œç›®æ ‡ Java ç¨‹åºæ—¶æ·»åŠ "),a("code",[e._v("-XX:StartFlightRecording=")]),e._v("å‚æ•°ã€‚å…³äºè¯¥å‚æ•°çš„é…ç½®è¯¦æƒ…ï¼Œä½ å¯ä»¥å‚è€ƒ"),a("a",{attrs:{href:"https://docs.oracle.com/en/java/javase/11/tools/java.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¯¥å¸®åŠ©æ–‡æ¡£"),a("OutboundLink")],1),e._v("ï¼ˆè¯·åœ¨é¡µé¢ä¸­æœç´¢"),a("code",[e._v("StartFlightRecording")]),e._v("ï¼‰ã€‚")]),e._v(" "),a("p",[e._v("ä¸‹é¢æˆ‘åˆ—ä¸¾ä¸‰ç§å¸¸è§çš„é…ç½®æ–¹å¼ã€‚")]),e._v(" "),a("ul",[a("li",[e._v("åœ¨ä¸‹é¢è¿™æ¡å‘½ä»¤ä¸­ï¼ŒJFR å°†ä¼šåœ¨ Java è™šæ‹Ÿæœºå¯åŠ¨ 5s åï¼ˆå¯¹åº”"),a("code",[e._v("delay=5s")]),e._v("ï¼‰æ”¶é›†æ•°æ®ï¼ŒæŒç»­ 20sï¼ˆå¯¹åº”"),a("code",[e._v("duration=20s")]),e._v("ï¼‰ã€‚å½“æ”¶é›†å®Œæ¯•åï¼ŒJFR ä¼šå°†æ”¶é›†å¾—åˆ°çš„æ•°æ®ä¿å­˜è‡³æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼ˆå¯¹åº”"),a("code",[e._v("filename=myrecording.jfr")]),e._v("ï¼‰ã€‚")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\n# Time fixed\n\n$ java -XX:StartFlightRecording=delay=5s,duration=20s,filename=myrecording.jfr,settings=profile MyApp\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("blockquote",[a("p",[a("code",[e._v("settings=profile")]),e._v("æŒ‡å®šäº† JFR æ‰€æ”¶é›†çš„äº‹ä»¶ç±»å‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒJFR å°†åŠ è½½é…ç½®æ–‡ä»¶"),a("code",[e._v("$JDK/lib/jfr/default.jfc")]),e._v("ï¼Œå¹¶è¯†åˆ«å…¶ä¸­æ‰€åŒ…å«çš„äº‹ä»¶ç±»å‹ã€‚å½“ä½¿ç”¨äº†"),a("code",[e._v("settings=profile")]),e._v("é…ç½®æ—¶ï¼ŒJFR å°†åŠ è½½é…ç½®æ–‡ä»¶"),a("code",[e._v("$JDK/lib/jfr/profile.jfc")]),e._v("ã€‚è¯¥é…ç½®æ–‡ä»¶æ‰€åŒ…å«çš„äº‹ä»¶ç±»å‹è¦å¤šäºé»˜è®¤çš„"),a("code",[e._v("default.jfc")]),e._v("ï¼Œå› æ­¤æ€§èƒ½å¼€é”€ä¹Ÿè¦å¤§ä¸€äº›ï¼ˆçº¦ä¸º 2%ï¼‰ã€‚")]),e._v(" "),a("p",[a("code",[e._v("default.jfc")]),e._v("ä»¥åŠ"),a("code",[e._v("profile.jfc")]),e._v("å‡ä¸º XML æ–‡ä»¶ã€‚åé¢æˆ‘ä¼šä»‹ç»å¦‚ä½•åˆ©ç”¨ JMC æ¥è¿›è¡Œä¿®æ”¹ã€‚")])]),e._v(" "),a("ul",[a("li",[e._v("åœ¨ä¸‹é¢è¿™æ¡å‘½ä»¤ä¸­ï¼ŒJFR å°†åœ¨ Java è™šæ‹Ÿæœºå¯åŠ¨ä¹‹åæŒç»­æ”¶é›†æ•°æ®ï¼Œç›´è‡³è¿›ç¨‹é€€å‡ºã€‚åœ¨è¿›ç¨‹é€€å‡ºæ—¶ï¼ˆå¯¹åº”"),a("code",[e._v("dumponexit=true")]),e._v("ï¼‰ï¼ŒJFR ä¼šå°†æ”¶é›†å¾—åˆ°çš„æ•°æ®ä¿å­˜è‡³æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\n# Continuous, dump on exit\n\n$ java -XX:StartFlightRecording=dumponexit=true,filename=myrecording.jfr MyApp\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("ul",[a("li",[e._v("åœ¨ä¸‹é¢è¿™æ¡å‘½ä»¤ä¸­ï¼ŒJFR å°†åœ¨ Java è™šæ‹Ÿæœºå¯åŠ¨ä¹‹åæŒç»­æ”¶é›†æ•°æ®ï¼Œç›´è‡³è¿›ç¨‹é€€å‡ºã€‚è¯¥å‘½ä»¤ä¸ä¼šä¸»åŠ¨ä¿å­˜ JFR æ”¶é›†å¾—åˆ°çš„æ•°æ®ã€‚")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\n# Continuous, dump on demand\n\n$ java -XX:StartFlightRecording=maxage=10m,maxsize=100m,name=SomeLabel MyApp\n\nStarted recording 1.\n\n \n\nUse jcmd 38502 JFR.dump name=SomeLabel filename=FILEPATH to copy recording data to file.\n\n...\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("p",[e._v("ç”±äº JFR å°†æŒç»­æ”¶é›†æ•°æ®ï¼Œå¦‚æœä¸åŠ ä»¥é™åˆ¶ï¼Œé‚£ä¹ˆ JFR å¯èƒ½ä¼šå¡«æ»¡ç¡¬ç›˜çš„æ‰€æœ‰ç©ºé—´ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å¯¹è¿™ç§æ¨¡å¼ä¸‹æ‰€æ”¶é›†çš„æ•°æ®è¿›è¡Œé™åˆ¶ã€‚")]),e._v(" "),a("p",[e._v("åœ¨è¿™æ¡å‘½ä»¤ä¸­ï¼Œ"),a("code",[e._v("maxage=10m")]),e._v("æŒ‡çš„æ˜¯ä»…ä¿ç•™ 10 åˆ†é’Ÿä»¥å†…çš„äº‹ä»¶ï¼Œ"),a("code",[e._v("maxsize=100m")]),e._v("æŒ‡çš„æ˜¯ä»…ä¿ç•™ 100MB ä»¥å†…çš„äº‹ä»¶ã€‚ä¸€æ—¦æ‰€æ”¶é›†çš„äº‹ä»¶è¾¾åˆ°å…¶ä¸­ä»»æ„ä¸€ä¸ªé™åˆ¶ï¼ŒJFR ä¾¿ä¼šå¼€å§‹æ¸…é™¤ä¸åˆè§„æ ¼çš„äº‹ä»¶ã€‚")]),e._v(" "),a("p",[e._v("ç„¶è€Œï¼Œä¸ºäº†ä¿æŒè¾ƒå°çš„æ€§èƒ½å¼€é”€ï¼ŒJFR å¹¶ä¸ä¼šé¢‘ç¹åœ°æ ¡éªŒè¿™ä¸¤ä¸ªé™åˆ¶ã€‚å› æ­¤ï¼Œåœ¨å®è·µè¿‡ç¨‹ä¸­ä½ å¾€å¾€ä¼šå‘ç°æŒ‡å®šæ–‡ä»¶çš„å¤§å°è¶…å‡ºé™åˆ¶ï¼Œæˆ–è€…æ–‡ä»¶ä¸­æ‰€å­˜å‚¨äº‹ä»¶çš„æ—¶é—´è¶…å‡ºé™åˆ¶ã€‚å…·ä½“è§£é‡Šè¯·å‚è€ƒ"),a("a",{attrs:{href:"https://community.oracle.com/thread/3514679",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¿™ç¯‡å¸–å­"),a("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),a("p",[e._v("å‰é¢æåˆ°ï¼Œè¯¥å‘½ä»¤ä¸ä¼šä¸»åŠ¨ä¿å­˜ JFR æ”¶é›†å¾—åˆ°çš„æ•°æ®ã€‚ç”¨æˆ·éœ€è¦è¿è¡Œ"),a("code",[e._v("jcmd <PID> JFR.dump")]),e._v("å‘½ä»¤æ–¹èƒ½ä¿å­˜ã€‚")]),e._v(" "),a("p",[e._v("è¿™ä¾¿æ˜¯ JFR çš„ç¬¬äºŒç§å¯ç”¨æ–¹å¼ï¼Œå³é€šè¿‡"),a("code",[e._v("jcmd")]),e._v("æ¥è®© JFR å¼€å§‹æ”¶é›†æ•°æ®ã€åœæ­¢æ”¶é›†æ•°æ®ï¼Œæˆ–è€…ä¿å­˜æ‰€æ”¶é›†çš„æ•°æ®ï¼Œå¯¹åº”çš„å­å‘½ä»¤åˆ†åˆ«ä¸º"),a("code",[e._v("JFR.start")]),e._v("ï¼Œ"),a("code",[e._v("JFR.stop")]),e._v("ï¼Œä»¥åŠ"),a("code",[e._v("JFR.dump")]),e._v("ã€‚")]),e._v(" "),a("p",[a("code",[e._v("JFR.start")]),e._v("å­å‘½ä»¤æ‰€æ¥æ”¶çš„é…ç½®åŠæ ¼å¼å’Œ"),a("code",[e._v("-XX:StartFlightRecording=")]),e._v("å‚æ•°çš„ç±»ä¼¼ã€‚è¿™äº›é…ç½®åŒ…æ‹¬"),a("code",[e._v("delay")]),e._v("ã€"),a("code",[e._v("duration")]),e._v("ã€"),a("code",[e._v("settings")]),e._v("ã€"),a("code",[e._v("maxage")]),e._v("ã€"),a("code",[e._v("maxsize")]),e._v("ä»¥åŠ"),a("code",[e._v("name")]),e._v("ã€‚å‰å‡ ä¸ªå‚æ•°æˆ‘ä»¬éƒ½å·²ç»ä»‹ç»è¿‡äº†ï¼Œæœ€åä¸€ä¸ªå‚æ•°"),a("code",[e._v("name")]),e._v("å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œå½“åŒä¸€è¿›ç¨‹ä¸­å­˜åœ¨å¤šä¸ª JFR æ•°æ®æ”¶é›†æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥æ ‡ç­¾æ¥è¾¨åˆ«ã€‚")]),e._v(" "),a("p",[e._v("åœ¨å¯åŠ¨ç›®æ ‡è¿›ç¨‹æ—¶ï¼Œæˆ‘ä»¬ä¸å†æ·»åŠ "),a("code",[e._v("-XX:StartFlightRecording=")]),e._v("å‚æ•°ã€‚åœ¨ç›®æ ‡è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ"),a("code",[e._v("JFR.start")]),e._v("å­å‘½ä»¤è¿œç¨‹å¯ç”¨ç›®æ ‡è¿›ç¨‹çš„ JFR åŠŸèƒ½ã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\n$ jcmd <PID> JFR.start settings=profile maxage=10m maxsize=150m name=SomeLabel\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("ä¸Šè¿°å‘½ä»¤è¿è¡Œè¿‡åï¼Œç›®æ ‡è¿›ç¨‹ä¸­çš„ JFR å·²ç»å¼€å§‹æ”¶é›†æ•°æ®ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹è¿°å‘½ä»¤æ¥å¯¼å‡ºå·²ç»æ”¶é›†åˆ°çš„æ•°æ®ï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\n$ jcmd <PID> JFR.dump name=SomeLabel filename=myrecording.jfr\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹è¿°å‘½ä»¤å…³é—­ç›®æ ‡è¿›ç¨‹ä¸­çš„ JFRï¼š")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("\n$ jcmd <PID> JFR.stop name=SomeLabel\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("å…³äº"),a("code",[e._v("JFR.start")]),e._v("ã€"),a("code",[e._v("JFR.dump")]),e._v("å’Œ"),a("code",[e._v("JFR.stop")]),e._v("çš„å…¶ä»–ç”¨æ³•ï¼Œä½ å¯ä»¥å‚è€ƒ"),a("a",{attrs:{href:"https://docs.oracle.com/javacomponents/jmc-5-5/jfr-runtime-guide/comline.htm#JFRRT185",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¯¥å¸®åŠ©æ–‡æ¡£"),a("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),a("p",[e._v("ç¬¬ä¸‰ç§å¯ç”¨ JFR çš„æ–¹å¼åˆ™æ˜¯ JMC ä¸­çš„ JFR æ’ä»¶ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145720771-9d633b.png",alt:"image-20220531145720771"}})]),e._v(" "),a("p",[e._v("åœ¨ JMC GUI å®¢æˆ·ç«¯å·¦ä¾§çš„ JVM æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ Java ç¨‹åºã€‚å½“ç‚¹å‡»å³é”®å¼¹å‡ºèœå•ä¸­çš„"),a("code",[e._v("Start Flight Recording...")]),e._v("æ—¶ï¼ŒJMC ä¾¿ä¼šå¼¹å‡ºå¦ä¸€ä¸ªçª—å£ï¼Œç”¨æ¥é…ç½® JFR çš„å¯åŠ¨å‚æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145730020-dc0405.png",alt:"image-20220531145730020"}})]),e._v(" "),a("p",[e._v("è¿™é‡Œçš„é…ç½®å‚æ•°ä¸å‰ä¸¤ç§å¯åŠ¨ JFR çš„æ–¹å¼å¹¶æ— äºŒè‡´ï¼ŒåŒæ ·ä¹ŸåŒ…æ‹¬æ ‡ç­¾åã€æ”¶é›†æ•°æ®çš„æŒç»­æ—¶é—´ã€ç¼“å­˜äº‹ä»¶çš„æ—¶é—´åŠç©ºé—´é™åˆ¶ï¼Œä»¥åŠé…ç½®æ‰€è¦ç›‘æ§äº‹ä»¶çš„"),a("code",[e._v("Event settings")]),e._v("ã€‚\nï¼ˆè¿™é‡Œå¯¹åº”å‰ä¸¤ç§å¯åŠ¨æ–¹å¼çš„"),a("code",[e._v("settings=default|profile")]),e._v("ï¼‰")]),e._v(" "),a("blockquote",[a("p",[e._v("JMC æä¾›äº†ä¸¤ä¸ªé€‰æ‹©ï¼šContinuous å’Œ Profilingï¼Œåˆ†åˆ«å¯¹åº”"),a("code",[e._v("$JDK/lib/jfr/")]),e._v("é‡Œçš„"),a("code",[e._v("default.jfc")]),e._v("å’Œ"),a("code",[e._v("profile.jfc")]),e._v("ã€‚")])]),e._v(" "),a("p",[e._v("æˆ‘ä»¬å¯ä»¥é€šè¿‡ JMC çš„"),a("code",[e._v("Flight Recording Template Manager")]),e._v("å¯¼å…¥è¿™äº› jfc æ–‡ä»¶ï¼Œå¹¶åœ¨ GUI ç•Œé¢ä¸Šè¿›è¡Œæ›´æ”¹ã€‚æ›´æ”¹å®Œæ¯•åï¼Œæˆ‘ä»¬å¯ä»¥å¯¼å‡ºä¸ºæ–°çš„ jfc æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨ã€‚")]),e._v(" "),a("p",[e._v("å½“æ”¶é›†å®Œæˆæ—¶ï¼ŒJMC ä¼šè‡ªåŠ¨æ‰“å¼€æ‰€ç”Ÿæˆçš„ jfr æ–‡ä»¶ï¼Œå¹¶åœ¨ä¸»ç•Œé¢ä¸­åˆ—ä¸¾ç›®æ ‡è¿›ç¨‹åœ¨æ”¶é›†æ•°æ®çš„è¿™æ®µæ—¶é—´å†…çš„æ½œåœ¨é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ"),a("code",[e._v("Parallel Threads")]),e._v("ä¸€èŠ‚ï¼Œä¾¿æ±‡æŠ¥äº†æ²¡æœ‰å®Œæ•´åˆ©ç”¨ CPU èµ„æºçš„é—®é¢˜ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145740115-28458e.png",alt:"image-20220531145740115"}})]),e._v(" "),a("p",[e._v("å®¢æˆ·ç«¯çš„å·¦è¾¹åˆ™ç½—åˆ—äº† Java è™šæ‹Ÿæœºçš„å„ä¸ªå­ç³»ç»Ÿã€‚JMC å°†æ ¹æ® JFR æ‰€æ”¶é›†åˆ°çš„æ¯ä¸ªå­ç³»ç»Ÿçš„äº‹ä»¶æ¥è¿›è¡Œå¯è§†åŒ–ï¼Œè½¬æ¢æˆå›¾æˆ–è€…è¡¨ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145754099-db27fe.png",alt:"image-20220531145754099"}})]),e._v(" "),a("p",[e._v("è¿™é‡Œæˆ‘ç®€å•åœ°ä»‹ç»å…¶ä¸­ä¸¤ä¸ªã€‚")]),e._v(" "),a("p",[e._v("åƒåœ¾å›æ”¶å­ç³»ç»Ÿæ‰€å¯¹åº”çš„é€‰é¡¹å¡å±•ç¤ºäº† JFR æ‰€æ”¶é›†åˆ°çš„ GC äº‹ä»¶ï¼Œä»¥åŠåŸºäºè¿™äº› GC äº‹ä»¶çš„æ•°æ®ç”Ÿæˆçš„å †å·²ç”¨ç©ºé—´çš„åˆ†å¸ƒå›¾ï¼ŒMetaspace å¤§å°çš„åˆ†å¸ƒå›¾ï¼Œæœ€é•¿æš‚åœä»¥åŠæ€»æš‚åœçš„ç›´æ–¹åˆ†å¸ƒå›¾ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145802675-05cc99.png",alt:"image-20220531145802675"}})]),e._v(" "),a("p",[e._v("å³æ—¶ç¼–è¯‘å­ç³»ç»Ÿæ‰€å¯¹åº”çš„é€‰é¡¹å¡åˆ™å±•ç¤ºäº†æ–¹æ³•ç¼–è¯‘æ—¶é—´çš„ç›´æ–¹å›¾ï¼Œä»¥åŠæŒ‰ç¼–è¯‘æ—¶é—´æ’åºçš„ç¼–è¯‘ä»»åŠ¡è¡¨ã€‚")]),e._v(" "),a("p",[e._v("åè€…å¯èƒ½å‡ºç°åŒæ–¹æ³•ååŒæ–¹æ³•æè¿°ç¬¦çš„ç¼–è¯‘ä»»åŠ¡ã€‚å…¶åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯ä¸åŒç¼–è¯‘å±‚æ¬¡çš„å³æ—¶ç¼–è¯‘ï¼Œå¦‚ 3 å±‚çš„ C1 ç¼–è¯‘ä»¥åŠ 4 å±‚çš„ C2 ç¼–è¯‘ã€‚äºŒæ˜¯å»ä¼˜åŒ–åçš„é‡æ–°ç¼–è¯‘ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145812739-437c9f.png",alt:"image-20220531145812739"}})]),e._v(" "),a("p",[e._v("JMC çš„å›¾è¡¨æ€»ä½“è€Œè¨€éƒ½ä¸éš¾ç†è§£ã€‚ä½ å¯ä»¥é€ä¸ªæ¢ç´¢ï¼Œæˆ‘åœ¨è¿™é‡Œä¾¿ä¸è¯¦ç»†å±•å¼€äº†ã€‚")]),e._v(" "),a("h2",{attrs:{id:"æ€»ç»“ä¸å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“ä¸å®è·µ"}},[e._v("#")]),e._v(" æ€»ç»“ä¸å®è·µ")]),e._v(" "),a("p",[e._v("ä»Šå¤©æˆ‘ä»‹ç»äº†ä¸¤ä¸ª GUI å·¥å…·ï¼šeclipse MAT ä»¥åŠ JMCã€‚")]),e._v(" "),a("p",[e._v("eclipse MAT å¯ç”¨äºåˆ†æç”±"),a("code",[e._v("jmap")]),e._v("å‘½ä»¤å¯¼å‡ºçš„ Java å †å¿«ç…§ã€‚å®ƒåŒ…æ‹¬ä¸¤ä¸ªç›¸å¯¹æ¯”è¾ƒé‡è¦çš„è§†å›¾ï¼Œåˆ†åˆ«ä¸ºç›´æ–¹å›¾å’Œæ”¯é…æ ‘ã€‚ç›´æ–¹å›¾å±•ç¤ºäº†å„ä¸ªç±»çš„å®ä¾‹æ•°ç›®ä»¥åŠè¿™äº›å®ä¾‹çš„ Shallow heap æˆ– Retained heap çš„æ€»å’Œã€‚æ”¯é…æ ‘åˆ™å±•ç¤ºäº†å¿«ç…§ä¸­æ¯ä¸ªå¯¹è±¡æ‰€ç›´æ¥æ”¯é…çš„å¯¹è±¡ã€‚")]),e._v(" "),a("p",[e._v("Java Mission Control æ˜¯ Java è™šæ‹Ÿæœºå¹³å°ä¸Šçš„æ€§èƒ½ç›‘æ§å·¥å…·ã€‚Java Flight Recorder æ˜¯ JMC çš„å…¶ä¸­ä¸€ä¸ªç»„ä»¶ï¼Œèƒ½å¤Ÿä»¥æä½çš„æ€§èƒ½å¼€é”€æ”¶é›† Java è™šæ‹Ÿæœºçš„æ€§èƒ½æ•°æ®ã€‚")]),e._v(" "),a("p",[e._v("JFR çš„å¯ç”¨æ–¹å¼æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸ºåœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨"),a("code",[e._v("-XX:StartFlightRecording=")]),e._v("å‚æ•°ï¼Œä½¿ç”¨"),a("code",[e._v("jcmd")]),e._v("çš„"),a("code",[e._v("JFR.*")]),e._v("å­å‘½ä»¤ï¼Œä»¥åŠ JMC çš„ JFR æ’ä»¶ã€‚JMC èƒ½å¤ŸåŠ è½½ JFR çš„è¾“å‡ºç»“æœï¼Œå¹¶ä¸”ç”Ÿæˆå„ç§ä¿¡æ¯ä¸°å¯Œçš„å›¾è¡¨ã€‚")]),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œè¯·ä½ è¯•ç”¨ JMC ä¸­çš„ MBean Server åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ JMC çš„å¸®åŠ©æ–‡æ¡£ï¼ˆ"),a("code",[e._v("Help->Java Mission Control Help")]),e._v("ï¼‰ï¼Œä»¥åŠ"),a("a",{attrs:{href:"https://docs.oracle.com/javase/tutorial/jmx/mbeans/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¯¥æ•™ç¨‹"),a("OutboundLink")],1),e._v("æ¥äº†è§£è¯¥åŠŸèƒ½çš„å…·ä½“å«ä¹‰ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145820147-f61f2c.png",alt:"image-20220531145820147"}})]),e._v(" "),a("p",[e._v("ç”±äºç¯‡å¹…çš„é™åˆ¶ï¼Œæˆ‘å°±ä¸å†ä»‹ç»"),a("a",{attrs:{href:"https://visualvm.github.io/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("VisualVM"),a("OutboundLink")],1),e._v(" ä»¥åŠ"),a("a",{attrs:{href:"https://github.com/AdoptOpenJDK/jitwatch",target:"_blank",rel:"noopener noreferrer"}},[e._v("JITWatch"),a("OutboundLink")],1),e._v(" äº†ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯è‡ªè¡Œä¸‹è½½ç ”ç©¶ã€‚")]),e._v(" "),a("h2",{attrs:{id:"ç²¾é€‰ç•™è¨€-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç²¾é€‰ç•™è¨€-6"}},[e._v("#")]),e._v(" ç²¾é€‰ç•™è¨€(6)")]),e._v(" "),a("ul",[a("li")]),e._v(" "),a("p",[e._v("é˜¿æ­¦")]),e._v(" "),a("p",[e._v("2018-10-01")]),e._v(" "),a("p",[e._v("3")]),e._v(" "),a("p",[e._v("å›½åº†ä¹Ÿæ¨é€ï¼Œå¤§å†™çš„æœã€‚ğŸ‘ğŸ‘")]),e._v(" "),a("ul",[a("li")]),e._v(" "),a("p",[e._v("Maxwell")]),e._v(" "),a("p",[e._v("2018-12-21")]),e._v(" "),a("p",[e._v("2")]),e._v(" "),a("p",[e._v("èƒ½å¦åˆ†äº«ä¸‹å®é™…å·¥ä½œä¸­å‘ç”Ÿå†…å­˜æ³„éœ²ï¼Œä½¿ç”¨MATåˆ†æå’Œå®šä½çš„æ¡ˆä¾‹å‘¢ï¼Ÿ")]),e._v(" "),a("ul",[a("li")]),e._v(" "),a("p",[e._v("fuyu")]),e._v(" "),a("p",[e._v("2018-10-01")]),e._v(" "),a("p",[e._v("2")]),e._v(" "),a("p",[e._v("è¦æ˜¯èƒ½ä¸¾å‡ ä¸ªä¾‹å­ç»“åˆå·¥å…·æ’æŸ¥å°±æ›´å¥½äº†ã€‚")]),e._v(" "),a("ul",[a("li")]),e._v(" "),a("p",[e._v("godtrue")]),e._v(" "),a("p",[e._v("2018-10-06")]),e._v(" "),a("p",[e._v("1")]),e._v(" "),a("p",[e._v("JVM GUIç›‘æ§å’Œæ£€æµ‹å·¥å…·\n1:MAT\n2:JMC\nè¿™ä¸¤ä¸ªæ²¡æ€ä¹ˆç”¨è¿‡ï¼Œå›å¤´ä¸‹è½½ã€å®‰è£…ã€ä½¿ç”¨ä¸‹ï¼Œå›½åº†å›å®¶äº†ï¼Œé›¨è¿ªè€å¸ˆè¿˜åœ¨åŒ€é€Ÿçš„å‰è¿›ï¼Œæ˜¯ä¸æ˜¯è¯¾ç¨‹æ˜¯æå‰ç¼–å†™å¥½ï¼Œå½•åˆ¶å¥½ï¼Œç„¶åå®šæ—¶æ”¾å‡ºï¼Ÿæ— è®ºæ€ä¹ˆéå¸¸æ„Ÿè°¢ï¼Œè·Ÿç€è€å¸ˆç¡®å®å­¦ä¹ äº†ä¸å°‘ä¸œè¥¿ï¼Œæœ€åä¸¤å¤©è¡¥ä¸Šæ‹‰ä¸‹çš„è¯¾ç¨‹ã€‚")]),e._v(" "),a("p",[e._v("ä½œè€…å›å¤: æå‰ä¸€å‘¨å†™å¥½çš„ã€‚æå®¢çš„å°ç¼–è¾›è‹¦äº›ï¼Œéœ€è¦åŠ ç­è¾ƒç¨¿ã€‚")]),e._v(" "),a("ul",[a("li")]),e._v(" "),a("p",[e._v("qpm")]),e._v(" "),a("p",[e._v("2018-10-02")]),e._v(" "),a("p",[e._v("1")]),e._v(" "),a("p",[e._v("MATæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå·²ç»ç”¨å®ƒæˆåŠŸæ’æŸ¥è¿‡å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚")]),e._v(" "),a("ul",[a("li")]),e._v(" "),a("p",[e._v("é‡è§æœªæ¥")]),e._v(" "),a("p",[e._v("2018-10-26")]),e._v(" "),a("p",[e._v("è€å¸ˆæ‚¨å¥½ï¼Œopenjdkå¯ä»¥ç”¨JFRå˜›ï¼Œé…ç½®äº†å¥½ä¹…æ²¡æˆåŠŸï¼Œå¦‚æœä¸èƒ½æœ‰æ²¡æœ‰ç±»ä¼¼çš„å·¥å…·æ¨èï¼Œè°¢è°¢ğŸ˜")]),e._v(" "),a("p",[e._v("ä½œè€…å›å¤: Java 11å¼€å§‹æ‰è¿›OpenJDKçš„")])])}),[],!1,null,null,null);a.default=n.exports}}]);