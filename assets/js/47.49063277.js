(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{445:function(s,a,n){"use strict";n.r(a);var e=n(0),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_14-javaè™šæ‹Ÿæœºæ˜¯æ€ä¹ˆå®ç°synchronizedçš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-javaè™šæ‹Ÿæœºæ˜¯æ€ä¹ˆå®ç°synchronizedçš„"}},[s._v("#")]),s._v(" 14 | Javaè™šæ‹Ÿæœºæ˜¯æ€ä¹ˆå®ç°synchronizedçš„ï¼Ÿ")]),s._v(" "),a("p",[s._v("åœ¨ Java ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ synchronized å…³é”®å­—æ¥å¯¹ç¨‹åºè¿›è¡ŒåŠ é”ã€‚å®ƒæ—¢å¯ä»¥ç”¨æ¥å£°æ˜ä¸€ä¸ª synchronized ä»£ç å—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ ‡è®°é™æ€æ–¹æ³•æˆ–è€…å®ä¾‹æ–¹æ³•ã€‚")]),s._v(" "),a("p",[s._v("å½“å£°æ˜ synchronized ä»£ç å—æ—¶ï¼Œç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç å°†åŒ…å« monitorenter å’Œ monitorexit  æŒ‡ä»¤ã€‚è¿™ä¸¤ç§æŒ‡ä»¤å‡ä¼šæ¶ˆè€—æ“ä½œæ•°æ ˆä¸Šçš„ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å…ƒç´ ï¼ˆä¹Ÿå°±æ˜¯ synchronized å…³é”®å­—æ‹¬å·é‡Œçš„å¼•ç”¨ï¼‰ï¼Œä½œä¸ºæ‰€è¦åŠ é”è§£é”çš„é”å¯¹è±¡ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n  public void foo(Object lock) {\n\n    synchronized (lock) {\n\n      lock.hashCode();\n\n    }\n\n  }\n\n  // ä¸Šé¢çš„ Java ä»£ç å°†ç¼–è¯‘ä¸ºä¸‹é¢çš„å­—èŠ‚ç \n\n  public void foo(java.lang.Object);\n\n    Code:\n\n       0: aload_1\n\n       1: dup\n\n       2: astore_2\n\n       3: monitorenter\n\n       4: aload_1\n\n       5: invokevirtual java/lang/Object.hashCode:()I\n\n       8: pop\n\n       9: aload_2\n\n      10: monitorexit\n\n      11: goto          19\n\n      14: astore_3\n\n      15: aload_2\n\n      16: monitorexit\n\n      17: aload_3\n\n      18: athrow\n\n      19: return\n\n    Exception table:\n\n       from    to  target type\n\n           4    11    14   any\n\n          14    17    14   any\n\n \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("p",[s._v("æˆ‘åœ¨æ–‡ç¨¿ä¸­è´´äº†ä¸€æ®µåŒ…å« synchronized ä»£ç å—çš„ Java ä»£ç ï¼Œä»¥åŠå®ƒæ‰€ç¼–è¯‘è€Œæˆçš„å­—èŠ‚ç ã€‚ä½ å¯èƒ½ä¼šç•™æ„åˆ°ï¼Œä¸Šé¢çš„å­—èŠ‚ç ä¸­åŒ…å«ä¸€ä¸ª monitorenter æŒ‡ä»¤ä»¥åŠå¤šä¸ª monitorexit æŒ‡ä»¤ã€‚è¿™æ˜¯å› ä¸º Java è™šæ‹Ÿæœºéœ€è¦ç¡®ä¿æ‰€è·å¾—çš„é”åœ¨æ­£å¸¸æ‰§è¡Œè·¯å¾„ï¼Œä»¥åŠå¼‚å¸¸æ‰§è¡Œè·¯å¾„ä¸Šéƒ½èƒ½å¤Ÿè¢«è§£é”ã€‚")]),s._v(" "),a("p",[s._v("ä½ å¯ä»¥æ ¹æ®æˆ‘åœ¨ä»‹ç»å¼‚å¸¸å¤„ç†æ—¶ä»‹ç»è¿‡çš„çŸ¥è¯†ï¼Œå¯¹ç…§å­—èŠ‚ç å’Œå¼‚å¸¸å¤„ç†è¡¨æ¥æ„é€ æ‰€æœ‰å¯èƒ½çš„æ‰§è¡Œè·¯å¾„ï¼Œçœ‹çœ‹åœ¨æ‰§è¡Œäº† monitorenter æŒ‡ä»¤ä¹‹åï¼Œæ˜¯å¦éƒ½æœ‰æ‰§è¡Œ monitorexit æŒ‡ä»¤ã€‚")]),s._v(" "),a("p",[s._v("å½“ç”¨ synchronized æ ‡è®°æ–¹æ³•æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å­—èŠ‚ç ä¸­æ–¹æ³•çš„è®¿é—®æ ‡è®°åŒ…æ‹¬  ACC_SYNCHRONIZEDã€‚è¯¥æ ‡è®°è¡¨ç¤ºåœ¨è¿›å…¥è¯¥æ–¹æ³•æ—¶ï¼ŒJava è™šæ‹Ÿæœºéœ€è¦è¿›è¡Œ monitorenter  æ“ä½œã€‚è€Œåœ¨é€€å‡ºè¯¥æ–¹æ³•æ—¶ï¼Œä¸ç®¡æ˜¯æ­£å¸¸è¿”å›ï¼Œè¿˜æ˜¯å‘è°ƒç”¨è€…æŠ›å¼‚å¸¸ï¼ŒJava è™šæ‹Ÿæœºå‡éœ€è¦è¿›è¡Œ monitorexit æ“ä½œã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n  public synchronized void foo(Object lock) {\n\n    lock.hashCode();\n\n  }\n\n  // ä¸Šé¢çš„ Java ä»£ç å°†ç¼–è¯‘ä¸ºä¸‹é¢çš„å­—èŠ‚ç \n\n  public synchronized void foo(java.lang.Object);\n\n    descriptor: (Ljava/lang/Object;)V\n\n    flags: (0x0021) ACC_PUBLIC, ACC_SYNCHRONIZED\n\n    Code:\n\n      stack=1, locals=2, args_size=2\n\n         0: aload_1\n\n         1: invokevirtual java/lang/Object.hashCode:()I\n\n         4: pop\n\n         5: return\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("è¿™é‡Œ monitorenter å’Œ monitorexit æ“ä½œæ‰€å¯¹åº”çš„é”å¯¹è±¡æ˜¯éšå¼çš„ã€‚å¯¹äºå®ä¾‹æ–¹æ³•æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯¹åº”çš„é”å¯¹è±¡æ˜¯ thisï¼›å¯¹äºé™æ€æ–¹æ³•æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯¹åº”çš„é”å¯¹è±¡åˆ™æ˜¯æ‰€åœ¨ç±»çš„ Class å®ä¾‹ã€‚")]),s._v(" "),a("p",[s._v("å…³äº monitorenter å’Œ monitorexit çš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡åœ°ç†è§£ä¸ºæ¯ä¸ªé”å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªé”è®¡æ•°å™¨å’Œä¸€ä¸ªæŒ‡å‘æŒæœ‰è¯¥é”çš„çº¿ç¨‹çš„æŒ‡é’ˆã€‚")]),s._v(" "),a("p",[s._v("å½“æ‰§è¡Œ monitorenter æ—¶ï¼Œå¦‚æœç›®æ ‡é”å¯¹è±¡çš„è®¡æ•°å™¨ä¸º 0ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒæ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹æ‰€æŒæœ‰ã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†è¯¥é”å¯¹è±¡çš„æŒæœ‰çº¿ç¨‹è®¾ç½®ä¸ºå½“å‰çº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…¶è®¡æ•°å™¨åŠ  1ã€‚")]),s._v(" "),a("p",[s._v("åœ¨ç›®æ ‡é”å¯¹è±¡çš„è®¡æ•°å™¨ä¸ä¸º 0 çš„æƒ…å†µä¸‹ï¼Œå¦‚æœé”å¯¹è±¡çš„æŒæœ‰çº¿ç¨‹æ˜¯å½“å‰çº¿ç¨‹ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºå¯ä»¥å°†å…¶è®¡æ•°å™¨åŠ  1ï¼Œå¦åˆ™éœ€è¦ç­‰å¾…ï¼Œç›´è‡³æŒæœ‰çº¿ç¨‹é‡Šæ”¾è¯¥é”ã€‚")]),s._v(" "),a("p",[s._v("å½“æ‰§è¡Œ monitorexit æ—¶ï¼ŒJava è™šæ‹Ÿæœºåˆ™éœ€å°†é”å¯¹è±¡çš„è®¡æ•°å™¨å‡ 1ã€‚å½“è®¡æ•°å™¨å‡ä¸º 0 æ—¶ï¼Œé‚£ä¾¿ä»£è¡¨è¯¥é”å·²ç»è¢«é‡Šæ”¾æ‰äº†ã€‚")]),s._v(" "),a("p",[s._v("ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™ç§è®¡æ•°å™¨çš„æ–¹å¼ï¼Œæ˜¯ä¸ºäº†å…è®¸åŒä¸€ä¸ªçº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ä¸ª Java ç±»ä¸­æ‹¥æœ‰å¤šä¸ª synchronized  æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œä¸ç®¡æ˜¯ç›´æ¥çš„è¿˜æ˜¯é—´æ¥çš„ï¼Œéƒ½ä¼šæ¶‰åŠå¯¹åŒä¸€æŠŠé”çš„é‡å¤åŠ é”æ“ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡è¿™ä¹ˆä¸€ä¸ªå¯é‡å…¥çš„ç‰¹æ€§ï¼Œæ¥é¿å…ç¼–ç¨‹é‡Œçš„éšå¼çº¦æŸã€‚")]),s._v(" "),a("p",[s._v("è¯´å®ŒæŠ½è±¡çš„é”ç®—æ³•ï¼Œä¸‹é¢æˆ‘ä»¬ä¾¿æ¥ä»‹ç» HotSpot è™šæ‹Ÿæœºä¸­å…·ä½“çš„é”å®ç°ã€‚")]),s._v(" "),a("h2",{attrs:{id:"é‡é‡çº§é”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é‡é‡çº§é”"}},[s._v("#")]),s._v(" é‡é‡çº§é”")]),s._v(" "),a("p",[s._v("é‡é‡çº§é”æ˜¯ Java è™šæ‹Ÿæœºä¸­æœ€ä¸ºåŸºç¡€çš„é”å®ç°ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼ŒJava è™šæ‹Ÿæœºä¼šé˜»å¡åŠ é”å¤±è´¥çš„çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨ç›®æ ‡é”è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œå”¤é†’è¿™äº›çº¿ç¨‹ã€‚")]),s._v(" "),a("p",[s._v("Java çº¿ç¨‹çš„é˜»å¡ä»¥åŠå”¤é†’ï¼Œéƒ½æ˜¯ä¾é æ“ä½œç³»ç»Ÿæ¥å®Œæˆçš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºç¬¦åˆ posix æ¥å£çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚ macOS å’Œç»å¤§éƒ¨åˆ†çš„  Linuxï¼‰ï¼Œä¸Šè¿°æ“ä½œæ˜¯é€šè¿‡ pthread  çš„äº’æ–¥é”ï¼ˆmutexï¼‰æ¥å®ç°çš„ã€‚æ­¤å¤–ï¼Œè¿™äº›æ“ä½œå°†æ¶‰åŠç³»ç»Ÿè°ƒç”¨ï¼Œéœ€è¦ä»æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ€åˆ‡æ¢è‡³å†…æ ¸æ€ï¼Œå…¶å¼€é”€éå¸¸ä¹‹å¤§ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†å°½é‡é¿å…æ˜‚è´µçš„çº¿ç¨‹é˜»å¡ã€å”¤é†’æ“ä½œï¼ŒJava è™šæ‹Ÿæœºä¼šåœ¨çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ä¹‹å‰ï¼Œä»¥åŠè¢«å”¤é†’åç«äº‰ä¸åˆ°é”çš„æƒ…å†µä¸‹ï¼Œè¿›å…¥è‡ªæ—‹çŠ¶æ€ï¼Œåœ¨å¤„ç†å™¨ä¸Šç©ºè·‘å¹¶ä¸”è½®è¯¢é”æ˜¯å¦è¢«é‡Šæ”¾ã€‚å¦‚æœæ­¤æ—¶é”æ°å¥½è¢«é‡Šæ”¾äº†ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¾¿æ— é¡»è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯ç›´æ¥è·å¾—è¿™æŠŠé”ã€‚")]),s._v(" "),a("p",[s._v("ä¸çº¿ç¨‹é˜»å¡ç›¸æ¯”ï¼Œè‡ªæ—‹çŠ¶æ€å¯èƒ½ä¼šæµªè´¹å¤§é‡çš„å¤„ç†å™¨èµ„æºã€‚è¿™æ˜¯å› ä¸ºå½“å‰çº¿ç¨‹ä»å¤„äºè¿è¡ŒçŠ¶å†µï¼Œåªä¸è¿‡è·‘çš„æ˜¯æ— ç”¨æŒ‡ä»¤ã€‚å®ƒæœŸæœ›åœ¨è¿è¡Œæ— ç”¨æŒ‡ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œé”èƒ½å¤Ÿè¢«é‡Šæ”¾å‡ºæ¥ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å¯ä»¥ç”¨ç­‰çº¢ç»¿ç¯ä½œä¸ºä¾‹å­ã€‚Java  çº¿ç¨‹çš„é˜»å¡ç›¸å½“äºç†„ç«åœè½¦ï¼Œè€Œè‡ªæ—‹çŠ¶æ€ç›¸å½“äºæ€ é€Ÿåœè½¦ã€‚å¦‚æœçº¢ç¯çš„ç­‰å¾…æ—¶é—´éå¸¸é•¿ï¼Œé‚£ä¹ˆç†„ç«åœè½¦ç›¸å¯¹çœæ²¹ä¸€äº›ï¼›å¦‚æœçº¢ç¯çš„ç­‰å¾…æ—¶é—´éå¸¸çŸ­ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬åœ¨  synchronized ä»£ç å—é‡Œåªåšäº†ä¸€ä¸ªæ•´å‹åŠ æ³•ï¼Œé‚£ä¹ˆåœ¨çŸ­æ—¶é—´å†…é”è‚¯å®šä¼šè¢«é‡Šæ”¾å‡ºæ¥ï¼Œå› æ­¤æ€ é€Ÿåœè½¦æ›´åŠ åˆé€‚ã€‚")]),s._v(" "),a("p",[s._v("ç„¶è€Œï¼Œå¯¹äº Java è™šæ‹Ÿæœºæ¥è¯´ï¼Œå®ƒå¹¶ä¸èƒ½çœ‹åˆ°çº¢ç¯çš„å‰©ä½™æ—¶é—´ï¼Œä¹Ÿå°±æ²¡åŠæ³•æ ¹æ®ç­‰å¾…æ—¶é—´çš„é•¿çŸ­æ¥é€‰æ‹©è‡ªæ—‹è¿˜æ˜¯é˜»å¡ã€‚Java è™šæ‹Ÿæœºç»™å‡ºçš„æ–¹æ¡ˆæ˜¯è‡ªé€‚åº”è‡ªæ—‹ï¼Œæ ¹æ®ä»¥å¾€è‡ªæ—‹ç­‰å¾…æ—¶æ˜¯å¦èƒ½å¤Ÿè·å¾—é”ï¼Œæ¥åŠ¨æ€è°ƒæ•´è‡ªæ—‹çš„æ—¶é—´ï¼ˆå¾ªç¯æ•°ç›®ï¼‰ã€‚")]),s._v(" "),a("p",[s._v("å°±æˆ‘ä»¬çš„ä¾‹å­æ¥è¯´ï¼Œå¦‚æœä¹‹å‰ä¸ç†„ç«ç­‰åˆ°äº†ç»¿ç¯ï¼Œé‚£ä¹ˆè¿™æ¬¡ä¸ç†„ç«çš„æ—¶é—´å°±é•¿ä¸€ç‚¹ï¼›å¦‚æœä¹‹å‰ä¸ç†„ç«æ²¡ç­‰åˆ°ç»¿ç¯ï¼Œé‚£ä¹ˆè¿™æ¬¡ä¸ç†„ç«çš„æ—¶é—´å°±çŸ­ä¸€ç‚¹ã€‚")]),s._v(" "),a("p",[s._v("è‡ªæ—‹çŠ¶æ€è¿˜å¸¦æ¥å¦å¤–ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œé‚£ä¾¿æ˜¯ä¸å…¬å¹³çš„é”æœºåˆ¶ã€‚å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œå¹¶æ²¡æœ‰åŠæ³•ç«‹åˆ»ç«äº‰è¢«é‡Šæ”¾çš„é”ã€‚ç„¶è€Œï¼Œå¤„äºè‡ªæ—‹çŠ¶æ€çš„çº¿ç¨‹ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½ä¼˜å…ˆè·å¾—è¿™æŠŠé”ã€‚")]),s._v(" "),a("h2",{attrs:{id:"è½»é‡çº§é”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è½»é‡çº§é”"}},[s._v("#")]),s._v(" è½»é‡çº§é”")]),s._v(" "),a("p",[s._v("ä½ å¯èƒ½è§åˆ°è¿‡æ·±å¤œçš„åå­—è·¯å£ï¼Œå››ä¸ªæ–¹å‘éƒ½é—ªé»„ç¯çš„æƒ…å†µã€‚ç”±äºæ·±å¤œåå­—è·¯å£çš„è½¦è¾†æ¥å¾€å¯èƒ½æ¯”è¾ƒå°‘ï¼Œå¦‚æœè¿˜è®¾ç½®çº¢ç»¿ç¯äº¤æ›¿ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å‡ºç°å››ä¸ªæ–¹å‘ä»…æœ‰ä¸€è¾†è½¦åœ¨ç­‰çº¢ç¯çš„æƒ…å†µã€‚")]),s._v(" "),a("p",[s._v("å› æ­¤ï¼Œçº¢ç»¿ç¯å¯èƒ½è¢«è®¾ç½®ä¸ºé—ªé»„ç¯çš„æƒ…å†µï¼Œä»£è¡¨è½¦è¾†å¯ä»¥è‡ªç”±é€šè¿‡ï¼Œä½†æ˜¯å¸æœºéœ€è¦æ³¨æ„è§‚å¯Ÿï¼ˆä¸ªäººç†è§£ï¼Œå®é™…æ„ä¹‰è¯·å’¨è¯¢äº¤è­¦éƒ¨é—¨ï¼‰ã€‚")]),s._v(" "),a("p",[s._v("Java è™šæ‹Ÿæœºä¹Ÿå­˜åœ¨ç€ç±»ä¼¼çš„æƒ…å½¢ï¼šå¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„æ—¶é—´æ®µè¯·æ±‚åŒä¸€æŠŠé”ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰é”ç«äº‰ã€‚é’ˆå¯¹è¿™ç§æƒ…å½¢ï¼ŒJava è™šæ‹Ÿæœºé‡‡ç”¨äº†è½»é‡çº§é”ï¼Œæ¥é¿å…é‡é‡çº§é”çš„é˜»å¡ä»¥åŠå”¤é†’ã€‚")]),s._v(" "),a("p",[s._v("åœ¨ä»‹ç»è½»é‡çº§é”çš„åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ Java è™šæ‹Ÿæœºæ˜¯æ€ä¹ˆåŒºåˆ†è½»é‡çº§é”å’Œé‡é‡çº§é”çš„ã€‚")]),s._v(" "),a("p",[s._v("ï¼ˆä½ å¯ä»¥å‚ç…§"),a("a",{attrs:{href:"https://wiki.openjdk.java.net/display/HotSpot/Synchronization",target:"_blank",rel:"noopener noreferrer"}},[s._v("HotSpot Wiki"),a("OutboundLink")],1),s._v("é‡Œè¿™å¼ å›¾é˜…è¯»ã€‚ï¼‰")]),s._v(" "),a("p",[s._v("åœ¨å¯¹è±¡å†…å­˜å¸ƒå±€é‚£ä¸€ç¯‡ä¸­æˆ‘æ›¾ç»ä»‹ç»äº†å¯¹è±¡å¤´ä¸­çš„æ ‡è®°å­—æ®µï¼ˆmark wordï¼‰ã€‚å®ƒçš„æœ€åä¸¤ä½ä¾¿è¢«ç”¨æ¥è¡¨ç¤ºè¯¥å¯¹è±¡çš„é”çŠ¶æ€ã€‚å…¶ä¸­ï¼Œ00 ä»£è¡¨è½»é‡çº§é”ï¼Œ01 ä»£è¡¨æ— é”ï¼ˆæˆ–åå‘é”ï¼‰ï¼Œ10 ä»£è¡¨é‡é‡çº§é”ï¼Œ11 åˆ™è·Ÿåƒåœ¾å›æ”¶ç®—æ³•çš„æ ‡è®°æœ‰å…³ã€‚")]),s._v(" "),a("p",[s._v("å½“è¿›è¡ŒåŠ é”æ“ä½œæ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šåˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯é‡é‡çº§é”ã€‚å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šåœ¨å½“å‰çº¿ç¨‹çš„å½“å‰æ ˆæ¡¢ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ï¼Œä½œä¸ºè¯¥é”çš„é”è®°å½•ï¼Œå¹¶ä¸”å°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå¤åˆ¶åˆ°è¯¥é”è®°å½•ä¸­ã€‚")]),s._v(" "),a("p",[s._v("ç„¶åï¼ŒJava è™šæ‹Ÿæœºä¼šå°è¯•ç”¨ CASï¼ˆcompare-and-swapï¼‰æ“ä½œæ›¿æ¢é”å¯¹è±¡çš„æ ‡è®°å­—æ®µã€‚è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼ŒCAS æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå®ƒä¼šæ¯”è¾ƒç›®æ ‡åœ°å€çš„å€¼æ˜¯å¦å’ŒæœŸæœ›å€¼ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™æ›¿æ¢ä¸ºä¸€ä¸ªæ–°çš„å€¼ã€‚")]),s._v(" "),a("p",[s._v("å‡è®¾å½“å‰é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸º Xâ€¦XYZï¼ŒJava è™šæ‹Ÿæœºä¼šæ¯”è¾ƒè¯¥å­—æ®µæ˜¯å¦ä¸º Xâ€¦X01ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºåˆšæ‰åˆ†é…çš„é”è®°å½•çš„åœ°å€ã€‚ç”±äºå†…å­˜å¯¹é½çš„ç¼˜æ•…ï¼Œå®ƒçš„æœ€åä¸¤ä½ä¸º 00ã€‚æ­¤æ—¶ï¼Œè¯¥çº¿ç¨‹å·²æˆåŠŸè·å¾—è¿™æŠŠé”ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œäº†ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä¸æ˜¯ Xâ€¦X01ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ã€‚ç¬¬ä¸€ï¼Œè¯¥çº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ã€‚ç¬¬äºŒï¼Œå…¶ä»–çº¿ç¨‹æŒæœ‰è¯¥é”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†è¿™æŠŠé”è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œå¹¶ä¸”é˜»å¡å½“å‰çº¿ç¨‹ã€‚")]),s._v(" "),a("p",[s._v("å½“è¿›è¡Œè§£é”æ“ä½œæ—¶ï¼Œå¦‚æœå½“å‰é”è®°å½•ï¼ˆä½ å¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰é”è®°å½•æƒ³è±¡æˆä¸€ä¸ªæ ˆç»“æ„ï¼Œæ¯æ¬¡åŠ é”å‹å…¥ä¸€æ¡é”è®°å½•ï¼Œè§£é”å¼¹å‡ºä¸€æ¡é”è®°å½•ï¼Œå½“å‰é”è®°å½•æŒ‡çš„ä¾¿æ˜¯æ ˆé¡¶çš„é”è®°å½•ï¼‰çš„å€¼ä¸º 0ï¼Œåˆ™ä»£è¡¨é‡å¤è¿›å…¥åŒä¸€æŠŠé”ï¼Œç›´æ¥è¿”å›å³å¯ã€‚")]),s._v(" "),a("p",[s._v("å¦åˆ™ï¼ŒJava è™šæ‹Ÿæœºä¼šå°è¯•ç”¨ CAS æ“ä½œï¼Œæ¯”è¾ƒé”å¯¹è±¡çš„æ ‡è®°å­—æ®µçš„å€¼æ˜¯å¦ä¸ºå½“å‰é”è®°å½•çš„åœ°å€ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºé”è®°å½•ä¸­çš„å€¼ï¼Œä¹Ÿå°±æ˜¯é”å¯¹è±¡åŸæœ¬çš„æ ‡è®°å­—æ®µã€‚æ­¤æ—¶ï¼Œè¯¥çº¿ç¨‹å·²ç»æˆåŠŸé‡Šæ”¾è¿™æŠŠé”ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä¸æ˜¯ï¼Œåˆ™æ„å‘³ç€è¿™æŠŠé”å·²ç»è¢«è†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šè¿›å…¥é‡é‡çº§é”çš„é‡Šæ”¾è¿‡ç¨‹ï¼Œå”¤é†’å› ç«äº‰è¯¥é”è€Œè¢«é˜»å¡äº†çš„çº¿ç¨‹ã€‚")]),s._v(" "),a("h2",{attrs:{id:"åå‘é”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åå‘é”"}},[s._v("#")]),s._v(" åå‘é”")]),s._v(" "),a("p",[s._v("å¦‚æœè¯´è½»é‡çº§é”é’ˆå¯¹çš„æƒ…å†µå¾ˆä¹è§‚ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„åå‘é”é’ˆå¯¹çš„æƒ…å†µåˆ™æ›´åŠ ä¹è§‚ï¼šä»å§‹è‡³ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚æŸä¸€æŠŠé”ã€‚")]),s._v(" "),a("p",[s._v("è¿™å°±å¥½æ¯”ä½ åœ¨ç§å®¶åº„å›­é‡Œè£…äº†ä¸ªçº¢ç»¿ç¯ï¼Œå¹¶ä¸”åº„å›­é‡Œåªæœ‰ä½ åœ¨å¼€è½¦ã€‚åå‘é”çš„åšæ³•ä¾¿æ˜¯åœ¨çº¢ç»¿ç¯å¤„è¯†åˆ«æ¥è½¦çš„è½¦ç‰Œå·ã€‚å¦‚æœåŒ¹é…åˆ°ä½ çš„è½¦ç‰Œå·ï¼Œé‚£ä¹ˆç›´æ¥äº®ç»¿ç¯ã€‚")]),s._v(" "),a("p",[s._v("å…·ä½“æ¥è¯´ï¼Œåœ¨çº¿ç¨‹è¿›è¡ŒåŠ é”æ—¶ï¼Œå¦‚æœè¯¥é”å¯¹è±¡æ”¯æŒåå‘é”ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºä¼šé€šè¿‡ CAS æ“ä½œï¼Œå°†å½“å‰çº¿ç¨‹çš„åœ°å€è®°å½•åœ¨é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¹‹ä¸­ï¼Œå¹¶ä¸”å°†æ ‡è®°å­—æ®µçš„æœ€åä¸‰ä½è®¾ç½®ä¸º 101ã€‚")]),s._v(" "),a("p",[s._v("åœ¨æ¥ä¸‹æ¥çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯å½“æœ‰çº¿ç¨‹è¯·æ±‚è¿™æŠŠé”ï¼ŒJava è™šæ‹Ÿæœºåªéœ€åˆ¤æ–­é”å¯¹è±¡æ ‡è®°å­—æ®µä¸­ï¼šæœ€åä¸‰ä½æ˜¯å¦ä¸º 101ï¼Œæ˜¯å¦åŒ…å«å½“å‰çº¿ç¨‹çš„åœ°å€ï¼Œä»¥åŠ epoch å€¼æ˜¯å¦å’Œé”å¯¹è±¡çš„ç±»çš„ epoch å€¼ç›¸åŒã€‚å¦‚æœéƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹æŒæœ‰è¯¥åå‘é”ï¼Œå¯ä»¥ç›´æ¥è¿”å›ã€‚")]),s._v(" "),a("p",[s._v("è¿™é‡Œçš„ epoch å€¼æ˜¯ä¸€ä¸ªä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿ")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å…ˆä»åå‘é”çš„æ’¤é”€è®²èµ·ã€‚å½“è¯·æ±‚åŠ é”çš„çº¿ç¨‹å’Œé”å¯¹è±¡æ ‡è®°å­—æ®µä¿æŒçš„çº¿ç¨‹åœ°å€ä¸åŒ¹é…æ—¶ï¼ˆè€Œä¸” epoch  å€¼ç›¸ç­‰ï¼Œå¦‚è‹¥ä¸ç­‰ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å¯ä»¥å°†è¯¥é”é‡åå‘è‡³è‡ªå·±ï¼‰ï¼ŒJava  è™šæ‹Ÿæœºéœ€è¦æ’¤é”€è¯¥åå‘é”ã€‚è¿™ä¸ªæ’¤é”€è¿‡ç¨‹éå¸¸éº»çƒ¦ï¼Œå®ƒè¦æ±‚æŒæœ‰åå‘é”çš„çº¿ç¨‹åˆ°è¾¾å®‰å…¨ç‚¹ï¼Œå†å°†åå‘é”æ›¿æ¢æˆè½»é‡çº§é”ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœæŸä¸€ç±»é”å¯¹è±¡çš„æ€»æ’¤é”€æ•°è¶…è¿‡äº†ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¯¹åº” Java è™šæ‹Ÿæœºå‚æ•° -XX:BiasedLockingBulkRebiasThresholdï¼Œé»˜è®¤ä¸º 20ï¼‰ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºä¼šå®£å¸ƒè¿™ä¸ªç±»çš„åå‘é”å¤±æ•ˆã€‚")]),s._v(" "),a("p",[s._v("å…·ä½“çš„åšæ³•ä¾¿æ˜¯åœ¨æ¯ä¸ªç±»ä¸­ç»´æŠ¤ä¸€ä¸ª epoch å€¼ï¼Œä½ å¯ä»¥ç†è§£ä¸ºç¬¬å‡ ä»£åå‘é”ã€‚å½“è®¾ç½®åå‘é”æ—¶ï¼ŒJava è™šæ‹Ÿæœºéœ€è¦å°†è¯¥ epoch å€¼å¤åˆ¶åˆ°é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸­ã€‚")]),s._v(" "),a("p",[s._v("åœ¨å®£å¸ƒæŸä¸ªç±»çš„åå‘é”å¤±æ•ˆæ—¶ï¼ŒJava è™šæ‹Ÿæœºå®åˆ™å°†è¯¥ç±»çš„ epoch å€¼åŠ  1ï¼Œè¡¨ç¤ºä¹‹å‰é‚£ä¸€ä»£çš„åå‘é”å·²ç»å¤±æ•ˆã€‚è€Œæ–°è®¾ç½®çš„åå‘é”åˆ™éœ€è¦å¤åˆ¶æ–°çš„ epoch å€¼ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†ä¿è¯å½“å‰æŒæœ‰åå‘é”å¹¶ä¸”å·²åŠ é”çš„çº¿ç¨‹ä¸è‡³äºå› æ­¤ä¸¢é”ï¼ŒJava è™šæ‹Ÿæœºéœ€è¦éå†æ‰€æœ‰çº¿ç¨‹çš„ Java æ ˆï¼Œæ‰¾å‡ºè¯¥ç±»å·²åŠ é”çš„å®ä¾‹ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ ‡è®°å­—æ®µä¸­çš„ epoch å€¼åŠ  1ã€‚è¯¥æ“ä½œéœ€è¦æ‰€æœ‰çº¿ç¨‹å¤„äºå®‰å…¨ç‚¹çŠ¶æ€ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœæ€»æ’¤é”€æ•°è¶…è¿‡å¦ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¯¹åº” Java è™šæ‹Ÿæœºå‚æ•° -XX:BiasedLockingBulkRevokeThresholdï¼Œé»˜è®¤å€¼ä¸º 40ï¼‰ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºä¼šè®¤ä¸ºè¿™ä¸ªç±»å·²ç»ä¸å†é€‚åˆåå‘é”ã€‚æ­¤æ—¶ï¼ŒJava  è™šæ‹Ÿæœºä¼šæ’¤é”€è¯¥ç±»å®ä¾‹çš„åå‘é”ï¼Œå¹¶ä¸”åœ¨ä¹‹åçš„åŠ é”è¿‡ç¨‹ä¸­ç›´æ¥ä¸ºè¯¥ç±»å®ä¾‹è®¾ç½®è½»é‡çº§é”ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æ€»ç»“ä¸å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“ä¸å®è·µ"}},[s._v("#")]),s._v(" æ€»ç»“ä¸å®è·µ")]),s._v(" "),a("p",[s._v("ä»Šå¤©æˆ‘ä»‹ç»äº† Java è™šæ‹Ÿæœºä¸­ synchronized å…³é”®å­—çš„å®ç°ï¼ŒæŒ‰ç…§ä»£ä»·ç”±é«˜è‡³ä½å¯åˆ†ä¸ºé‡é‡çº§é”ã€è½»é‡çº§é”å’Œåå‘é”ä¸‰ç§ã€‚")]),s._v(" "),a("p",[s._v("é‡é‡çº§é”ä¼šé˜»å¡ã€å”¤é†’è¯·æ±‚åŠ é”çš„çº¿ç¨‹ã€‚å®ƒé’ˆå¯¹çš„æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶ç«äº‰åŒä¸€æŠŠé”çš„æƒ…å†µã€‚Java è™šæ‹Ÿæœºé‡‡å–äº†è‡ªé€‚åº”è‡ªæ—‹ï¼Œæ¥é¿å…çº¿ç¨‹åœ¨é¢å¯¹éå¸¸å°çš„ synchronized ä»£ç å—æ—¶ï¼Œä»ä¼šè¢«é˜»å¡ã€å”¤é†’çš„æƒ…å†µã€‚")]),s._v(" "),a("p",[s._v("è½»é‡çº§é”é‡‡ç”¨ CAS æ“ä½œï¼Œå°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µæ›¿æ¢ä¸ºä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰çº¿ç¨‹æ ˆä¸Šçš„ä¸€å—ç©ºé—´ï¼Œå­˜å‚¨ç€é”å¯¹è±¡åŸæœ¬çš„æ ‡è®°å­—æ®µã€‚å®ƒé’ˆå¯¹çš„æ˜¯å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒæ—¶é—´æ®µç”³è¯·åŒä¸€æŠŠé”çš„æƒ…å†µã€‚")]),s._v(" "),a("p",[s._v("åå‘é”åªä¼šåœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶é‡‡ç”¨ CAS æ“ä½œï¼Œåœ¨é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¸­è®°å½•ä¸‹å½“å‰çº¿ç¨‹çš„åœ°å€ã€‚åœ¨ä¹‹åçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŒæœ‰è¯¥åå‘é”çš„çº¿ç¨‹çš„åŠ é”æ“ä½œå°†ç›´æ¥è¿”å›ã€‚å®ƒé’ˆå¯¹çš„æ˜¯é”ä»…ä¼šè¢«åŒä¸€çº¿ç¨‹æŒæœ‰çš„æƒ…å†µã€‚")]),s._v(" "),a("p",[s._v("ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸ªåŠé—´ä¼ é—»ï¼šè°ƒç”¨ Object.hashCode() ä¼šå…³é—­è¯¥å¯¹è±¡çš„åå‘é” [1]ã€‚")]),s._v(" "),a("p",[s._v("ä½ å¯ä»¥é‡‡ç”¨å‚æ•° -XX:+PrintBiasedLockingStatistics æ¥æ‰“å°å„ç±»é”çš„ä¸ªæ•°ã€‚ç”±äº C2 ä½¿ç”¨çš„æ˜¯å¦å¤–ä¸€ä¸ªå‚æ•°  -XX:+PrintPreciseBiasedLockingStatisticsï¼Œå› æ­¤ä½ å¯ä»¥é™åˆ¶ Java è™šæ‹Ÿæœºä»…ä½¿ç”¨ C1  æ¥å³æ—¶ç¼–è¯‘ï¼ˆå¯¹åº”å‚æ•° -XX:TieredStopAtLevel=1ï¼‰ã€‚")]),s._v(" "),a("ol",[a("li",[s._v("é€šè¿‡å‚æ•° -XX:+UseBiasedLockingï¼Œæ¯”è¾ƒå¼€å…³åå‘é”æ—¶çš„è¾“å‡ºç»“æœã€‚")]),s._v(" "),a("li",[s._v("åœ¨ main æ–¹æ³•çš„å¾ªç¯å‰æ·»åŠ  lock.hashCode è°ƒç”¨ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚")]),s._v(" "),a("li",[s._v("åœ¨ Lock ç±»ä¸­å¤å†™ hashCode æ–¹æ³•ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚")]),s._v(" "),a("li",[s._v("åœ¨ main æ–¹æ³•çš„å¾ªç¯å‰æ·»åŠ  System.identityHashCode è°ƒç”¨ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºç»“æœã€‚")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n// Run with -XX:+UnlockDiagnosticVMOptions -XX:+PrintBiasedLockingStatistics -XX:TieredStopAtLevel=1\n\npublic class SynchronizedTest {\n\n \n\n  static Lock lock = new Lock();\n\n  static int counter = 0;\n\n \n\n  public static void foo() {\n\n    synchronized (lock) {\n\n      counter++;\n\n    }\n\n  }\n\n \n\n  public static void main(String[] args) throws InterruptedException {\n\n    // lock.hashCode(); // Step 2\n\n    // System.identityHashCode(lock); // Step 4\n\n    for (int i = 0; i < 1_000_000; i++) {\n\n      foo();\n\n    }\n\n  }\n\n \n\n  static class Lock {\n\n    // @Override public int hashCode() { return 0; } // Step 3\n\n  }\n\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br")])]),a("p",[s._v("[1] https://blogs.oracle.com/dave/biased-locking-in-hotspot")]),s._v(" "),a("h2",{attrs:{id:"ç²¾é€‰ç•™è¨€-35"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç²¾é€‰ç•™è¨€-35"}},[s._v("#")]),s._v(" ç²¾é€‰ç•™è¨€(35)")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("è°¢é˜³")]),s._v(" "),a("p",[s._v("2018-08-23")]),s._v(" "),a("p",[s._v("10")]),s._v(" "),a("p",[s._v("å¦‚æœä¸æ˜¯ Xâ€¦X01ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ã€‚ç¬¬ä¸€ï¼Œè¯¥çº¿ç¨‹é‡å¤è·å–åŒä¸€æŠŠé”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†é”è®°å½•æ¸…é›¶ï¼Œä»¥ä»£è¡¨è¯¥é”è¢«é‡å¤è·å–ã€‚ç¬¬äºŒï¼Œå…¶ä»–çº¿ç¨‹æŒæœ‰è¯¥é”ã€‚æ­¤æ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šå°†è¿™æŠŠé”è†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œå¹¶ä¸”é˜»å¡å½“å‰çº¿ç¨‹ã€‚")]),s._v(" "),a("p",[s._v("è€å¸ˆè¿™æ®µä¸å¤ªæ˜ç™½ã€‚1 é”è®°å½•æ¸…é›¶æ€ä¹ˆç†è§£ï¼Ÿæ”¹å˜é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå—ï¼Ÿ2 é”è†¨èƒ€çš„æ—¶å€™å…¶ä»–çº¿ç¨‹è¿˜æŒæœ‰é”å¯¹è±¡å§ï¼Œè¿™ä¸ªæ—¶å€™è†¨èƒ€ä¼šå…·ä½“åšä»€ä¹ˆæ“ä½œï¼Ÿå¦‚æœæ“ä½œäº†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µä¼šå½±å“ç¨åé‡Šæ”¾é”çš„caså—")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("çˆªå“‡å¤œæœªçœ ")]),s._v(" "),a("p",[s._v("2018-08-22")]),s._v(" "),a("p",[s._v("10")]),s._v(" "),a("p",[s._v("å¤ªæŠ½è±¡äº†ï¼Œè€å¸ˆèƒ½ç”»ç‚¹å„¿å›¾å—â€¦â€¦")]),s._v(" "),a("p",[s._v("ä½œè€…å›å¤: ä¸å¥½æ„æ€å“ˆï¼Œå› ä¸ºç½‘ä¸Šæœ‰å¾ˆå¤šå›¾ï¼Œå¿˜äº†æ”¾ä¸ªé“¾æ¥äº†ã€‚")]),s._v(" "),a("p",[s._v("ä½ å¯ä»¥å‚è€ƒwiki.openjdk.java.net/display/HotSpot/Synchronizationä¸­çš„å›¾ã€‚")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("godtrue")]),s._v(" "),a("p",[s._v("2018-09-01")]),s._v(" "),a("p",[s._v("7")]),s._v(" "),a("p",[s._v("æ©ï¼Œä»Šå¤©æ‰è¡¥ä¸Šå°ç»“ï¼Œå› ä¸ºå¬ä¸æ˜ç™½äº†ï¼Œåæ¥åå¤å¬ä»¥åŠè¡¥ä¸Šé”çš„ç›¸å…³çŸ¥è¯†æ‰æœ‰ç‚¹æ˜ç™½ã€‚\næˆ‘è®¤ä¸ºé›¨è¿ªç¡®å®åº”è¯¥è¡¥ä¸Šç‚¹å›¾ï¼Œè¿™æ ·æ‰æ›´å®¹æ˜“ç†è§£ï¼Œå¦åˆ™ç¡®å®æŠ½è±¡ï¼Œå¦å¤–ï¼Œæˆ‘è§‰å¾—è®²è§£çš„æ¬¡åºæœ‰ç‚¹å°é—®é¢˜ã€‚\nå¦‚æœè¿™æ ·è®²å°±æ›´å®¹æ˜“ç†è§£äº†ï¼ˆä¸ªäººè§è§£ï¼‰\n1:è®²è§£ä¸€ä¸‹é”çš„æœ¬è´¨ï¼Œé”åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿé”çš„ç‰¹ç‚¹å®¹æ˜“ç†è§£ï¼Œæ¯•ç«Ÿéƒ½è§è¿‡æ‘¸è¿‡ç”¨è¿‡")]),s._v(" "),a("p",[s._v("2:è®²è§£ä¸€ä¸‹é”çš„åˆ†ç±»å’Œç‰¹ç‚¹ï¼Œä»€ä¹ˆè¡¨é”ã€è¡Œé”ã€è‡ªæ—‹é”ã€å¯é‡ç”¨é”ã€è½»é‡é”ã€é‡é‡é”ã€é˜»å¡é”ã€çº¿ç¨‹é”ã€è¿›ç¨‹é”ã€åˆ†å¸ƒå¼é”ã€åå‘é”ç­‰ç­‰å§ï¼éƒ½æ˜¯ç«™åœ¨ä¸åŒçš„è§’åº¦æˆ–å±‚çº§æ ¹æ®é”çš„ç‰¹ç‚¹ï¼Œä¸ºäº†å¥½åŒºåˆ†ç»™é”èµ·çš„åå­—")]),s._v(" "),a("p",[s._v("3:è®²è§£ä¸€ä¸‹JVMä¸­çš„å„ç§é”ï¼Œè®²è§£ä¸€ä¸‹ä»–ä»¬çš„ç‰¹ç‚¹å’Œå®ç°ï¼Œç„¶åè®²è§£ä¸€ä¸‹å’±ä»¬æœ¬èŠ‚çš„ä¸»è§’æ˜¯å±äºå“ªä¸€ç§æˆ–å“ªå‡ ç§é”")]),s._v(" "),a("p",[s._v("4:æˆ‘çš„ç†è§£ï¼Œé”çš„æœ¬è´¨-åœ¨ç¨‹åºä¸–ç•Œé‡Œæ˜¯ä¸€ç§ä¿è¯èµ„æºæ­£ç¡®ç«äº‰çš„æœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰å¯¹åŒä¸€èµ„æºç«äº‰ä¹Ÿå°±æ²¡æœ‰äº†é”å­˜åœ¨çš„æ„ä¹‰ï¼Œåœ¨è®¡ç®—ä¸–ç•Œä¸­èµ„æºå¼•èµ·ç«äº‰çš„æ ¸å¿ƒåŸºæœ¬æ˜¯ç©ºé—´ï¼Œæœ‰å…¶æ˜¯è®¡ç®—æœºçš„å†…å­˜ç©ºé—´ï¼Œå½“ç„¶æ•°æ®è‚¯å®šä¹Ÿæ˜¯ä¸€ç§å¼•èµ·æ¿€çƒˆç«äº‰çš„èµ„æºï¼Œä¸è¿‡å¾€å¾€ä¼šä½“ç°åˆ°ç©ºé—´ä¸Šå»ï¼Œå› ä¸ºè®¡ç®—æœºä¸­çš„æ•°æ®å¿…å®šå­˜äºæŸç©ºé—´åœ°å€ä¹‹ä¸­çš„")]),s._v(" "),a("p",[s._v("5:æ„Ÿè§‰æ˜ç™½å¯é‡ç”¨é”çš„å®ç°åŸç†äº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯é›¨è¿ªè®²çš„æœ€ç»†è‡´çš„ä¸€ç§å®ç°æ–¹å¼ï¼Œæ©ï¼Œéå¸¸æ„Ÿè°¢ğŸ™")]),s._v(" "),a("p",[s._v("ä½œè€…å›å¤: å¤šè°¢å»ºè®®ï¼")]),s._v(" "),a("p",[s._v("æœ¬æ–‡çš„è®²è§£æµç¨‹æ˜¯ä»é€šç”¨é”ç®—æ³•åˆ°é’ˆå¯¹ç‰¹æ®Šæƒ…å†µçš„é”ç®—æ³•æ¥çš„ã€‚ä¸€å¼€å§‹monitorenteræ˜¯ç”¨é‡å‹é”çš„ï¼Œç„¶åä¸ºäº†é’ˆå¯¹æ²¡æœ‰ç«äº‰é”çš„æƒ…å†µæœ‰äº†è½»å‹é”ï¼Œå†ç„¶åä¸ºäº†é’ˆå¯¹åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªé”çš„æƒ…å†µæœ‰äº†åå‘é”ã€‚")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("QlDoors")]),s._v(" "),a("p",[s._v("2018-11-21")]),s._v(" "),a("p",[s._v("5")]),s._v(" "),a("p",[s._v("ç»ƒä¹ è¯•äº†æ— æ•°éï¼Œéƒ½æ²¡æœ‰åå‘é”ï¼Œåæ¥ä¸Šç½‘æŸ¥æ‰å‘ç°éœ€è¦åŠ -XX:BiasedLockingStartupDelay=0ã€‚")]),s._v(" "),a("p",[s._v("http://zhizus.com/2018-09-03-%E5%81%8F%E5%90%91%E9%94%81.html")]),s._v(" "),a("p",[s._v("æ³¨æ„ï¼šHotspotè™šæ‹Ÿæœºåœ¨å¼€æœºå¯åŠ¨åæœ‰ä¸ªå»¶è¿Ÿï¼ˆ4sï¼‰ï¼Œç»è¿‡å»¶è¿Ÿåæ‰ä¼šå¯¹æ¯ä¸ªåˆ›å»ºçš„å¯¹è±¡å¼€å¯åå‘é”ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸‹é¢çš„å‚æ•°æ¥ä¿®æ”¹è¿™ä¸ªå»¶è¿Ÿï¼Œæˆ–è€…ç›´æ¥sleepä¸€æ®µæ—¶é—´-XX:BiasedLockingStartupDelay=0")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("code-arti...")]),s._v(" "),a("p",[s._v("2018-08-26")]),s._v(" "),a("p",[s._v("4")]),s._v(" "),a("p",[s._v("â€œå½“è¿›è¡Œè§£é”æ“ä½œæ—¶ï¼Œå¦‚æœå½“å‰é”è®°å½•ï¼ˆä½ å¯ä»¥å°†ä¸€ä¸ªçº¿ç¨‹çš„æ‰€æœ‰é”è®°å½•æƒ³è±¡æˆä¸€ä¸ªæ ˆç»“æ„ï¼Œæ¯æ¬¡åŠ é”å‹å…¥ä¸€æ¡é”è®°å½•ï¼Œè§£é”å¼¹å‡ºä¸€æ¡é”è®°å½•ï¼Œå½“å‰é”è®°å½•æŒ‡çš„ä¾¿æ˜¯æ ˆé¡¶çš„é”è®°å½•ï¼‰çš„å€¼ä¸º 0ï¼Œåˆ™ä»£è¡¨é‡å¤è¿›å…¥åŒä¸€æŠŠé”ï¼Œç›´æ¥è¿”å›å³å¯ã€‚â€\nè¿™ç§æƒ…å†µä¹Ÿéœ€è¦å¼¹å‡ºå½“å‰é”è®°å½•çš„å§ï¼Ÿ ä¸ç„¶é”è®°å½•ä¸€ç›´æ˜¯0ä¸å˜äº†ã€‚ å¦‚æœæ˜¯æˆ‘è¿™æ ·ç†è§£çš„è¯ï¼Œé‡å¤è·å–åŒä¸€æŠŠé”çš„è¯ï¼Œä¸æ˜¯ç®€å•åœ°æ¸…é›¶ï¼Œè€Œåº”è¯¥æ˜¯æŠŠ0ä½œä¸ºä¸€æ¡æ–°çš„é”è®°å½•å‹å…¥æ ˆé¡¶ã€‚\nä¸çŸ¥é“æˆ‘è¿™æ ·ç†è§£å¯¹ä¸ï¼Ÿè¯·è€å¸ˆæŒ‡ç‚¹")]),s._v(" "),a("p",[s._v("ä½œè€…å›å¤: å¯¹çš„ï¼èµ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("NEOğŸ‹")]),s._v(" "),a("p",[s._v("2018-08-22")]),s._v(" "),a("p",[s._v("3")]),s._v(" "),a("p",[s._v("è€å¸ˆå…³äºåå‘é”æœ‰ä¸ªç–‘é—® â€œå®ƒé’ˆå¯¹çš„æ˜¯é”ä»…ä¼šè¢«åŒä¸€çº¿ç¨‹æŒæœ‰çš„æƒ…å†µã€‚â€ å¦‚æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é” è¿˜æœ‰å¿…è¦åŠ é”å—ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä½œè€…å›å¤: å“ˆï¼Œè¿™ä¸ªå±äºåº”ç”¨ç¨‹åºçš„é—®é¢˜ï¼ŒJVMåªæ˜¯è§‚å¯Ÿåˆ°è¿™ç§æƒ…å†µï¼Œå¹¶å°è¯•åšå‡ºä¼˜åŒ–ã€‚")]),s._v(" "),a("p",[s._v("æœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹é¢‘ç¹åŠ é”ï¼Œåé¢æ¢æˆå¦å¤–çš„çº¿ç¨‹ï¼Œè¿™æ ·å‰é¢é‚£æ®µæ—¶é—´å¯ä»¥ç”¨åå‘é”ã€‚")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("è´¾æ™ºæ–‡")]),s._v(" "),a("p",[s._v("2018-08-22")]),s._v(" "),a("p",[s._v("2")]),s._v(" "),a("p",[s._v("æ–‡ä¸­è¯´è½»é‡çº§é”å› ä¸ºå†…å­˜å¯¹é½æ‰€ä»¥æ ‡è¯†ä½æ˜¯00ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆé‡é‡çº§é”çš„æ—¶å€™ï¼Œå­˜å‚¨å†…å®¹ä¹Ÿæ˜¯æŒ‡é’ˆï¼Œå´æ²¡æœ‰å†…å­˜å¯¹é½å‘¢ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("ä½•yuan")]),s._v(" "),a("p",[s._v("2018-08-22")]),s._v(" "),a("p",[s._v("2")]),s._v(" "),a("p",[s._v("ä¸€ç›´è®¤ä¸ºsynchronizedæ˜¯é‡é‡é”ï¼Œæ˜¯å¦ä¹Ÿä¸ä¸€å®šï¼Ÿjvmå¤„ç†çš„æ—¶å€™æ˜¯å…ˆå°†å½“åå‘é”å¤„ç†ï¼Œç„¶åæ…¢æ…¢è†¨èƒ€ä¸ºé‡é‡çº§é”çš„æ˜¯å—ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä½œè€…å›å¤: é»˜è®¤æƒ…å†µä¸‹æ˜¯çš„ã€‚ä»¥å‰æœ‰ä¸ªå»¶ç¼“æ¯«ç§’æ•°-XX:BiasedLockingStartupDelayï¼Œä¸€å¼€å§‹ç”¨è½»é‡çº§é”ï¼Œåœ¨å¯åŠ¨å››ç§’ä¹‹åæ‰å¼€å§‹ç”¨åå‘é”ã€‚æˆ‘è®°å¾—Java 9è¿˜æ˜¯10é»˜è®¤å€¼æ”¹ä¸º0äº†ã€‚")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("Geek_98716...")]),s._v(" "),a("p",[s._v("2018-10-18")]),s._v(" "),a("p",[s._v("1")]),s._v(" "),a("p",[s._v('è€å¸ˆè¯·æ•™ä¸ªé—®é¢˜ï¼š\n1ï¼šé”ä»åå‘ä¸€ç›´åˆ°é‡é‡çº§çš„è¿‡ç¨‹æ˜¯"å•å‘ä¸å¯é€†"çš„ï¼Œè¿™ä¸ª"å•å‘ä¸å¯é€†"æ˜¯é™åˆ¶åœ¨å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œè¿˜æ˜¯åœ¨å¯¹è±¡åˆ°è¾¾äº†æŸä¸ªçŠ¶æ€åå†æ¬¡æœ‰çº¿ç¨‹ä½¿ç”¨å…¶ä½œä¸ºé”å¯¹è±¡è¿˜ä¼šç»§ç»­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Ÿä»æ¯æ’¤é”€ä¸€æ¬¡å¯¹è±¡çš„epochå€¼å°±ä¼š+1ï¼Œè€Œè¿™ä¸ª+1ä»£è¡¨çš„å°±æ˜¯åå‘é”å‡çº§ä¸ºè½»é‡çº§é”ï¼Œè€Œæ¯ä¸ªå¯¹è±¡åˆç»´æŠ¤äº†ä¸€ä¸ªepochå€¼ä»£è¡¨å¯¹è±¡æ’¤é”€æ¬¡æ•°ï¼ˆåå‘é”->è½»é‡çº§é”æ¬¡æ•°ï¼‰ï¼Œæ˜¯ä¸æ˜¯å°±ä»£è¡¨è¿™ä¸ªé”å‡çº§çš„è¿‡ç¨‹ä¼šåœ¨ä¸åŒçš„æ—¶é—´æ®µé‡å¤å‘ç”Ÿnè¯ï¼Ÿ\n2ï¼šä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸€ä¸ªæœ€å¤§çš„æ’¤é”€æ¬¡æ•°ï¼ˆepochå€¼ï¼‰ï¼Œæ„ä¹‰åœ¨å“ªé‡Œï¼Ÿ')]),s._v(" "),a("p",[s._v("ä½œè€…å›å¤: 1. å•å‘ä¸å¯é€† é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚")]),s._v(" "),a("p",[s._v("epoch+1å‘ç”Ÿåœ¨å¤šæ¬¡åŒä¸€ç±»å‹çš„å®ä¾‹çš„åå‘é”æ’¤é”€ä¹‹åï¼Œå­˜æ”¾åœ¨ç±»å‹(Class)é‚£é‡Œçš„ã€‚")]),s._v(" "),a("p",[s._v("\\2. å½“é¢‘ç¹æ£€æµ‹åˆ°æŸä¸ªç±»çš„å®ä¾‹å‡ºç°æ’¤é”€åå‘é”çš„ï¼Œå°±ä»£è¡¨è¿™ä¸ªç±»ä¸é€‚åˆç”¨æ¥æåå‘é”ã€‚")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("Scott")]),s._v(" "),a("p",[s._v("2018-08-22")]),s._v(" "),a("p",[s._v("1")]),s._v(" "),a("p",[s._v("è¯·æ•™ä¸€ä¸‹ï¼Œä¸æ˜¯å¾ˆæ˜ç™½epochçš„ä½œç”¨ï¼Œåå‘é”é»˜è®¤è¢«æ’¤é”€20æ¬¡ä½¿åå‘é”å¤±æ•ˆæ‰æ›´æ–°è¿™ä¸ªå­—æ®µï¼Œæ²¡æœ‰æƒ³æ˜ç™½epochçš„å¿…è¦æ€§")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("(^o^)")]),s._v(" "),a("p",[s._v("2018-08-22")]),s._v(" "),a("p",[s._v("1")]),s._v(" "),a("p",[s._v("â€œå¦åˆ™ï¼ŒJava è™šæ‹Ÿæœºä¼šå°è¯•ç”¨ CAS æ“ä½œï¼Œæ¯”è¾ƒé”å¯¹è±¡çš„æ ‡è®°å­—æ®µçš„å€¼æ˜¯å¦ä¸ºå½“å‰é”è®°å½•çš„åœ°å€ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›¿æ¢ä¸ºé”è®°å½•ä¸­çš„å€¼ï¼Œä¹Ÿå°±æ˜¯é”å¯¹è±¡åŸæœ¬çš„æ ‡è®°å­—æ®µã€‚æ­¤æ—¶ï¼Œè¯¥çº¿ç¨‹å·²ç»æˆåŠŸé‡Šæ”¾è¿™æŠŠé”ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä¸æ˜¯ï¼Œåˆ™æ„å‘³ç€è¿™æŠŠé”å·²ç»è¢«è†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚â€å‡çº§ä¸ºé‡é‡çº§é”çš„è¿‡ç¨‹ï¼Œä¼šæ”¹å˜é”å¯¹è±¡çš„ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("æäº®äº®")]),s._v(" "),a("p",[s._v("2019-04-10")]),s._v(" "),a("p",[s._v("ä¸€ä¸ªæ’¤é”€é˜€å€¼ä¸º40ï¼Œä¸€ä¸ªæ’¤é”€é˜€å€¼ä¸º20 ï¼Œ20è¿™ä¸ªè¡¨ç¤ºè¶…è¿‡è¿™ä¸ªæ¬¡æ•°é‚£ä¸ªè¿™ä¸ªåå‘é”å°±æ¢ä»£äº†ã€‚epochçš„å€¼åŠ 1ï¼Œå¦‚æœæ’¤é”€æ¬¡æ•°è¶…è¿‡40å°±è¯æ˜è¿™ä¸ªç±»ä¸é€‚åˆä½¿ç”¨åå‘é”ã€‚ç…§è¿™ä¸ªæ•°æ®æ¥è®²æ˜¯ä¸æ˜¯æ„å‘³ç€å·®ä¸å¤šæ¢2ä»£å°±è¡¨ç¤ºè¯¥ç±»ä¸é€‚åˆåå‘é”äº†ï¼Œä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("ã‚ã€ä»Šç”Ÿç»...")]),s._v(" "),a("p",[s._v("2019-04-08")]),s._v(" "),a("p",[s._v("é›¨è¿ªè€å¸ˆï¼Œæˆ‘æœ‰ä¸ªç–‘é—®ï¼šå‡è®¾çº¿ç¨‹AåŠ é”ï¼ŒCASå°†é”å¯¹è±¡å¯¹è±¡å¤´æ›¿æ¢æˆæŒ‡å‘çº¿ç¨‹Açš„Lock Recordçš„åœ°å€ï¼Œåœ¨è¿™é‡Œï¼ŒåŸå€¼ï¼šå¯¹è±¡mark wordä¸­çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯hashcodeï¼ŒæœŸæœ›å€¼ï¼šæœ¬çº¿ç¨‹Lock  Recordåœ°å€ï¼Œå¯¹è±¡ï¼šé”å¯¹è±¡ï¼Œåœ¨æ›¿æ¢æˆåŠŸåæˆ‘ä»¬è¯´çº¿ç¨‹Aè·å¾—äº†é”ï¼ŒOKï¼Œçº¿ç¨‹Aå¼€å§‹æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œåœ¨å®ƒæ‰§è¡Œå®Œä¹‹å‰ï¼Œçº¿ç¨‹Bæ¥è·å–é”ï¼Œå‘ç°å±äºè½»é‡çº§é”æ ‡å¿—ï¼Œäºæ˜¯CASæ›¿æ¢mark wordï¼Œæ­¤æ—¶CASçš„åŸå€¼ä»ç„¶ä¸ºä¸ºé”å¯¹è±¡çš„mark wordå§ï¼Œè€Œæ­¤æ—¶é”å¯¹è±¡mark  wordä¸­è®°å½•çš„ä¸å†æ˜¯hashcodeè€Œæ˜¯æŒ‡å‘çº¿ç¨‹Açš„Lock  Recordçš„åœ°å€ï¼Œä½†æ˜¯å¯¹äºCASå®ƒç®¡ä½ å¯¹è±¡å¤´å­˜çš„æ˜¯ä»€ä¹ˆï¼Œç°åœ¨è·å–åˆ°ä»€ä¹ˆï¼Œä»€ä¹ˆå°±æ˜¯åŸå€¼ï¼Œäºæ˜¯ï¼šåŸå€¼ï¼šå¯¹è±¡å¤´ä¸­æŒ‡å‘çº¿ç¨‹Aä¸­LRçš„åœ°å€ï¼ŒæœŸæœ›å€¼ï¼šçº¿ç¨‹Bä¸­LRï¼ˆç›®å‰å¯¹ä»–æ¥è¯´ï¼Œæ˜¯å°†é”å¯¹è±¡ä¸­æŒ‡å‘çº¿ç¨‹Aä¸­LRçš„åœ°å€å­˜å…¥æœ¬çº¿ç¨‹LRï¼‰çš„åœ°å€ï¼Œç›®æ ‡å¯¹è±¡ï¼šé”å¯¹è±¡ï¼Œæ€ä¹ˆä¼šCASä¸æˆåŠŸï¼Ÿäºæ˜¯ç°åœ¨çº¿ç¨‹Bä¹Ÿè·å–åˆ°é”ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šåœ¨æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼æˆ‘è§‰å¾—æˆ‘ç†è§£çš„å“ªå—ä¸å¯¹ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("ç‹è‚–æ­¦")]),s._v(" "),a("p",[s._v("2019-03-07")]),s._v(" "),a("p",[s._v("â€œå½“è¿›è¡ŒåŠ é”æ“ä½œæ—¶ï¼ŒJava è™šæ‹Ÿæœºä¼šåˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯é‡é‡çº§é”ã€‚å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šåœ¨å½“å‰çº¿ç¨‹çš„å½“å‰æ ˆæ¡¢ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ï¼Œä½œä¸ºè¯¥é”çš„é”è®°å½•ï¼Œå¹¶ä¸”å°†é”å¯¹è±¡çš„æ ‡è®°å­—æ®µå¤åˆ¶åˆ°è¯¥é”è®°å½•ä¸­ã€‚â€\næœ‰ä¸ªç–‘é—®éº»çƒ¦è€å¸ˆå¸®è§£ç­”ä¸€ä¸‹ï¼šæ ˆå¸§ä¸æ˜¯ä¸€éè¿ç»­çš„ç©ºé—´å—ï¼Ÿå¤§å°ä¸æ˜¯å›ºå®šçš„å—ï¼Ÿåˆ’å‡ºçš„ç©ºé—´æ˜¯ä»å“ªé‡Œåˆ†é…å‡ºæ¥çš„å‘¢ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("lincolnï¿½ï¿½ï¿½...")]),s._v(" "),a("p",[s._v("2019-02-26")]),s._v(" "),a("p",[s._v("æ‚¨å¥½ï¼Œæ–‡ç« å†™çš„æŒºå¥½ï¼Œè¯»å®Œæœ‰ä¸ªé—®é¢˜æƒ³è¯·æ•™ä¸‹ï¼š\nå½“t1çº¿ç¨‹è·å–äº†æŸä¸ªå¯¹è±¡é”ï¼ˆlock1ï¼‰çš„åå‘é”ï¼Œè¿˜æ²¡æ‰§è¡Œå®Œçš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹t2ä¹Ÿå°è¯•è·å–è¿™ä¸ªå¯¹è±¡é”(lock1)ï¼Œæˆ‘çœ‹æ–‡ç« ä¸Šè¯´éœ€è¦æ’¤é”€åå‘é”ï¼Œç­‰åˆ°è¾¾å®‰å…¨ç‚¹çš„æ—¶å€™ï¼Œå†å°†åå‘é”æ›¿æ¢æˆè½»é‡çº§é”ã€‚\næˆ‘æœ‰ä¸ªé—®é¢˜ï¼šä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ç«äº‰åŒä¸€æŠŠé”çš„æƒ…å†µï¼Œè½»é‡çº§é”ä¹Ÿè§£å†³ä¸äº†å§ï¼Œåªèƒ½ç”¨é‡é‡çº§é”è§£å†³å§ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦æ›¿æ¢æˆè½»é‡çº§é”å‘¢ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("LINEZH")]),s._v(" "),a("p",[s._v("2019-02-15")]),s._v(" "),a("p",[s._v("æœ‰ä¸€ä¸ªç–‘é—®, JVMæ˜¯å¦‚ä½•é€‰æ‹©ä½¿ç”¨é‡é‡é”/è½»é‡é”/è‡ªæ—‹é”å‘¢? æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™æ ¹æ®é”å’Œçº¿ç¨‹çš„æƒ…å†µå†³å®šå—, èƒ½ä¸èƒ½è¯´çš„å…·ä½“ä¸€ç‚¹?")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("ç¬¬9æ ¹çƒŸ")]),s._v(" "),a("p",[s._v("2019-01-08")]),s._v(" "),a("p",[s._v("è¿™è¾¹éªŒè¯äº†Object.hashCode() ä¸ä¼šå…³é—­è¯¥å¯¹è±¡çš„åå‘é”ã€‚ã€‚ä¸çŸ¥é“æœ€åç­”æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿå“ªé‡Œæœ‰å…¨ç¯‡çš„è¯¾åä½œä¸šçš„ç­”æ¡ˆï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("fangxuan")]),s._v(" "),a("p",[s._v("2019-01-05")]),s._v(" "),a("p",[s._v("å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå¼€å¯åå‘é”å’Œä¸å¼€å¯åå‘é”ï¼Œæ€§èƒ½ä¸Šæœ‰ä»€ä¹ˆå·®åˆ«å—ï¼Ÿå·®åˆ«åœ¨å“ªå„¿ï¼Ÿ")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("yihang")]),s._v(" "),a("p",[s._v("2018-12-27")]),s._v(" "),a("p",[s._v("è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘æ˜¯è¿™å‡ å¤©æ‰å¼€å§‹å­¦ä¹ è¿™ä¸ªä¸“æ ã€‚æœ‰è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼Œè§‰å¾—è¯»å®Œæ–‡ç« ä¹Ÿæœªèƒ½æ‰¾åˆ°ç­”æ¡ˆï¼Œè¯·è€å¸ˆè§£ç­”ï¼š\n1ï¼‰ å¦‚æœè½»é‡çº§é”å·²ç»å‘ç°æœ‰ç«äº‰ï¼Œè†¨èƒ€ä¸ºé‡é‡çº§é”ï¼Œé‚£ä¹ˆä¹‹å‰æ‹¥æœ‰é”çš„çº¿ç¨‹ï¼Œè§£é”æ—¶ä¼šå”¤é†’è¯¥å¯¹è±¡ä¸Šçš„é˜»å¡çº¿ç¨‹ã€‚è¿™å¥è¯æˆ‘ç†è§£äº†ï¼Œä½†è¿™æ—¶å¯¹è±¡ä¸Šçš„Mark  Word è¿˜æ˜¯é‡é‡çº§é”çš„æŒ‡é’ˆï¼ˆçŠ¶æ€10ï¼‰å—ï¼Ÿç›´åˆ°æœ€åä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾äº†é”ï¼Œå¯¹è±¡ä¸Šçš„Mark Word ä»ç„¶ä¿æŒçŠ¶æ€ 10  è¿˜æ˜¯ä¼šæ¢å¤åˆ°æ— é”çš„çŠ¶æ€ï¼ˆ01ï¼‰ï¼Ÿè¿˜æ˜¯ä»è¿™å¾€åå°±å§‹ç»ˆä¿æŒé‡é‡çº§é”çš„çŠ¶æ€äº†ï¼Ÿ")]),s._v(" "),a("p",[s._v("2ï¼‰åå‘é”ä¸­çš„ Rebias å’Œ revoke bias åº”è¯¥æ˜¯ä¸åŒçš„æ¦‚å¿µå§ï¼Œå­—é¢æ„æ€ï¼Œåè€…åº”è¯¥æ˜¯æ’¤é”€åå‘ï¼Œè€Œå‰è€…ä¼¼ä¹æ˜¯é‡ç”¨åå‘ã€‚ã€å¦‚æœæŸä¸€ç±»é”å¯¹è±¡çš„æ€»æ’¤é”€æ•°è¶…è¿‡äº†ä¸€ä¸ªé˜ˆå€¼ï¼ˆå¯¹åº” Java è™šæ‹Ÿæœºå‚æ•° -XX:BiasedLockingBulkRebiasThresholdï¼Œé»˜è®¤ä¸º 20ï¼‰ï¼Œé‚£ä¹ˆ Java  è™šæ‹Ÿæœºä¼šå®£å¸ƒè¿™ä¸ªç±»çš„åå‘é”å¤±æ•ˆã€‚ã€‘è¯´å®è¯è¿™å¥è¯çœŸæ²¡çœ‹æ‡‚ï¼Œä»€ä¹ˆå«ã€è¿™ä¸ªç±»çš„åå‘é”å¤±æ•ˆã€‘ï¼Œæ„Ÿè§‰è¿™ä¸ªå‚æ•°æ˜¯ä¸ºäº†ä¼˜åŒ–åå‘é”ï¼Œèƒ½å¤Ÿè®©åå‘é”å¾—ä»¥é‡ç”¨\næˆ‘åœ¨ stackoverflowä¸Šæ‰¾äº†ä¸€ç¯‡è§£é‡Šï¼š\nsubsequent bulk rebias is possible if and only if number of revokes more than  BiasedLockingBulkRebiasThreshold and less than  BiasedLockingBulkRevokeThreshold and the latest revoke was not later  than BiasedLockingDecayTime, where all escaped variables are JVM  properties.\nä¸çŸ¥é“ä»–è¯´çš„æ˜¯å¦åœ¨ç†ï¼Ÿè¯·æŒ‡æ•™ï¼Œåœ°å€ï¼šhttps://stackoverflow.com/questions/46312817/does-java-ever-rebias-an-individual-lock")]),s._v(" "),a("ul",[a("li")]),s._v(" "),a("p",[s._v("shawn")]),s._v(" "),a("p",[s._v("2018-12-26")]),s._v(" "),a("p",[s._v("è€å¸ˆå¯¹äºè½»é‡çº§é”å¯ä»¥è¿™æ ·ç†è§£ä¹ˆï¼Ÿå¦‚ä¸‹ï¼š  â€œè½»é‡çº§é”ï¼Œbçº¿ç¨‹åœ¨é”ç«äº‰æ—¶ï¼Œå‘ç°é”å·²ç»è¢«açº¿ç¨‹å ç”¨ï¼Œåˆ™bçº¿ç¨‹ä¸è¿›å…¥å†…æ ¸æ€ï¼Œè®©bçº¿ç¨‹è‡ªæ—‹ï¼Œæ‰§è¡Œç©ºå¾ªç¯ï¼Œç­‰å¾…açº¿ç¨‹é‡Šæ”¾é”ã€‚å¦‚æœï¼Œå®Œæˆè‡ªæ—‹ç­–ç•¥è¿˜æ˜¯å‘ç°açº¿ç¨‹æ²¡æœ‰é‡Šæ”¾é”ï¼Œæˆ–è€…è®©cçº¿ç¨‹å ç”¨äº†ã€‚åˆ™bçº¿ç¨‹è¯•å›¾å°†è½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”ã€‚â€")])])}),[],!1,null,null,null);a.default=t.exports}}]);