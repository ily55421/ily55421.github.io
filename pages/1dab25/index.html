<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ³¨è§£å¤„ç†å™¨ | ily55421</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220720_132133.ico">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="ğŸ’»å­¦ä¹ ğŸ“è®°å½•ğŸ”—åˆ†äº«
å­¦æ— æ­¢å¢ƒæ˜¯æ°¸è¿œå‰è¿›çš„åŸºç¡€ï¼Œè·ƒç„¶çº¸ä¸Šæ˜¯å¯¹çŸ¥è¯†çš„æ€»ç»“äº¤ä»£ï¼Œä¸ä¼—åˆ†äº«åˆ™æ˜¯å®ç°ä»·å€¼çš„æœ€å¥½æ–¹å¼ã€‚">
    <meta name="keywords" content="ily55421,golang,vue,go-web,go-admin,go-ldap-admin">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.5cf13956.css" as="style"><link rel="preload" href="/assets/js/app.e5f1d04a.js" as="script"><link rel="preload" href="/assets/js/5.5ca26c73.js" as="script"><link rel="preload" href="/assets/js/62.04285b34.js" as="script"><link rel="prefetch" href="/assets/js/10.32a16328.js"><link rel="prefetch" href="/assets/js/11.51f4dee0.js"><link rel="prefetch" href="/assets/js/12.47439b7b.js"><link rel="prefetch" href="/assets/js/13.fa6da581.js"><link rel="prefetch" href="/assets/js/14.a4af8b3e.js"><link rel="prefetch" href="/assets/js/15.1bac7980.js"><link rel="prefetch" href="/assets/js/16.c546c54e.js"><link rel="prefetch" href="/assets/js/17.efb08615.js"><link rel="prefetch" href="/assets/js/18.9b2c4127.js"><link rel="prefetch" href="/assets/js/19.638baf15.js"><link rel="prefetch" href="/assets/js/20.eae2ec52.js"><link rel="prefetch" href="/assets/js/21.6028e4c6.js"><link rel="prefetch" href="/assets/js/22.65b9e8bc.js"><link rel="prefetch" href="/assets/js/23.d38fc218.js"><link rel="prefetch" href="/assets/js/24.c702b259.js"><link rel="prefetch" href="/assets/js/25.6037b17d.js"><link rel="prefetch" href="/assets/js/26.8d2093a1.js"><link rel="prefetch" href="/assets/js/27.f00503b6.js"><link rel="prefetch" href="/assets/js/28.ae218bba.js"><link rel="prefetch" href="/assets/js/29.53603481.js"><link rel="prefetch" href="/assets/js/30.f6209a54.js"><link rel="prefetch" href="/assets/js/31.2a3dd39a.js"><link rel="prefetch" href="/assets/js/32.c76da96e.js"><link rel="prefetch" href="/assets/js/33.55338ecc.js"><link rel="prefetch" href="/assets/js/34.e4a4c9b4.js"><link rel="prefetch" href="/assets/js/35.c92aeb3b.js"><link rel="prefetch" href="/assets/js/36.8f6939f8.js"><link rel="prefetch" href="/assets/js/37.5f1cbc25.js"><link rel="prefetch" href="/assets/js/38.29a7134b.js"><link rel="prefetch" href="/assets/js/39.e9182250.js"><link rel="prefetch" href="/assets/js/40.9a91f960.js"><link rel="prefetch" href="/assets/js/41.10c04e65.js"><link rel="prefetch" href="/assets/js/42.eaf840e9.js"><link rel="prefetch" href="/assets/js/43.ec28b695.js"><link rel="prefetch" href="/assets/js/44.e3c0a33f.js"><link rel="prefetch" href="/assets/js/45.217b1ef2.js"><link rel="prefetch" href="/assets/js/46.9a3a1678.js"><link rel="prefetch" href="/assets/js/47.cfde839a.js"><link rel="prefetch" href="/assets/js/48.a1b46b15.js"><link rel="prefetch" href="/assets/js/49.958486e7.js"><link rel="prefetch" href="/assets/js/50.7f71ef15.js"><link rel="prefetch" href="/assets/js/51.379bc3d5.js"><link rel="prefetch" href="/assets/js/52.915db24c.js"><link rel="prefetch" href="/assets/js/53.2b8a25d1.js"><link rel="prefetch" href="/assets/js/54.2fb45c99.js"><link rel="prefetch" href="/assets/js/55.b580bc6b.js"><link rel="prefetch" href="/assets/js/56.f2a876b1.js"><link rel="prefetch" href="/assets/js/57.0b337b28.js"><link rel="prefetch" href="/assets/js/58.c51f72c4.js"><link rel="prefetch" href="/assets/js/59.e57a2ed8.js"><link rel="prefetch" href="/assets/js/6.3396a9ee.js"><link rel="prefetch" href="/assets/js/60.cc5d9d89.js"><link rel="prefetch" href="/assets/js/61.5f762f80.js"><link rel="prefetch" href="/assets/js/63.97495516.js"><link rel="prefetch" href="/assets/js/64.d02e2c76.js"><link rel="prefetch" href="/assets/js/65.5e7d91f2.js"><link rel="prefetch" href="/assets/js/66.b6b38a09.js"><link rel="prefetch" href="/assets/js/67.0e8ef811.js"><link rel="prefetch" href="/assets/js/68.ec22ebe4.js"><link rel="prefetch" href="/assets/js/69.6fc63975.js"><link rel="prefetch" href="/assets/js/7.0d4d4fc2.js"><link rel="prefetch" href="/assets/js/70.b95de4a1.js"><link rel="prefetch" href="/assets/js/71.6cd4b167.js"><link rel="prefetch" href="/assets/js/72.5edf7f96.js"><link rel="prefetch" href="/assets/js/73.5a1caaac.js"><link rel="prefetch" href="/assets/js/74.53473d38.js"><link rel="prefetch" href="/assets/js/8.45b70426.js"><link rel="prefetch" href="/assets/js/9.6c002df9.js"><link rel="prefetch" href="/assets/js/mermaid.f2857331.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.c013cef0.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.23884ed8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5cf13956.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220720_132208.png" alt="ily55421" class="logo"> <span class="site-name can-hide">ily55421</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•ä¸æ•°æ®ç»“æ„" class="dropdown-title"><a href="/algorithm/" class="link-title">ç®—æ³•ä¸æ•°æ®ç»“æ„</a> <span class="title" style="display:none;">ç®—æ³•ä¸æ•°æ®ç»“æ„</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/24768e/" class="nav-link">ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/pages/24770e/" class="nav-link">æ•°æ®ç»“æ„</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸“é¢˜" class="dropdown-title"><a href="/topic/" class="link-title">ä¸“é¢˜</a> <span class="title" style="display:none;">ä¸“é¢˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a4770e/" class="nav-link">æœ€ä½³å®è·µ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç”Ÿæ´»" class="dropdown-title"><a href="/life/" class="link-title">ç”Ÿæ´»</a> <span class="title" style="display:none;">ç”Ÿæ´»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bc7034/" class="nav-link">æœ€ä½³å®è·µ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç¼–ç¨‹" class="dropdown-title"><a href="/code/" class="link-title">ç¼–ç¨‹</a> <span class="title" style="display:none;">ç¼–ç¨‹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ace3fe/" class="nav-link">JAVA</a></li><li class="dropdown-item"><h4>JVM</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f2e80b/" class="nav-link">Javaè™šæ‹ŸæœºåŸºæœ¬åŸç†</a></li><li class="dropdown-subitem"><a href="/pages/bf46c5/" class="nav-link">é«˜æ•ˆç¼–è¯‘</a></li><li class="dropdown-subitem"><a href="/pages/1261df/" class="nav-link">ä»£ç ä¼˜åŒ–</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/categories/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">ç•™è¨€æ¿</a></div><div class="nav-item"><a href="https://ily55421.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æˆ‘çš„åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç®—æ³•ä¸æ•°æ®ç»“æ„" class="dropdown-title"><a href="/algorithm/" class="link-title">ç®—æ³•ä¸æ•°æ®ç»“æ„</a> <span class="title" style="display:none;">ç®—æ³•ä¸æ•°æ®ç»“æ„</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/24768e/" class="nav-link">ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/pages/24770e/" class="nav-link">æ•°æ®ç»“æ„</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸“é¢˜" class="dropdown-title"><a href="/topic/" class="link-title">ä¸“é¢˜</a> <span class="title" style="display:none;">ä¸“é¢˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/a4770e/" class="nav-link">æœ€ä½³å®è·µ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç”Ÿæ´»" class="dropdown-title"><a href="/life/" class="link-title">ç”Ÿæ´»</a> <span class="title" style="display:none;">ç”Ÿæ´»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bc7034/" class="nav-link">æœ€ä½³å®è·µ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç¼–ç¨‹" class="dropdown-title"><a href="/code/" class="link-title">ç¼–ç¨‹</a> <span class="title" style="display:none;">ç¼–ç¨‹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ace3fe/" class="nav-link">JAVA</a></li><li class="dropdown-item"><h4>JVM</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f2e80b/" class="nav-link">Javaè™šæ‹ŸæœºåŸºæœ¬åŸç†</a></li><li class="dropdown-subitem"><a href="/pages/bf46c5/" class="nav-link">é«˜æ•ˆç¼–è¯‘</a></li><li class="dropdown-subitem"><a href="/pages/1261df/" class="nav-link">ä»£ç ä¼˜åŒ–</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/categories/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">ç•™è¨€æ¿</a></div><div class="nav-item"><a href="https://ily55421.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æˆ‘çš„åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JAVA</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JVM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Javaè™šæ‹ŸæœºåŸºæœ¬åŸç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>é«˜æ•ˆç¼–è¯‘</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>ä»£ç ä¼˜åŒ–</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1261df/" class="sidebar-link">å­—æ®µè®¿é—®ç›¸å…³ä¼˜åŒ–</a></li><li><a href="/pages/55e20a/" class="sidebar-link">å¾ªç¯ä¼˜åŒ–</a></li><li><a href="/pages/3c48b1/" class="sidebar-link">å‘é‡åŒ–</a></li><li><a href="/pages/1dab25/" aria-current="page" class="active sidebar-link">æ³¨è§£å¤„ç†å™¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1dab25/#æ³¨è§£å¤„ç†å™¨çš„åŸç†" class="sidebar-link">æ³¨è§£å¤„ç†å™¨çš„åŸç†</a></li><li class="sidebar-sub-header level2"><a href="/pages/1dab25/#åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç " class="sidebar-link">åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç </a></li><li class="sidebar-sub-header level2"><a href="/pages/1dab25/#æ€»ç»“ä¸å®è·µ" class="sidebar-link">æ€»ç»“ä¸å®è·µ</a></li><li class="sidebar-sub-header level2"><a href="/pages/1dab25/#ç²¾é€‰ç•™è¨€-14" class="sidebar-link">ç²¾é€‰ç•™è¨€(14)</a></li></ul></li><li><a href="/pages/a5ec55/" class="sidebar-link">åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸Šï¼‰</a></li><li><a href="/pages/df61db/" class="sidebar-link">åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸‹ï¼‰</a></li><li><a href="/pages/c723d4/" class="sidebar-link">Javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·ï¼ˆå‘½ä»¤è¡Œç¯‡ï¼‰</a></li><li><a href="/pages/402e19/" class="sidebar-link">Javaè™šæ‹Ÿæœºçš„ç›‘æ§åŠè¯Šæ–­å·¥å…·ï¼ˆGUIç¯‡ï¼‰</a></li><li><a href="/pages/13ab6e/" class="sidebar-link">JNIçš„è¿è¡Œæœºåˆ¶</a></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E7%BC%96%E7%A8%8B%E4%B8%96%E7%95%8C" title="åˆ†ç±»" data-v-06225672>ç¼–ç¨‹ä¸–ç•Œ</a></li><li data-v-06225672><a href="/categories/?category=JVM" title="åˆ†ç±»" data-v-06225672>JVM</a></li><li data-v-06225672><a href="/categories/?category=%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96" title="åˆ†ç±»" data-v-06225672>ä»£ç ä¼˜åŒ–</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/ily55421" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>ily55421</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">æ³¨è§£å¤„ç†å™¨<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="_27-æ³¨è§£å¤„ç†å™¨"><a href="#_27-æ³¨è§£å¤„ç†å™¨" class="header-anchor">#</a> 27 | æ³¨è§£å¤„ç†å™¨</h1> <p>æ³¨è§£ï¼ˆannotationï¼‰æ˜¯ Java 5 å¼•å…¥çš„ï¼Œç”¨æ¥ä¸ºç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰ Java ç»“æ„æä¾›é¢å¤–ä¿¡æ¯çš„æœºåˆ¶ã€‚æˆ‘å…ˆä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼ŒJava æ ¸å¿ƒç±»åº“ä¸­çš„<code>@Override</code>æ³¨è§£æ˜¯è¢«ç”¨æ¥å£°æ˜æŸä¸ªå®ä¾‹æ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„åŒååŒå‚æ•°ç±»å‹çš„æ–¹æ³•ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package java.lang;

 

@Target(ElementType.METHOD)

@Retention(RetentionPolicy.SOURCE)

public @interface Override {

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>@Override</code>æ³¨è§£æœ¬èº«è¢«å¦å¤–ä¸¤ä¸ªå…ƒæ³¨è§£ï¼ˆå³ä½œç”¨åœ¨æ³¨è§£ä¸Šçš„æ³¨è§£ï¼‰æ‰€æ ‡æ³¨ã€‚å…¶ä¸­ï¼Œ<code>@Target</code>ç”¨æ¥é™å®šç›®æ ‡æ³¨è§£æ‰€èƒ½æ ‡æ³¨çš„ Java ç»“æ„ï¼Œè¿™é‡Œ<code>@Override</code>ä¾¿åªèƒ½è¢«ç”¨æ¥æ ‡æ³¨æ–¹æ³•ã€‚</p> <p><code>@Retention</code>åˆ™ç”¨æ¥é™å®šå½“å‰æ³¨è§£ç”Ÿå‘½å‘¨æœŸã€‚æ³¨è§£å…±æœ‰ä¸‰ç§ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼š<code>SOURCE</code>ï¼Œ<code>CLASS</code>æˆ–<code>RUNTIME</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ³¨è§£åªå‡ºç°åœ¨æºä»£ç ä¸­ï¼Œåªå‡ºç°åœ¨æºä»£ç å’Œå­—èŠ‚ç ä¸­ï¼Œä»¥åŠå‡ºç°åœ¨æºä»£ç ã€å­—èŠ‚ç å’Œè¿è¡Œè¿‡ç¨‹ä¸­ã€‚</p> <p>è¿™é‡Œ<code>@Override</code>ä¾¿åªèƒ½å‡ºç°åœ¨æºä»£ç ä¸­ã€‚ä¸€æ—¦æ ‡æ³¨äº†<code>@Override</code>çš„æ–¹æ³•æ‰€åœ¨çš„æºä»£ç è¢«ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œè¯¥æ³¨è§£ä¾¿ä¼šè¢«æ“¦é™¤ã€‚</p> <p>æˆ‘ä»¬ä¸éš¾çŒœåˆ°ï¼Œ<code>@Override</code>ä»…å¯¹ Java ç¼–è¯‘å™¨æœ‰ç”¨ã€‚äº‹å®ä¸Šï¼Œå®ƒä¼šä¸º Java ç¼–è¯‘å™¨å¼•å…¥äº†ä¸€æ¡æ–°çš„ç¼–è¯‘è§„åˆ™ï¼Œå³å¦‚æœæ‰€æ ‡æ³¨çš„æ–¹æ³•ä¸æ˜¯ Java è¯­è¨€ä¸­çš„é‡å†™æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚è€Œå½“ç¼–è¯‘å®Œæˆæ—¶ï¼Œå®ƒçš„ä½¿å‘½ä¹Ÿå°±ç»“æŸäº†ã€‚</p> <p>æˆ‘ä»¬çŸ¥é“ï¼ŒJava çš„æ³¨è§£æœºåˆ¶å…è®¸å¼€å‘äººå‘˜è‡ªå®šä¹‰æ³¨è§£ã€‚è¿™äº›è‡ªå®šä¹‰æ³¨è§£åŒæ ·å¯ä»¥ä¸º Java  ç¼–è¯‘å™¨æ·»åŠ ç¼–è¯‘è§„åˆ™ã€‚ä¸è¿‡ï¼Œè¿™ç§åŠŸèƒ½éœ€è¦ç”±å¼€å‘äººå‘˜æä¾›ï¼Œå¹¶ä¸”ä»¥æ’ä»¶çš„å½¢å¼æ¥å…¥ Java  ç¼–è¯‘å™¨ä¸­ï¼Œè¿™äº›æ’ä»¶æˆ‘ä»¬ç§°ä¹‹ä¸ºæ³¨è§£å¤„ç†å™¨ï¼ˆannotation processorï¼‰ã€‚</p> <p>é™¤äº†å¼•å…¥æ–°çš„ç¼–è¯‘è§„åˆ™ä¹‹å¤–ï¼Œæ³¨è§£å¤„ç†å™¨è¿˜å¯ä»¥ç”¨äºä¿®æ”¹å·²æœ‰çš„ Java æºæ–‡ä»¶ï¼ˆä¸æ¨èï¼‰ï¼Œæˆ–è€…ç”Ÿæˆæ–°çš„ Java æºæ–‡ä»¶ã€‚ä¸‹é¢ï¼Œæˆ‘å°†ç”¨å‡ ä¸ªæ¡ˆä¾‹æ¥è¯¦ç»†é˜è¿°æ³¨è§£å¤„ç†å™¨çš„è¿™äº›åŠŸèƒ½ï¼Œä»¥åŠå®ƒèƒŒåçš„åŸç†ã€‚</p> <h2 id="æ³¨è§£å¤„ç†å™¨çš„åŸç†"><a href="#æ³¨è§£å¤„ç†å™¨çš„åŸç†" class="header-anchor">#</a> æ³¨è§£å¤„ç†å™¨çš„åŸç†</h2> <p>åœ¨ä»‹ç»æ³¨è§£å¤„ç†å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ Java ç¼–è¯‘å™¨çš„å·¥ä½œæµç¨‹ã€‚</p> <p><img src="https://linkeq.oss-cn-chengdu.aliyuncs.com/img/2022/05/31/image-20220531145410753-6ec552.png" alt="image-20220531145410753"></p> <p>å¦‚ä¸Šå›¾æ‰€ç¤º å‡ºå¤„ [1]ï¼ŒJava æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p> <ol><li>å°†æºæ–‡ä»¶è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼›</li> <li>è°ƒç”¨å·²æ³¨å†Œçš„æ³¨è§£å¤„ç†å™¨ï¼›</li> <li>ç”Ÿæˆå­—èŠ‚ç ã€‚</li></ol> <p>å¦‚æœåœ¨ç¬¬ 2 æ­¥è°ƒç”¨æ³¨è§£å¤„ç†å™¨è¿‡ç¨‹ä¸­ç”Ÿæˆäº†æ–°çš„æºæ–‡ä»¶ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†é‡å¤ç¬¬ 1ã€2 æ­¥ï¼Œè§£æå¹¶ä¸”å¤„ç†æ–°ç”Ÿæˆçš„æºæ–‡ä»¶ã€‚æ¯æ¬¡é‡å¤æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸€è½®ï¼ˆRoundï¼‰ã€‚</p> <p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€è½®è§£æã€å¤„ç†çš„æ˜¯è¾“å…¥è‡³ç¼–è¯‘å™¨ä¸­çš„å·²æœ‰æºæ–‡ä»¶ã€‚å¦‚æœæ³¨è§£å¤„ç†å™¨ç”Ÿæˆäº†æ–°çš„æºæ–‡ä»¶ï¼Œåˆ™å¼€å§‹ç¬¬äºŒè½®ã€ç¬¬ä¸‰è½®ï¼Œè§£æå¹¶ä¸”å¤„ç†è¿™äº›æ–°ç”Ÿæˆçš„æºæ–‡ä»¶ã€‚å½“æ³¨è§£å¤„ç†å™¨ä¸å†ç”Ÿæˆæ–°çš„æºæ–‡ä»¶ï¼Œç¼–è¯‘è¿›å…¥æœ€åä¸€è½®ï¼Œå¹¶æœ€ç»ˆè¿›å…¥ç”Ÿæˆå­—èŠ‚ç çš„ç¬¬ 3 æ­¥ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package foo;

 

import java.lang.annotation.*;

 

@Target({ ElementType.TYPE, ElementType.FIELD })

@Retention(RetentionPolicy.SOURCE)

public @interface CheckGetter {

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£<code>@CheckGetter</code>ã€‚å®ƒæ—¢å¯ä»¥ç”¨æ¥æ ‡æ³¨ç±»ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ ‡æ³¨å­—æ®µã€‚æ­¤å¤–ï¼Œå®ƒå’Œ<code>@Override</code>ç›¸åŒï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè¢«é™å®šåœ¨æºä»£ç ä¸­ã€‚</p> <p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¤„ç†<code>@CheckGetter</code>æ³¨è§£çš„å¤„ç†å™¨ã€‚å®ƒå°†éå†è¢«æ ‡æ³¨çš„ç±»ä¸­çš„å®ä¾‹å­—æ®µï¼Œå¹¶æ£€æŸ¥æœ‰æ²¡æœ‰ç›¸åº”çš„<code>getter</code>æ–¹æ³•ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
public interface Processor {

 

  void init(ProcessingEnvironment processingEnv);

  

  Set&lt;String&gt; getSupportedAnnotationTypes();

  

  SourceVersion getSupportedSourceVersion();

  

  boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv);

  

  ...

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>æ‰€æœ‰çš„æ³¨è§£å¤„ç†å™¨ç±»éƒ½éœ€è¦å®ç°æ¥å£<code>Processor</code>ã€‚è¯¥æ¥å£ä¸»è¦æœ‰å››ä¸ªé‡è¦æ–¹æ³•ã€‚å…¶ä¸­ï¼Œ<code>init</code>æ–¹æ³•ç”¨æ¥å­˜æ”¾æ³¨è§£å¤„ç†å™¨çš„åˆå§‹åŒ–ä»£ç ã€‚ä¹‹æ‰€ä»¥ä¸ç”¨æ„é€ å™¨ï¼Œæ˜¯å› ä¸ºåœ¨ Java ç¼–è¯‘å™¨ä¸­ï¼Œæ³¨è§£å¤„ç†å™¨çš„å®ä¾‹æ˜¯é€šè¿‡åå°„ API ç”Ÿæˆçš„ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºä½¿ç”¨åå°„ APIï¼Œæ¯ä¸ªæ³¨è§£å¤„ç†å™¨ç±»éƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚</p> <p>é€šå¸¸æ¥è¯´ï¼Œå½“ç¼–å†™æ³¨è§£å¤„ç†å™¨æ—¶ï¼Œæˆ‘ä»¬ä¸å£°æ˜ä»»ä½•æ„é€ å™¨ï¼Œå¹¶ä¾èµ–äº Java ç¼–è¯‘å™¨ï¼Œä¸ºä¹‹æ’å…¥ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚è€Œå…·ä½“çš„åˆå§‹åŒ–ä»£ç ï¼Œåˆ™æ”¾å…¥<code>init</code>æ–¹æ³•ä¹‹ä¸­ã€‚</p> <p>åœ¨å‰©ä¸‹çš„ä¸‰ä¸ªæ–¹æ³•ä¸­ï¼Œ<code>getSupportedAnnotationTypes</code>æ–¹æ³•å°†è¿”å›æ³¨è§£å¤„ç†å™¨æ‰€æ”¯æŒçš„æ³¨è§£ç±»å‹ï¼Œè¿™äº›æ³¨è§£ç±»å‹åªéœ€ç”¨å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºå³å¯ã€‚</p> <p><code>getSupportedSourceVersion</code>æ–¹æ³•å°†è¿”å›è¯¥å¤„ç†å™¨æ‰€æ”¯æŒçš„ Java ç‰ˆæœ¬ï¼Œé€šå¸¸ï¼Œè¿™ä¸ªç‰ˆæœ¬éœ€è¦ä¸ä½ çš„ Java ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼›è€Œ<code>process</code>æ–¹æ³•åˆ™æ˜¯æœ€ä¸ºå…³é”®çš„æ³¨è§£å¤„ç†æ–¹æ³•ã€‚</p> <p>JDK æä¾›äº†ä¸€ä¸ªå®ç°<code>Processor</code>æ¥å£çš„æŠ½è±¡ç±»<code>AbstractProcessor</code>ã€‚è¯¥æŠ½è±¡ç±»å®ç°äº†<code>init</code>ã€<code>getSupportedAnnotationTypes</code>å’Œ<code>getSupportedSourceVersion</code>æ–¹æ³•ã€‚</p> <p>å®ƒçš„å­ç±»å¯ä»¥é€šè¿‡<code>@SupportedAnnotationTypes</code>å’Œ<code>@SupportedSourceVersion</code>æ³¨è§£æ¥å£°æ˜æ‰€æ”¯æŒçš„æ³¨è§£ç±»å‹ä»¥åŠ Java ç‰ˆæœ¬ã€‚</p> <p>ä¸‹é¢è¿™æ®µä»£ç ä¾¿æ˜¯<code>@CheckGetter</code>æ³¨è§£å¤„ç†å™¨çš„å®ç°ã€‚ç”±äºæˆ‘ä½¿ç”¨äº† Java 10 çš„ç¼–è¯‘å™¨ï¼Œå› æ­¤å°†æ”¯æŒç‰ˆæœ¬è®¾ç½®ä¸º<code>SourceVersion.RELEASE_10</code>ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package bar;

 

import java.util.Set;

 

import javax.annotation.processing.*;

import javax.lang.model.SourceVersion;

import javax.lang.model.element.*;

import javax.lang.model.util.ElementFilter;

import javax.tools.Diagnostic.Kind;

 

import foo.CheckGetter;

 

@SupportedAnnotationTypes(&quot;foo.CheckGetter&quot;)

@SupportedSourceVersion(SourceVersion.RELEASE_10)

public class CheckGetterProcessor extends AbstractProcessor {

 

  @Override

  public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {

    // TODO: annotated ElementKind.FIELD

    for (TypeElement annotatedClass : ElementFilter.typesIn(roundEnv.getElementsAnnotatedWith(CheckGetter.class))) {

      for (VariableElement field : ElementFilter.fieldsIn(annotatedClass.getEnclosedElements())) {

        if (!containsGetter(annotatedClass, field.getSimpleName().toString())) {

          processingEnv.getMessager().printMessage(Kind.ERROR,

              String.format(&quot;getter not found for '%s.%s'.&quot;, annotatedClass.getSimpleName(), field.getSimpleName()));

        }

      }

    }

    return true;

  }

 

  private static boolean containsGetter(TypeElement typeElement, String name) {

    String getter = &quot;get&quot; + name.substring(0, 1).toUpperCase() + name.substring(1).toLowerCase();

    for (ExecutableElement executableElement : ElementFilter.methodsIn(typeElement.getEnclosedElements())) {

      if (!executableElement.getModifiers().contains(Modifier.STATIC)

          &amp;&amp; executableElement.getSimpleName().toString().equals(getter)

          &amp;&amp; executableElement.getParameters().isEmpty()) {

        return true;

      }

    }

    return false;

  }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br></div></div><p>è¯¥æ³¨è§£å¤„ç†å™¨ä»…é‡å†™äº†<code>process</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨è¯¥æ³¨è§£å¤„ç†å™¨æ‰€èƒ½å¤„ç†çš„æ³¨è§£ç±»å‹ï¼Œä»¥åŠå›Šæ‹¬å½“å‰è½®ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘çš„<code>RoundEnvironment</code>ã€‚</p> <p>ç”±äºè¯¥å¤„ç†å™¨é’ˆå¯¹çš„æ³¨è§£ä»…æœ‰<code>@CheckGetter</code>ä¸€ä¸ªï¼Œè€Œä¸”æˆ‘ä»¬å¹¶ä¸ä¼šè¯»å–æ³¨è§£ä¸­çš„å€¼ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°å¹¶ä¸é‡è¦ã€‚åœ¨ä»£ç ä¸­ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨äº†</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
`roundEnv.getElementsAnnotatedWith(CheckGetter.class)`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ¥è·å–æ‰€æœ‰è¢«<code>@CheckGetter</code>æ³¨è§£çš„ç±»ï¼ˆä»¥åŠå­—æ®µï¼‰ã€‚</p> <p><code>process</code>æ–¹æ³•æ¶‰åŠå„ç§ä¸åŒç±»å‹çš„<code>Element</code>ï¼Œåˆ†åˆ«æŒ‡ä»£ Java ç¨‹åºä¸­çš„å„ä¸ªç»“æ„ã€‚å¦‚<code>TypeElement</code>æŒ‡ä»£ç±»æˆ–è€…æ¥å£ï¼Œ<code>VariableElement</code>æŒ‡ä»£å­—æ®µã€å±€éƒ¨å˜é‡ã€enum å¸¸é‡ç­‰ï¼Œ<code>ExecutableElement</code>æŒ‡ä»£æ–¹æ³•æˆ–è€…æ„é€ å™¨ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package foo;     // PackageElement

 

class Foo {      // TypeElement

  int a;           // VariableElement

  static int b;    // VariableElement

  Foo () {}        // ExecutableElement

  void setA (      // ExecutableElement

    int newA         // VariableElement

  ) {}

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>è¿™äº›ç»“æ„ä¹‹é—´ä¹Ÿæœ‰ä»å±å…³ç³»ï¼Œå¦‚ä¸Šé¢è¿™æ®µä»£ç æ‰€ç¤º (å‡ºå¤„ [2]ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>TypeElement.getEnclosedElements</code>æ–¹æ³•ï¼Œè·å¾—ä¸Šé¢è¿™æ®µä»£ç ä¸­<code>Foo</code>ç±»çš„å­—æ®µã€æ„é€ å™¨ä»¥åŠæ–¹æ³•ã€‚</p> <p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>ExecutableElement.getParameters</code>æ–¹æ³•ï¼Œè·å¾—<code>setA</code>æ–¹æ³•çš„å‚æ•°ã€‚å…·ä½“è¿™äº›<code>Element</code>ç±»éƒ½æœ‰å“ªäº› APIï¼Œä½ å¯ä»¥å‚è€ƒå®ƒä»¬çš„ Javadoc[3]ã€‚</p> <p>åœ¨å°†è¯¥æ³¨è§£å¤„ç†å™¨ç¼–è¯‘æˆ class æ–‡ä»¶åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å°†å…¶æ³¨å†Œä¸º Java ç¼–è¯‘å™¨çš„æ’ä»¶ï¼Œå¹¶ç”¨æ¥å¤„ç†å…¶ä»–æºä»£ç ã€‚æ³¨å†Œçš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ã€‚ç¬¬ä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨ javac å‘½ä»¤çš„<code>-processor</code>å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
$ javac -cp /CLASSPATH/TO/CheckGetterProcessor -processor bar.CheckGetterProcessor Foo.java

error: Class 'Foo' is annotated as @CheckGetter, but field 'a' is without getter

1 error
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç¬¬äºŒç§åˆ™æ˜¯å°†æ³¨è§£å¤„ç†å™¨ç¼–è¯‘ç”Ÿæˆçš„ class æ–‡ä»¶å‹ç¼©å…¥ jar åŒ…ä¸­ï¼Œå¹¶åœ¨ jar åŒ…çš„é…ç½®æ–‡ä»¶ä¸­è®°å½•è¯¥æ³¨è§£å¤„ç†å™¨çš„åŒ…ååŠç±»åï¼Œå³<code>bar.CheckGetterProcessor</code>ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
ï¼ˆå…·ä½“è·¯å¾„åŠé…ç½®æ–‡ä»¶åä¸º`META-INF/services/javax.annotation.processing.Processor`ï¼‰
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å½“å¯åŠ¨ Java ç¼–è¯‘å™¨æ—¶ï¼Œå®ƒä¼šå¯»æ‰¾ classpath è·¯å¾„ä¸Šçš„ jar åŒ…æ˜¯å¦åŒ…å«ä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨æ³¨å†Œå…¶ä¸­è®°å½•çš„æ³¨è§£å¤„ç†å™¨ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
$ javac -cp /PATH/TO/CheckGetterProcessor.jar Foo.java

error: Class 'Foo' is annotated as @CheckGetter, but field 'a' is without getter

1 error
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ IDE ä¸­é…ç½®æ³¨è§£å¤„ç†å™¨ã€‚è¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šæ¼”ç¤ºäº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œæœç´¢ã€‚</p> <h2 id="åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç "><a href="#åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç " class="header-anchor">#</a> åˆ©ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆæºä»£ç </h2> <p>å‰é¢æåˆ°ï¼Œæ³¨è§£å¤„ç†å™¨å¯ä»¥ç”¨æ¥ä¿®æ”¹å·²æœ‰æºä»£ç æˆ–è€…ç”Ÿæˆæºä»£ç ã€‚</p> <p>ç¡®åˆ‡åœ°è¯´ï¼Œæ³¨è§£å¤„ç†å™¨å¹¶ä¸èƒ½çœŸæ­£åœ°ä¿®æ”¹å·²æœ‰æºä»£ç ã€‚è¿™é‡ŒæŒ‡çš„æ˜¯ä¿®æ”¹ç”± Java æºä»£ç ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œåœ¨å…¶ä¸­ä¿®æ”¹å·²æœ‰æ ‘èŠ‚ç‚¹æˆ–è€…æ’å…¥æ–°çš„æ ‘èŠ‚ç‚¹ï¼Œä»è€Œä½¿ç”Ÿæˆçš„å­—èŠ‚ç å‘ç”Ÿå˜åŒ–ã€‚</p> <p>å¯¹æŠ½è±¡è¯­æ³•æ ‘çš„ä¿®æ”¹æ¶‰åŠäº† Java ç¼–è¯‘å™¨çš„å†…éƒ¨ APIï¼Œè¿™éƒ¨åˆ†å¾ˆå¯èƒ½éšç€ç‰ˆæœ¬å˜æ›´è€Œå¤±æ•ˆã€‚å› æ­¤ï¼Œæˆ‘å¹¶ä¸æ¨èè¿™ç§ä¿®æ”¹æ–¹å¼ã€‚</p> <p>å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å‚è€ƒ [Project Lombok][4]ã€‚è¿™ä¸ªé¡¹ç›®è‡ªå®šä¹‰äº†ä¸€ç³»åˆ—æ³¨è§£ï¼Œå¹¶æ ¹æ®æ³¨è§£çš„å†…å®¹æ¥ä¿®æ”¹å·²æœ‰çš„æºä»£ç ã€‚ä¾‹å¦‚å®ƒæä¾›äº†<code>@Getter</code>å’Œ<code>@Setter</code>æ³¨è§£ï¼Œèƒ½å¤Ÿä¸ºç¨‹åºè‡ªåŠ¨æ·»åŠ <code>getter</code>ä»¥åŠ<code>setter</code>æ–¹æ³•ã€‚æœ‰å…³å¯¹ä½¿ç”¨å†…éƒ¨ API çš„è®¨è®ºï¼Œä½ å¯ä»¥å‚è€ƒ [è¿™ç¯‡åšå®¢][5]ï¼Œä»¥åŠ [Lombok çš„å›åº”][6]ã€‚</p> <p>ç”¨æ³¨è§£å¤„ç†å™¨æ¥ç”Ÿæˆæºä»£ç åˆ™æ¯”è¾ƒå¸¸ç”¨ã€‚æˆ‘ä»¬ä»¥å‰ä»‹ç»è¿‡çš„å‹åŠ›æµ‹è¯• jcstressï¼Œä»¥åŠæ¥ä¸‹æ¥å³å°†ä»‹ç»çš„ JMH å·¥å…·ï¼Œéƒ½æ˜¯ä¾èµ–è¿™ç§æ–¹å¼æ¥ç”Ÿæˆæµ‹è¯•ä»£ç çš„ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package foo;

 

import java.lang.annotation.*;

 

@Target(ElementType.METHOD)

@Retention(RetentionPolicy.SOURCE)

public @interface Adapt {

  Class&lt;?&gt; value();

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£<code>@Adapt</code>ã€‚è¿™ä¸ªæ³¨è§£å°†æ¥æ”¶ä¸€ä¸ª<code>Class</code>ç±»å‹çš„å‚æ•°<code>value</code>ï¼ˆå¦‚æœæ³¨è§£ç±»ä»…åŒ…å«ä¸€ä¸ªåä¸º<code>value</code>çš„å‚æ•°æ—¶ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨æ³¨è§£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥<code>value=</code>ï¼‰ï¼Œå…·ä½“ç”¨æ³•å¦‚è¿™æ®µä»£ç æ‰€ç¤ºã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
// Bar.java

package test;

import java.util.function.IntBinaryOperator;

import foo.Adapt;

 

public class Bar {

  @Adapt(IntBinaryOperator.class)

  public static int add(int a, int b) {

    return a + b;

  }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¤„ç†<code>@Adapt</code>æ³¨è§£çš„å¤„ç†å™¨ã€‚è¯¥å¤„ç†å™¨å°†ç”Ÿæˆä¸€ä¸ªæ–°çš„æºæ–‡ä»¶ï¼Œå®ç°å‚æ•°<code>value</code>æ‰€æŒ‡å®šçš„æ¥å£ï¼Œå¹¶ä¸”è°ƒç”¨è‡³è¢«è¯¥æ³¨è§£æ‰€æ ‡æ³¨çš„æ–¹æ³•ä¹‹ä¸­ã€‚å…·ä½“çš„å®ç°ä»£ç æ¯”è¾ƒé•¿ï¼Œå»ºè®®ä½ åœ¨<a href="https://time.geekbang.org/column/108" target="_blank" rel="noopener noreferrer">ç½‘é¡µç«¯<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>è§‚çœ‹ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package bar;

 

import java.io.*;

import java.util.Set;

 

import javax.annotation.processing.*;

import javax.lang.model.SourceVersion;

import javax.lang.model.element.*;

import javax.lang.model.type.TypeMirror;

import javax.lang.model.util.ElementFilter;

import javax.tools.JavaFileObject;

 

import javax.tools.Diagnostic.Kind;

 

@SupportedAnnotationTypes(&quot;foo.Adapt&quot;)

@SupportedSourceVersion(SourceVersion.RELEASE_10)

public class AdaptProcessor extends AbstractProcessor {

 

  @Override

  public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {

    for (TypeElement annotation : annotations) {

      if (!&quot;foo.Adapt&quot;.equals(annotation.getQualifiedName().toString())) {

        continue;

      }

 

      ExecutableElement targetAsKey = getExecutable(annotation, &quot;value&quot;);

 

      for (ExecutableElement annotatedMethod : ElementFilter.methodsIn(roundEnv.getElementsAnnotatedWith(annotation))) {

        if (!annotatedMethod.getModifiers().contains(Modifier.PUBLIC)) {

          processingEnv.getMessager().printMessage(Kind.ERROR, &quot;@Adapt on non-public method&quot;);

          continue;

        }

        if (!annotatedMethod.getModifiers().contains(Modifier.STATIC)) {

          // TODO support non-static methods

          continue;

        }

 

        TypeElement targetInterface = getAnnotationValueAsTypeElement(annotatedMethod, annotation, targetAsKey);

        if (targetInterface.getKind() != ElementKind.INTERFACE) {

          processingEnv.getMessager().printMessage(Kind.ERROR, &quot;@Adapt with non-interface input&quot;);

          continue;

        }

 

        TypeElement enclosingType = getTopLevelEnclosingType(annotatedMethod);

        createAdapter(enclosingType, annotatedMethod, targetInterface);

      }

    }

    return true;

  }

 

  private void createAdapter(TypeElement enclosingClass, ExecutableElement annotatedMethod,

      TypeElement targetInterface) {

    PackageElement packageElement = (PackageElement) enclosingClass.getEnclosingElement();

    String packageName = packageElement.getQualifiedName().toString();

    String className = enclosingClass.getSimpleName().toString();

    String methodName = annotatedMethod.getSimpleName().toString();

    String adapterName = className + &quot;_&quot; + methodName + &quot;Adapter&quot;;

 

    ExecutableElement overriddenMethod = getFirstNonDefaultExecutable(targetInterface);

 

    try {

      Filer filer = processingEnv.getFiler();

      JavaFileObject sourceFile = filer.createSourceFile(packageName + &quot;.&quot; + adapterName, new Element[0]);

 

      try (PrintWriter out = new PrintWriter(sourceFile.openWriter())) {

        out.println(&quot;package &quot; + packageName + &quot;;&quot;);

        out.println(&quot;import &quot; + targetInterface.getQualifiedName() + &quot;;&quot;);

        out.println();

        out.println(&quot;public class &quot; + adapterName + &quot; implements &quot; + targetInterface.getSimpleName() + &quot; {&quot;);

        out.println(&quot;  @Override&quot;);

        out.println(&quot;  public &quot; + overriddenMethod.getReturnType() + &quot; &quot; + overriddenMethod.getSimpleName()

            + formatParameter(overriddenMethod, true) + &quot; {&quot;);

        out.println(&quot;    return &quot; + className + &quot;.&quot; + methodName + formatParameter(overriddenMethod, false) + &quot;;&quot;);

        out.println(&quot;  }&quot;);

        out.println(&quot;}&quot;);

      }

    } catch (IOException e) {

      throw new RuntimeException(e);

    }

  }

 

  private ExecutableElement getExecutable(TypeElement annotation, String methodName) {

    for (ExecutableElement method : ElementFilter.methodsIn(annotation.getEnclosedElements())) {

      if (methodName.equals(method.getSimpleName().toString())) {

        return method;

      }

    }

    processingEnv.getMessager().printMessage(Kind.ERROR, &quot;Incompatible @Adapt.&quot;);

    return null;

  }

 

  private ExecutableElement getFirstNonDefaultExecutable(TypeElement annotation) {

    for (ExecutableElement method : ElementFilter.methodsIn(annotation.getEnclosedElements())) {

      if (!method.isDefault()) {

        return method;

      }

    }

    processingEnv.getMessager().printMessage(Kind.ERROR,

        &quot;Target interface should declare at least one non-default method.&quot;);

    return null;

  }

 

  private TypeElement getAnnotationValueAsTypeElement(ExecutableElement annotatedMethod, TypeElement annotation,

      ExecutableElement annotationFunction) {

    TypeMirror annotationType = annotation.asType();

 

    for (AnnotationMirror annotationMirror : annotatedMethod.getAnnotationMirrors()) {

      if (processingEnv.getTypeUtils().isSameType(annotationMirror.getAnnotationType(), annotationType)) {

        AnnotationValue value = annotationMirror.getElementValues().get(annotationFunction);

        if (value == null) {

          processingEnv.getMessager().printMessage(Kind.ERROR, &quot;Unknown @Adapt target&quot;);

          continue;

        }

        TypeMirror targetInterfaceTypeMirror = (TypeMirror) value.getValue();

        return (TypeElement) processingEnv.getTypeUtils().asElement(targetInterfaceTypeMirror);

      }

    }

    processingEnv.getMessager().printMessage(Kind.ERROR, &quot;@Adapt should contain target()&quot;);

    return null;

  }

 

  private TypeElement getTopLevelEnclosingType(ExecutableElement annotatedMethod) {

    TypeElement enclosingType = null;

    Element enclosing = annotatedMethod.getEnclosingElement();

 

    while (enclosing != null) {

      if (enclosing.getKind() == ElementKind.CLASS) {

        enclosingType = (TypeElement) enclosing;

      } else if (enclosing.getKind() == ElementKind.PACKAGE) {

        break;

      }

      enclosing = enclosing.getEnclosingElement();

    }

    return enclosingType;

  }

 

  private String formatParameter(ExecutableElement method, boolean includeType) {

    StringBuilder builder = new StringBuilder();

    builder.append('(');

    String separator = &quot;&quot;;

 

    for (VariableElement parameter : method.getParameters()) {

      builder.append(separator);

      if (includeType) {

        builder.append(parameter.asType());

        builder.append(' ');

      }

      builder.append(parameter.getSimpleName());

      separator = &quot;, &quot;;

    }

    builder.append(')');

    return builder.toString();

  }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br></div></div><p>åœ¨è¿™ä¸ªæ³¨è§£å¤„ç†å™¨å®ç°ä¸­ï¼Œæˆ‘ä»¬å°†è¯»å–æ³¨è§£ä¸­çš„å€¼ï¼Œå› æ­¤æˆ‘å°†ä½¿ç”¨<code>process</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶é€šè¿‡å®ƒè·å¾—è¢«æ ‡æ³¨æ–¹æ³•å¯¹åº”çš„<code>@Adapt</code>æ³¨è§£ä¸­çš„<code>value</code>å€¼ã€‚</p> <p>ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™ç§éº»çƒ¦çš„æ–¹å¼ï¼Œæ˜¯å› ä¸º<code>value</code>å€¼å±äº<code>Class</code>ç±»å‹ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè¢«ç¼–è¯‘ä»£ç ä¸­çš„<code>Class</code>å¸¸é‡æœªå¿…è¢«åŠ è½½è¿› Java ç¼–è¯‘å™¨æ‰€åœ¨çš„è™šæ‹Ÿæœºä¸­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<code>process</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè·å¾—<code>value</code>æ‰€æŒ‡å‘çš„æ¥å£çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¹¶æ®æ­¤ç”Ÿæˆæºä»£ç ã€‚</p> <p>ç”Ÿæˆæºä»£ç çš„æ–¹å¼å®é™…ä¸Šéå¸¸å®¹æ˜“ç†è§£ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Filer.createSourceFile</code>æ–¹æ³•è·å¾—ä¸€ä¸ªç±»ä¼¼äºæ–‡ä»¶çš„æ¦‚å¿µï¼Œå¹¶é€šè¿‡<code>PrintWriter</code>å°†å…·ä½“çš„å†…å®¹ä¸€ä¸€å†™å…¥å³å¯ã€‚</p> <p>å½“å°†è¯¥æ³¨è§£å¤„ç†å™¨ä½œä¸ºæ’ä»¶æ¥å…¥ Java ç¼–è¯‘å™¨æ—¶ï¼Œç¼–è¯‘å‰é¢çš„<code>test/Bar.java</code>å°†ç”Ÿæˆä¸‹è¿°ä»£ç ï¼Œå¹¶ä¸”è§¦å‘æ–°ä¸€è½®çš„ç¼–è¯‘ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
package test;

import java.util.function.IntBinaryOperator;

 

public class Bar_addAdapter implements IntBinaryOperator {

  @Override

  public int applyAsInt(int arg0, int arg1) {

    return Bar.add(arg0, arg1);

  }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>æ³¨æ„ï¼Œè¯¥æ³¨è§£å¤„ç†å™¨æ²¡æœ‰å¤„ç†æ‰€ç¼–è¯‘çš„ä»£ç åŒ…åä¸ºç©ºçš„æƒ…å†µã€‚</p></blockquote> <h2 id="æ€»ç»“ä¸å®è·µ"><a href="#æ€»ç»“ä¸å®è·µ" class="header-anchor">#</a> æ€»ç»“ä¸å®è·µ</h2> <p>ä»Šå¤©æˆ‘ä»‹ç»äº† Java ç¼–è¯‘å™¨çš„æ³¨è§£å¤„ç†å™¨ã€‚</p> <p>æ³¨è§£å¤„ç†å™¨ä¸»è¦æœ‰ä¸‰ä¸ªç”¨é€”ã€‚ä¸€æ˜¯å®šä¹‰ç¼–è¯‘è§„åˆ™ï¼Œå¹¶æ£€æŸ¥è¢«ç¼–è¯‘çš„æºæ–‡ä»¶ã€‚äºŒæ˜¯ä¿®æ”¹å·²æœ‰æºä»£ç ã€‚ä¸‰æ˜¯ç”Ÿæˆæ–°çš„æºä»£ç ã€‚å…¶ä¸­ï¼Œç¬¬äºŒç§æ¶‰åŠäº† Java  ç¼–è¯‘å™¨çš„å†…éƒ¨ APIï¼Œå› æ­¤å¹¶ä¸æ¨èã€‚ç¬¬ä¸‰ç§è¾ƒä¸ºå¸¸è§ï¼Œæ˜¯ OpenJDK å·¥å…· jcstressï¼Œä»¥åŠ JMH ç”Ÿæˆæµ‹è¯•ä»£ç çš„æ–¹å¼ã€‚</p> <p>Java æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«ä¸ºè§£ææºæ–‡ä»¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼Œè°ƒç”¨å·²æ³¨å†Œçš„æ³¨è§£å¤„ç†å™¨ï¼Œå’Œç”Ÿæˆå­—èŠ‚ç ã€‚å¦‚æœåœ¨ç¬¬ 2 æ­¥ä¸­ï¼Œæ³¨è§£å¤„ç†å™¨ç”Ÿæˆäº†æ–°çš„æºä»£ç ï¼Œé‚£ä¹ˆ Java ç¼–è¯‘å™¨å°†é‡å¤ç¬¬ 1ã€2 æ­¥ï¼Œç›´è‡³ä¸å†ç”Ÿæˆæ–°çš„æºä»£ç ã€‚</p> <hr> <p>ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œè¯·å®ç°æœ¬æ–‡çš„æ¡ˆä¾‹<code>CheckGetterProcessor</code>ä¸­çš„ TODO é¡¹ï¼Œå¤„ç†ç”±<code>@CheckGetter</code>æ³¨è§£çš„å­—æ®µã€‚</p> <p>[1] http://openjdk.java.net/groups/compiler/doc/compilation-overview/index.html
[2] http://hannesdorfmann.com/annotation-processing/annotationprocessing101
[3] https://docs.oracle.com/javase/10/docs/api/javax/lang/model/element/package-summary.html
[4] https://projectlombok.org/
[5] http://notatube.blogspot.com/2010/11/project-lombok-trick-explained.html
[6] http://jnb.ociweb.com/jnb/jnbJan2010.html#controversy</p> <h2 id="ç²¾é€‰ç•™è¨€-14"><a href="#ç²¾é€‰ç•™è¨€-14" class="header-anchor">#</a> ç²¾é€‰ç•™è¨€(14)</h2> <ul><li></li></ul> <p>èšå˜</p> <p>2018-09-21</p> <p>4</p> <p>ç¼–è¯‘æ—¶ç”Ÿæˆä¸ è¿è¡Œæ—¶ä½¿ç”¨cglibç­‰ç±»åº“ç”Ÿæˆçš„å­—èŠ‚ç ,åœ¨æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«å—??</p> <p>ä½œè€…å›å¤: Cglibç­‰å­—èŠ‚ç å·¥å…·ä¼šå½±å“å¯åŠ¨æ€§èƒ½ï¼Œå³°å€¼æ€§èƒ½ä¸Šæ²¡å•¥åŒºåˆ«ã€‚</p> <p>å¦‚æœå¯¹å­—èŠ‚ç ä¸ç†Ÿçš„è¯ï¼Œç”¨æ³¨è§£å¤„ç†å™¨æ¯”è¾ƒå®¹æ˜“äº›ã€‚å¦ä¸€æ–¹é¢ï¼Œå­—èŠ‚ç å¤„ç†å·¥å…·æ›´å¼ºå¤§äº›ï¼Œèƒ½åšå¾ˆå¤šæºä»£ç ä¸èƒ½åšçš„ã€‚</p> <ul><li></li></ul> <p>lovedebug</p> <p>2018-09-27</p> <p>2</p> <p>è®²çš„å¾ˆå¥½ï¼Œèµã€‚ç»“åˆjavaè¯­æ³•çœ‹å°è±¡æ›´æ·±</p> <ul><li></li></ul> <p>å¥‡å¥‡</p> <p>2019-04-25</p> <p>1</p> <p>è€å¸ˆï¼Œè¿™ä¸ª ExecutableElement targetAsKey = getExecutable(annotation, &quot;value&quot;); è¿™ä¸€å¥æ˜¯å¹²å˜›çš„ï¼Œæˆ‘çœ‹è¯­ä¹‰æ˜¯æ‰¾å‡ºæ‰€æœ‰åå­—æ˜¯valueçš„æ–¹æ³•ï¼Ÿéš¾é“ä¸åº”è¯¥æ‰¾çš„æ˜¯valueæ‰€æŒ‡å‘çš„ç±»å—ï¼Ÿ</p> <ul><li></li></ul> <p>ç™½ä¸‰å²</p> <p>2018-09-28</p> <p>1</p> <p>springä¸­çš„é‚£äº›æ³¨è§£ä¹Ÿæ˜¯é€šè¿‡æ³¨è§£å¤„ç†å™¨å®ç°çš„å—ã€‚æˆ‘ä»¬é¡¹ç›®ä¸­ä¸€èˆ¬å¥½åƒéƒ½æ˜¯é€šè¿‡springçš„aopæ¥å®ç°è‡ªå®šä¹‰æ³¨è§£çš„åŠŸèƒ½ã€‚</p> <ul><li></li></ul> <p>godtrue</p> <p>2018-09-24</p> <p>1</p> <p>å—¯ï¼Œä¹‹å‰å†™è¿‡æ³¨è§£æ–¹é¢çš„åŠŸèƒ½ï¼Œä¸è¿‡è™½ç„¶èƒ½è‡ªå®šä¹‰æ³¨è§£ï¼Œä¹Ÿèƒ½æ˜ç™½Javaè¯­è¨€å±‚é¢çš„æœ‰å…³æ³¨è§£ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œä½†æ˜¯å¾€ä¸‹æ€ä¹ˆæ ·å°±ä¸å¤ªæ¸…æ¥šäº†ï¼Ÿ
æ³¨è§£ä»£ç æœ¬è´¨ä¹Ÿæ˜¯ä»£ç ï¼Œä¹Ÿä¼šè¢«ç¼–è¯‘ä¸º.classæ–‡ä»¶ï¼Œç„¶ååœ¨JVMä¸Šé¢è¢«è½¬æ¢æˆæœºå™¨ç ï¼Œç„¶åè¢«è®¡ç®—æœºæ‰§è¡Œï¼Œä¸è¿‡æ„Ÿè§‰ä»–å¥½ç‰¹åˆ«ï¼Œä»–çš„å­˜åœ¨ä»…æ˜¯ä¸ºäº†æ˜¯ç¼–ç æ›´ç®€æ´å—ï¼Ÿ
è¯»ä¹‹å‰æˆ‘å°±åœ¨æƒ³ä¸Šé¢çš„é—®é¢˜ï¼Œæ–‡ä¸­è™½ç„¶æ²¡æœ‰ä»‹ç»è¿™äº›å†…å®¹ï¼Œä¸è¿‡ä»‹ç»äº†å…¶ä»–çš„å†…å®¹ä¹ŸæŒºå¥½ï¼</p> <p>å°ç»“ä¸€ä¸‹ï¼š
1ï¼šæ³¨è§£å¤„ç†å™¨-æœ¬è´¨ä¹Ÿæ˜¯ä»£ç ï¼Œä»¥æ’ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œä»¥æ’ä»¶çš„å½¢å¼æ¥å…¥Javaç¼–è¯‘å™¨ï¼Œè¿™äº›æ’ä»¶æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p> <p>2ï¼šæ³¨è§£å¤„ç†å™¨çš„ä½œç”¨ï¼Ÿ
æ³¨è§£å¤„ç†å™¨æœ‰ä¸‰ä¸ªä½œç”¨
2-1ï¼šå¯ä»¥ä¸ºJavaç¼–è¯‘å™¨æ·»åŠ ä¸€äº›ç¼–è¯‘è§„åˆ™ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¼ è¯´ä¸­çš„è‡ªå®šä¹‰æ³¨è§£ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸€äº›ç¼–è¯‘è§„åˆ™ï¼Œè¿™äº›ç¼–è¯‘è§„åˆ™ä¼šä»¥æ’ä»¶çš„å½¢å¼æä¾›ç»™Javaç¼–è¯‘å™¨ã€‚
2-2ï¼šå¯ä»¥ä¿®æ”¹å·²æœ‰çš„JAVAæºæ–‡ä»¶ï¼ˆä¸æ¨èï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæœ¬è´¨ä¸Šæ³¨è§£å¤„ç†å™¨ä¸èƒ½ä¿®æ”¹å·²æœ‰çš„JAVAæºä»£ç ï¼Œä½†æ˜¯å®ƒå¯ä»¥ä¿®æ”¹æœ‰javaæºä»£ç ç”Ÿæˆçš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œä»è€Œä½¿ç”Ÿæˆçš„å­—èŠ‚ç å‘ç”Ÿå˜åŒ–ï¼Œä¸è¿‡å¯¹æŠ½è±¡è¯­æ³•æ ‘çš„ä¿®æ”¹ä¿®æ”¹è®¾è®¡äº†javaç¼–è¯‘å™¨çš„å†…éƒ¨APIï¼Œè¿™éƒ¨åˆ†å¾ˆå¯èƒ½éšç€ç‰ˆæœ¬çš„å˜æ›´è€Œå¤±æ•ˆï¼Œæ‰€ä»¥ï¼Œæ‰ä¸æ¨èä½¿ç”¨çš„ï¼Œå­˜åœ¨åŸ‹æ·±å‘çš„éšæ‚£ã€‚ï¼‰
2-3ï¼šå¯ä»¥ç”Ÿæˆä¸€äº›æ–°çš„JAVAæºæ–‡ä»¶</p> <p>3ï¼šå…ƒæ³¨è§£-ç»™æ³¨è§£ä½¿ç”¨çš„æ³¨è§£å°±æ˜¯å…ƒæ³¨è§£ï¼Œè¿™äº›æ³¨è§£æ˜¯JDKçš„å¼€å‘äººå‘˜æå‰å®šä¹‰äº†çš„ï¼Œä¹ŸåŒæ ·æ˜¯ä»¥æ’ä»¶çš„å½¢å¼æ¥å…¥Javaç¼–è¯‘å™¨çš„ã€‚æ³¨æ„ï¼šæ‰€æœ‰çš„æ³¨è§£å¤„ç†å™¨éƒ½å¿…é¡»å®ç°Processoræ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸­æœ‰å››ä¸ªæ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æœ‰å…¶ç‰¹æ®Šçš„ä½œç”¨åœ¨ï¼Œè¯¦æƒ…éœ€è¦å›å¤´ç»†çœ‹ã€‚å¦å¤–ï¼ŒJDKæä¾›äº†ä¸€ä¸ªå®ç°Processoræ¥å£çš„æŠ½è±¡ç±»AbstractProcessorï¼Œè¿™ä¸ªæŠ½è±¡ç±»å®ç°äº†Processoræ¥å£çš„å…¶ä¸­ä¸‰ä¸ªæ–¹æ³•ã€‚</p> <p>4ï¼šè‡ªå®šä¹‰çš„æ³¨è§£è¢«ç¼–è¯‘ä¸º.classæ–‡ä»¶åï¼Œä¾¿å¯ä»¥å°†å…¶æ³¨å†Œä¸ºJavaç¼–è¯‘å™¨çš„æ’ä»¶äº†ï¼Œæ³¨å†Œæ–¹æ³•æœ‰ä¸¤ç§ï¼Œç¥¥çœ‹ä¸“æ å†…å®¹å§ï¼</p> <p>5ï¼šJavaæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤
5-1ï¼šè§£ææºæ–‡ä»¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘
5-2ï¼šè°ƒç”¨å·²æ³¨å†Œçš„æ³¨è§£å¤„ç†å™¨ï¼ˆæ³¨è§£å¤„ç†å™¨æœ‰ä¸¤ç§æ³¨å†Œåˆ°JAVAç¼–è¯‘å™¨çš„æ–¹å¼ï¼‰
5-3ï¼šç”Ÿæˆå­—èŠ‚ç 
5-4ï¼šå¦‚æœ5-2æ­¥ä¸­ï¼Œæ³¨è§£å¤„ç†å™¨ç”Ÿæˆäº†æ–°çš„æºä»£ç ï¼Œé‚£ä¹ˆJAVAç¼–è¯‘å™¨å°†é‡å¤ç¬¬5-1/5-2æ­¥ï¼Œç›´åˆ°ä¸å†ç”Ÿæˆæ–°çš„æºä»£ç ã€‚</p> <p>ä½œè€…å›å¤: æ³¨è§£ç›¸å½“äºç»™æŸäº›ä»£ç è´´äº†ä¸ªæ ‡ç­¾ã€‚æˆ‘ä»¬æ—¢å¯ä»¥é€šè¿‡æ³¨è§£å¤„ç†å™¨åœ¨ç¼–è¯‘æ—¶è§£æè¿™äº›æ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„è§£æè¿™äº›æ ‡ç­¾ã€‚è§£æåéƒ½ä¼šæœ‰ä¸€ç³»åˆ—åŠ¨ä½œï¼Œè¿™äº›åŠ¨ä½œå°±æ˜¯å¯¹æ ‡ç­¾è¯­ä¹‰çš„è¯ é‡Šã€‚</p> <ul><li></li></ul> <p>å°ç¾</p> <p>2018-09-23</p> <p>1</p> <p>éƒ‘è€å¸ˆ  æœ‰ä¸ªé—®é¢˜æˆ‘ä¸€ç›´æƒ³ä¸æ˜ç™½?java æºç ç”Ÿæˆè¯­æ³•æ ‘ java APT å¤„ç†å™¨å¤„ç†åç”Ÿæˆä»£ç ï¼Œ ä»æ–°èµ°é‚£ä¸ªè¿‡ç¨‹  æœ‰é‡å¤ç”Ÿæˆäº†   é‚£ä¸æ˜¯æ­»å¾ªç¯äº†å—ï¼Ÿå¯èƒ½æ˜¯è‡ªå·±çŸ¥è¯†æµ…è–„  éº»çƒ¦åœ¨è¿™ç‚¹ä¸Šæ­£è€å¸ˆèƒ½æŒ‡ç‚¹ä¸‹â˜ºï¸  è‡ªå·±æ°´å¹³æ¯”è¾ƒlow  æ¨¡ä»¿äº†å†™ä¸€ç›´æ²¡æˆåŠŸâ˜ºï¸  ä¸çŸ¥é“éƒ‘è€å¸ˆèƒ½å‘ä¸€ä¸ªdemo å·¥ç¨‹å—</p> <ul><li></li></ul> <p>Egos</p> <p>2018-09-22</p> <p>1</p> <p>é—®ä¸€ä¸‹RetentionPolicy.CLASS çš„ä½¿ç”¨åœºæ™¯ã€‚æœ‰ä¸€äº›ç”¨æ¥ç”ŸæˆJava æ–‡ä»¶çš„æ³¨è§£æ˜¯å¯ä»¥ä½¿ç”¨SOURCEçš„ï¼Œä½†æ˜¯ç”¨äº†CLASSã€‚</p> <ul><li></li></ul> <p>è¡¥å¿ƒ</p> <p>2018-09-21</p> <p>1</p> <p>Lombokéšç€Javaç‰ˆæœ¬çš„é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯æœ‰å¯èƒ½æ²¡æ³•ä½¿ç”¨ã€‚</p> <p>ä½œè€…å›å¤: æœ‰å¯èƒ½ï¼Œå› ä¸ºç”¨çš„æ˜¯internal APIã€‚</p> <ul><li></li></ul> <p>æ¾èŠ±çš®è›‹me</p> <p>2019-03-16</p> <p>åå°„åœ¨è¿è¡Œæ—¶ï¼Œæ³¨è§£è§£é‡Šå™¨åœ¨ç¼–è¯‘æ—¶</p> <ul><li></li></ul> <p>å­œå­œ</p> <p>2019-03-12</p> <p>@Getter å’Œä¾‹å­è‡ªå·±å®šä¹‰çš„@CheckGetter ä¸€èµ·ä½¿ç”¨ï¼Œ@CheckGetterå…ˆç”Ÿæ•ˆã€‚æœ‰ç‚¹æä¸æ˜ç™½Lombokå’Œè‡ªå·±å®šä¹‰çš„æ‰§è¡Œé¡ºåºã€‚</p> <ul><li></li></ul> <p>é‡‘é¾Ÿ</p> <p>2019-01-29</p> <p>CheckGetterProcessorè¿™ä¸ªæ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿï¼Ÿæˆ‘æ„Ÿè§‰æˆ‘æ²¡æœ‰è¿è¡Œèµ·æ¥ä¸€ä¸ªç±»é‡Œæ²¡æœ‰getteræ–¹æ³•ï¼Œæˆ‘ä¸€æ ·èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚</p> <ul><li></li></ul> <p>å±±é¡¶çš„æ´</p> <p>2018-12-02</p> <p>è‡ªå®šä¹‰æ³¨è§£éƒ½æ˜¯aopå®ç°çš„å—ï¼Ÿå¥½åƒæ²¡çœ‹åˆ°è¿‡æ³¨è§£å¤„ç†å™¨ã€‚</p> <ul><li></li></ul> <p>lewis</p> <p>2018-10-04</p> <p>è€å¸ˆä½ å¥½ï¼Œæˆ‘åœ¨ä½¿ç”¨Annotation  Processorè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æŸä¸ªElementæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘æƒ³è·å–è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œå½“è¿™ä¸ªè¿”å›å€¼æ˜¯æ³›å‹çš„æ—¶å€™ï¼Œæ— æ³•è·å–å…¨è·¯å¾„çš„ç±»å‹ï¼›æ¯”å¦‚è¿”å›å€¼æ˜¯è‡ªå®šä¹‰ç±»å‹com.xxx.module.domain.UserInfoè¿™ä¸ªç±»å‹ï¼Œé€šè¿‡ä¸‹é¢çš„è¯­å¥åªèƒ½çŸ¥é“è¿”å›å€¼æ˜¯å­—é¢é‡UserInfo,è€Œä¸æ˜¯com.xxx.module.domain.UserInfoè¿™ä¸ªå…¨è·¯å¾„ç±»å‹ ã€‚
ExecutableElement methodElement = ExecutableElement.class.cast(element);
TypeMirror returnType = methodElement.getReturnType();
TypeName returnTypeName = ClassName.get(returnType);
è¿™ä¸ªreturnTypeNameåªæ˜¯UserInfo,ä¸æ˜¯com.xxx.module.domain.UserInfoï¼Œæ‹¿ä¸åˆ°UserInfoçš„åŒ…è·¯å¾„ä¿¡æ¯ï¼Œé€šè¿‡messageræç¤ºè¯´æ˜¯æ‰¾ä¸åˆ°com.xxx.module.domainè¿™ä¸ªåŒ…ï¼Œè¯·è€å¸ˆæŒ‡å¯¼</p> <ul><li></li></ul> <p>è’‹å®é£</p> <p>2018-09-22</p> <p>ä¸é”™å“¦</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">12/1/2022, 11:41:05 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/3c48b1/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">å‘é‡åŒ–</div></a> <a href="/pages/a5ec55/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸Šï¼‰</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/3c48b1/" class="prev">å‘é‡åŒ–</a></span> <span class="next"><a href="/pages/a5ec55/">åŸºå‡†æµ‹è¯•æ¡†æ¶JMHï¼ˆä¸Šï¼‰</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/ily55421" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:ily55421@163.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/ily55421" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2022
    <span>ily55421 </span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e5f1d04a.js" defer></script><script src="/assets/js/5.5ca26c73.js" defer></script><script src="/assets/js/62.04285b34.js" defer></script>
  </body>
</html>
